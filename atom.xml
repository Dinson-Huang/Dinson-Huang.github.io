<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Android - Dinson - 酸奶布丁 - 国家一级码农</title>
  <subtitle>一只行走在程序员道路上的喵星人</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://dinson.win/"/>
  <updated>2017-05-23T15:02:27.281Z</updated>
  <id>http://dinson.win/</id>
  
  <author>
    <name>DINSON</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Python从入门到放弃（5）</title>
    <link href="http://dinson.win/2017/05/25/17-05-25/"/>
    <id>http://dinson.win/2017/05/25/17-05-25/</id>
    <published>2017-05-25T07:30:08.000Z</published>
    <updated>2017-05-23T15:02:27.281Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<ol>
<li>迭代器&amp;生成器</li>
<li>装饰器</li>
<li>Json &amp; pickle 数据序列化</li>
<li>软件目录结构规范</li>
</ol>
</blockquote>
<a id="more"></a>
<!-- 这是　　缩进-->
<h2 id="迭代器-amp-生成器"><a href="#迭代器-amp-生成器" class="headerlink" title="迭代器&amp;生成器"></a>迭代器&amp;生成器</h2><h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><p><strong>定义</strong>：本质是函数，（装饰其他函数）几十为了其他函数添加附加功能<br><strong>原则</strong>：</p>
<ol>
<li>不能修改被装饰的函数的源代码</li>
<li>不能修改被装饰的函数的调用方式<h2 id="Json-amp-pickle-数据序列化"><a href="#Json-amp-pickle-数据序列化" class="headerlink" title="Json &amp; pickle 数据序列化"></a>Json &amp; pickle 数据序列化</h2></li>
</ol>
<h2 id="软件目录结构规范"><a href="#软件目录结构规范" class="headerlink" title="软件目录结构规范"></a>软件目录结构规范</h2><!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=86 src="//music.163.com/outchain/player?type=2&id=songid&auto=1&height=66"></iframe> -->]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;迭代器&amp;amp;生成器&lt;/li&gt;
&lt;li&gt;装饰器&lt;/li&gt;
&lt;li&gt;Json &amp;amp; pickle 数据序列化&lt;/li&gt;
&lt;li&gt;软件目录结构规范&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python从入门到放弃" scheme="http://dinson.win/categories/Python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Python从入门到放弃（4）</title>
    <link href="http://dinson.win/2017/05/24/17-05-24/"/>
    <id>http://dinson.win/2017/05/24/17-05-24/</id>
    <published>2017-05-24T01:51:53.000Z</published>
    <updated>2017-05-23T12:00:50.280Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<ol>
<li>函数基本语法及特性</li>
<li>参数与局部变量</li>
<li>返回值</li>
<li>嵌套函数</li>
<li>递归</li>
<li>匿名函数</li>
<li>函数式编程介绍</li>
<li>高阶函数</li>
<li>内置函数</li>
</ol>
</blockquote>
<a id="more"></a>
<!-- 这是　　缩进-->
<h2 id="函数基本语法及特性"><a href="#函数基本语法及特性" class="headerlink" title="函数基本语法及特性"></a>函数基本语法及特性</h2><p><strong>背景提要</strong><br>现在老板让你写一个监控程序，监控服务器的系统状况，当cpu＼memory＼disk等指标的使用量超过阀值时即发邮件报警，你掏空了所有的知识量，写出了以下代码<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> <span class="literal">True</span>：</div><div class="line">    <span class="keyword">if</span> cpu利用率 &gt; <span class="number">90</span>%:</div><div class="line">        <span class="meta">#发送邮件提醒</span></div><div class="line">        连接邮箱服务器</div><div class="line">        发送邮件</div><div class="line">        关闭连接</div><div class="line">     </div><div class="line">    <span class="keyword">if</span> 硬盘使用空间 &gt; <span class="number">90</span>%:</div><div class="line">        <span class="meta">#发送邮件提醒</span></div><div class="line">        连接邮箱服务器</div><div class="line">        发送邮件</div><div class="line">        关闭连接</div><div class="line">     </div><div class="line">    <span class="keyword">if</span> 内存占用 &gt; <span class="number">80</span>%:</div><div class="line">        <span class="meta">#发送邮件提醒</span></div><div class="line">        连接邮箱服务器</div><div class="line">        发送邮件</div><div class="line">        关闭连接</div></pre></td></tr></table></figure></p>
<p>上面的代码实现了功能，但即使是邻居老王也看出了端倪，老王亲切的摸了下你家儿子的脸蛋，说，你这个重复代码太多了，每次报警都要重写一段发邮件的代码，太low了，这样干存在2个问题：</p>
<ul>
<li>代码重复过多，一个劲的copy and paste不符合高端程序员的气质</li>
<li>如果日后需要修改发邮件的这段代码，比如加入群发功能，那你就需要在所有用到这段代码的地方都修改一遍</li>
</ul>
<p>你觉得老王说的对，你也不想写重复代码，但又不知道怎么搞，老王好像看出了你的心思，此时他抱起你儿子，笑着说，其实很简单，只需要把重复的代码提取出来，放在一个公共的地方，起个名字，以后谁想用这段代码，就通过这个名字调用就行了，如下<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> 发送邮件<span class="params">(内容)</span></span></div><div class="line">    <span class="comment">#发送邮件提醒</span></div><div class="line">    连接邮箱服务器</div><div class="line">    发送邮件</div><div class="line">    关闭连接</div><div class="line">     </div><div class="line"><span class="keyword">while</span> True：</div><div class="line">     </div><div class="line">    <span class="keyword">if</span> cpu利用率 &gt; <span class="number">90</span>%:</div><div class="line">        发送邮件(<span class="string">'CPU报警'</span>)</div><div class="line">     </div><div class="line">    <span class="keyword">if</span> 硬盘使用空间 &gt; <span class="number">90</span>%:</div><div class="line">        发送邮件(<span class="string">'硬盘报警'</span>)</div><div class="line">     </div><div class="line">    <span class="keyword">if</span> 内存占用 &gt; <span class="number">80</span>%:</div><div class="line">        发送邮件(<span class="string">'内存报警'</span>)</div></pre></td></tr></table></figure></p>
<p><strong>函数是什么?</strong></p>
<p>函数一词来源于数学，但编程中的「函数」概念，与数学中的函数是有很大不同的，具体区别，我们后面会讲，编程中的函数在英文中也有很多不同的叫法。在BASIC中叫做subroutine(子过程或子程序)，在Pascal中叫做procedure(过程)和function，在C中只有function，在Java里面叫做method。</p>
<p><strong>定义: 函数是指将一组语句的集合通过一个名字(函数名)封装起来，要想执行这个函数，只需调用其函数名即可</strong><br><strong>特性:</strong></p>
<ul>
<li>减少重复代码</li>
<li>使程序变的可扩展</li>
<li>使程序变得易维护</li>
<li>语法定义</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span><span class="params">()</span>:</span><span class="comment">#函数名</span></div><div class="line">    print(<span class="string">"Hello, I'm nobody!"</span>)</div><div class="line"> </div><div class="line">sayhi() <span class="comment">#调用函数</span></div></pre></td></tr></table></figure>
<p>可以带参数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#下面这段代码</span></div><div class="line">a,b = <span class="number">5</span>,<span class="number">8</span></div><div class="line">c = a**b</div><div class="line">print(c)</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">#改成用函数写</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(x,y)</span>:</span></div><div class="line">    res = x**y</div><div class="line">    <span class="keyword">return</span> res <span class="comment">#返回函数执行结果</span></div><div class="line"> </div><div class="line">c = calc(a,b) ＃结果赋值给c变量</div><div class="line">print(c)</div></pre></td></tr></table></figure></p>
<h2 id="函数参数与局部变量"><a href="#函数参数与局部变量" class="headerlink" title="函数参数与局部变量"></a>函数参数与局部变量</h2><p><strong>形参变量</strong>只有在被调用时才分配内存单元，在调用结束时，即刻释放所分配的内存单元。因此，形参只在函数内部有效。函数调用结束返回主调用函数后则不能再使用该形参变量</p>
<p><strong>实参</strong>可以是常量、变量、表达式、函数等，无论实参是何种类型的量，在进行函数调用时，它们都必须有确定的值，以便把这些值传送给形参。因此应预先用赋值，输入等办法使参数获得确定值</p>
<h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>看下面代码<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">def</span> <span class="selector-tag">stu_register</span>(name,age,country,course):</div><div class="line">    <span class="selector-tag">print</span>(<span class="string">"----注册学生信息------"</span>)</div><div class="line">    <span class="selector-tag">print</span>(<span class="string">"姓名:"</span>,name)</div><div class="line">    <span class="selector-tag">print</span>(<span class="string">"age:"</span>,age)</div><div class="line">    <span class="selector-tag">print</span>(<span class="string">"国籍:"</span>,country)</div><div class="line">    <span class="selector-tag">print</span>(<span class="string">"课程:"</span>,course)</div><div class="line"> </div><div class="line"><span class="selector-tag">stu_register</span>(<span class="string">"王山炮"</span>,<span class="number">22</span>,<span class="string">"CN"</span>,<span class="string">"python_devops"</span>)</div><div class="line"><span class="selector-tag">stu_register</span>(<span class="string">"张叫春"</span>,<span class="number">21</span>,<span class="string">"CN"</span>,<span class="string">"linux"</span>)</div><div class="line"><span class="selector-tag">stu_register</span>(<span class="string">"刘老根"</span>,<span class="number">25</span>,<span class="string">"CN"</span>,<span class="string">"linux"</span>)</div></pre></td></tr></table></figure></p>
<p>发现 country 这个参数 基本都 是”CN”, 就像我们在网站上注册用户，像国籍这种信息，你不填写，默认就会是 中国， 这就是通过默认参数实现的，把country变成默认参数非常简单<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">stu_register</span><span class="params">(name,age,course,country=<span class="string">"CN"</span>)</span></span><span class="symbol">:</span></div></pre></td></tr></table></figure></p>
<p>这样，这个参数在调用时不指定，那默认就是CN，指定了的话，就用你指定的值。</p>
<blockquote>
<p>另外，你可能注意到了，在把country变成默认参数后，我同时把它的位置移到了最后面，为什么呢？　</p>
</blockquote>
<h3 id="关键参数"><a href="#关键参数" class="headerlink" title="关键参数"></a>关键参数</h3><p>正常情况下，给函数传参数要按顺序，不想按顺序就可以用关键参数，只需指定参数名即可，<strong>但记住一个要求就是，关键参数必须放在位置参数之后。</strong><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">stu_register</span><span class="params">(age=<span class="number">22</span>,name=<span class="string">'alex'</span>,course=<span class="string">"python"</span>,)</span></span></div></pre></td></tr></table></figure></p>
<h3 id="非固定参数"><a href="#非固定参数" class="headerlink" title="非固定参数"></a>非固定参数</h3><p>若你的函数在定义时不确定用户想传入多少个参数，就可以使用非固定参数<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">def stu_register(<span class="name">name</span>,age,*args): # *args 会把多传入的参数变成一个元组形式</div><div class="line">    print(<span class="name">name</span>,age,args)</div><div class="line"> </div><div class="line">stu_register(<span class="string">"Alex"</span>,<span class="number">22</span>)</div><div class="line">#输出</div><div class="line">#Alex <span class="number">22</span> () #后面这个()就是args,只是因为没传值,所以为空</div><div class="line"> </div><div class="line">stu_register(<span class="string">"Jack"</span>,<span class="number">32</span>,<span class="string">"CN"</span>,<span class="string">"Python"</span>)</div><div class="line">#输出</div><div class="line"># Jack <span class="number">32</span> ('CN', 'Python')</div></pre></td></tr></table></figure></p>
<p>还可以有一个**kwargs<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">def stu_register(<span class="name">name</span>,age,*args,**kwargs): # *kwargs 会把多传入的参数变成一个dict形式</div><div class="line">    print(<span class="name">name</span>,age,args,kwargs)</div><div class="line"> </div><div class="line">stu_register(<span class="string">"Alex"</span>,<span class="number">22</span>)</div><div class="line">#输出</div><div class="line">#Alex <span class="number">22</span> () &#123;&#125;#后面这个&#123;&#125;就是kwargs,只是因为没传值,所以为空</div><div class="line"> </div><div class="line">stu_register(<span class="string">"Jack"</span>,<span class="number">32</span>,<span class="string">"CN"</span>,<span class="string">"Python"</span>,sex=<span class="string">"Male"</span>,province=<span class="string">"ShanDong"</span>)</div><div class="line">#输出</div><div class="line"># Jack <span class="number">32</span> ('CN', 'Python') &#123;'province': 'ShanDong', 'sex': 'Male'&#125;</div></pre></td></tr></table></figure></p>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">name</span> = <span class="string">"Disnon"</span></div><div class="line"> </div><div class="line">def change_name(<span class="built_in">name</span>):</div><div class="line">    print(<span class="string">"before change:"</span>,<span class="built_in">name</span>)</div><div class="line">    <span class="built_in">name</span> = <span class="string">"Mike"</span></div><div class="line">    print(<span class="string">"after change"</span>, <span class="built_in">name</span>)</div><div class="line"> </div><div class="line"> </div><div class="line">change_name(<span class="built_in">name</span>)</div><div class="line"> </div><div class="line">print(<span class="string">"在外面看看name改了么?"</span>,<span class="built_in">name</span>)</div></pre></td></tr></table></figure>
<p>输出<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">before</span> <span class="built_in">change</span>: Disnon</div><div class="line"><span class="built_in">after</span> <span class="built_in">change</span> Mike</div><div class="line">在外面看看name改了么? Disnon</div></pre></td></tr></table></figure></p>
<h3 id="全局与局部变量"><a href="#全局与局部变量" class="headerlink" title="全局与局部变量"></a>全局与局部变量</h3><p>在子程序中定义的变量称为局部变量，在程序的一开始定义的变量称为全局变量。<br>全局变量作用域是整个程序，局部变量作用域是定义该变量的子程序。<br>当全局变量与局部变量同名时：<br>在定义局部变量的子程序内，局部变量起作用；在其它地方全局变量起作用。</p>
<h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><p>要想获取函数的执行结果，就可以用return语句把结果返回<br>注意:</p>
<ol>
<li>函数在执行过程中只要遇到return语句，就会停止执行并返回结果，so 也可以理解为 return 语句代表着函数的结束</li>
<li>如果未在函数中指定return,那这个函数的返回值为None </li>
</ol>
<h2 id="嵌套函数-函数套函数"><a href="#嵌套函数-函数套函数" class="headerlink" title="嵌套函数(函数套函数)　"></a>嵌套函数(函数套函数)　</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">name = <span class="string">"Dinson"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_name</span><span class="params">()</span>:</span></div><div class="line">    name = <span class="string">"Dinson2"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change_name2</span><span class="params">()</span>:</span></div><div class="line">        name = <span class="string">"Dinson3"</span></div><div class="line">        print(<span class="string">"第3层打印"</span>, name)</div><div class="line"></div><div class="line">    change_name2()  <span class="comment"># 调用内层函数</span></div><div class="line">    print(<span class="string">"第2层打印"</span>, name)</div><div class="line"></div><div class="line">change_name()</div><div class="line">print(<span class="string">"最外层打印"</span>, name)</div></pre></td></tr></table></figure>
<p>输出<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">第<span class="number">3</span>层打印 Di<span class="symbol">nson3</span></div><div class="line">第<span class="number">2</span>层打印 Di<span class="symbol">nson2</span></div><div class="line">最外层打印 Di<span class="symbol">nson</span></div></pre></td></tr></table></figure></p>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>在函数内部，可以调用其他函数。如果一个函数在内部调用自身本身，这个函数就是递归函数。<br><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def calc(<span class="built_in">n</span>)<span class="symbol">:</span></div><div class="line">    print(<span class="built_in">n</span>)</div><div class="line">    <span class="built_in">if</span> <span class="built_in">int</span>(<span class="built_in">n</span> / <span class="number">2</span>) == <span class="symbol">0:</span></div><div class="line">        return <span class="built_in">n</span></div><div class="line">    return calc(<span class="built_in">int</span>(<span class="built_in">n</span> / <span class="number">2</span>))</div><div class="line"></div><div class="line">calc(<span class="number">10</span>)</div></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">10</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>递归特性:</p>
<ol>
<li>必须有一个明确的结束条件</li>
<li>每次进入更深一层递归时，问题规模相比上次递归都应有所减少</li>
<li>递归效率不高，递归层次过多会导致栈溢出（在计算机中，函数调用是通过栈（stack）这种数据结构实现的，每当进入一个函数调用，栈就会加一层栈帧，每当函数返回，栈就会减一层栈帧。由于栈的大小不是无限的，所以，递归调用的次数过多，会导致栈溢出）</li>
</ol>
<p><strong>递归函数实际应用案例，二分查找(要二分查找必须先排序)</strong><br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">data = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">35</span>]</div><div class="line"></div><div class="line"></div><div class="line">def binary_search(dataset, find_num):</div><div class="line">    print(dataset)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(dataset) &gt; <span class="number">1</span>:</div><div class="line">        <span class="keyword">mid</span> = int(<span class="built_in">len</span>(dataset) / <span class="number">2</span>)</div><div class="line">        <span class="keyword">if</span> dataset[<span class="keyword">mid</span>] == find_num:  <span class="comment"># find it</span></div><div class="line">            print(<span class="string">"找到数字"</span>, dataset[<span class="keyword">mid</span>])</div><div class="line">        elif dataset[<span class="keyword">mid</span>] &gt; find_num:  <span class="comment"># 找的数在mid左面</span></div><div class="line">            print(<span class="string">"\033[31;1m找的数在mid[%s]左面\033[0m"</span> % dataset[<span class="keyword">mid</span>])</div><div class="line">            <span class="literal">return</span> binary_search(dataset[<span class="number">0</span>:<span class="keyword">mid</span>], find_num)</div><div class="line">        <span class="keyword">else</span>:  <span class="comment"># 找的数在mid右面</span></div><div class="line">            print(<span class="string">"\033[32;1m找的数在mid[%s]右面\033[0m"</span> % dataset[<span class="keyword">mid</span>])</div><div class="line">            <span class="literal">return</span> binary_search(dataset[<span class="keyword">mid</span> + <span class="number">1</span>:], find_num)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">if</span> dataset[<span class="number">0</span>] == find_num:  <span class="comment"># find it</span></div><div class="line">            print(<span class="string">"找到数字啦"</span>, dataset[<span class="number">0</span>])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">"没的分了,要找的数字[%s]不在列表里"</span> % find_num)</div><div class="line"></div><div class="line"></div><div class="line">binary_search(data, <span class="number">66</span>)</div></pre></td></tr></table></figure></p>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>匿名函数就是不需要显式的指定函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#这段代码</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">return</span> n**n</div><div class="line">print(calc(<span class="number">10</span>))</div><div class="line"> </div><div class="line"><span class="comment">#换成匿名函数</span></div><div class="line">calc = <span class="keyword">lambda</span> n:n**n</div><div class="line">print(calc(<span class="number">10</span>))</div></pre></td></tr></table></figure></p>
<blockquote>
<p>你也许会说，用上这个东西没感觉有毛方便呀， 。。。。呵呵，如果是这么用，确实没毛线改进，不过匿名函数主要是和其它函数搭配使用的呢，如下</p>
</blockquote>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">res = <span class="built_in">map</span>(<span class="built_in">lambda</span> x:x**<span class="number">2</span>,[<span class="number">1</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">8</span>])</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> res:</div><div class="line">    <span class="built_in">print</span>(i)</div></pre></td></tr></table></figure>
<p>输出<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line"><span class="number">25</span></div><div class="line"><span class="number">49</span></div><div class="line"><span class="number">16</span></div><div class="line"><span class="number">64</span></div></pre></td></tr></table></figure></p>
<h2 id="函数式编程介绍"><a href="#函数式编程介绍" class="headerlink" title="函数式编程介绍　　"></a>函数式编程介绍　　</h2><p>函数是Python内建支持的一种封装，我们通过把大段代码拆成函数，通过一层一层的函数调用，就可以把复杂任务分解成简单的任务，这种分解可以称之为面向过程的程序设计。函数就是面向过程的程序设计的基本单元。</p>
<p><strong>函数式编程中的函数这个术语不是指计算机中的函数（实际上是Subroutine），而是指数学中的函数，即自变量的映射。也就是说一个函数的值仅决定于函数参数的值，不依赖其他状态。比如sqrt(x)函数计算x的平方根，只要x不变，不论什么时候调用，调用几次，值都是不变的。</strong></p>
<p>Python对函数式编程提供部分支持。由于Python允许使用变量，因此，Python不是纯函数式编程语言。</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>简单说，”函数式编程”是一种”<a href="https://en.wikipedia.org/wiki/Programming_paradigm" target="_blank" rel="external">编程范式</a>“（programming paradigm），也就是如何编写程序的方法论。</p>
<p>主要思想是把运算过程尽量写成一系列嵌套的函数调用。举例来说，现在有这样一个数学表达式：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span> + <span class="number">2</span>) * <span class="number">3</span> - <span class="number">4</span></div></pre></td></tr></table></figure></p>
<p>传统的过程式编程，可能这样写：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var a</span> = 1 + 2;</div><div class="line"><span class="attribute">var b</span> = a * 3;</div><div class="line"><span class="attribute">var c</span> = b - 4;</div></pre></td></tr></table></figure></p>
<p>函数式编程要求使用函数，我们可以把运算过程定义为不同的函数，然后写成下面这样：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var result = subtract(<span class="name">multiply</span>(<span class="name">add</span>(<span class="number">1</span>,<span class="number">2</span>), <span class="number">3</span>), <span class="number">4</span>)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>这段代码再演进以下，可以变成这样<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">add(<span class="number">1</span>,<span class="number">2</span>).multiply(<span class="number">3</span>).subtract(<span class="number">4</span>)</div></pre></td></tr></table></figure></p>
<p>这基本就是自然语言的表达了。再看下面的代码，大家应该一眼就能明白它的意思吧：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">merge([<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]).sort().search(<span class="string">"2"</span>)</div></pre></td></tr></table></figure></p>
<p>因此，函数式编程的代码更容易理解。<br>要想学好函数式编程，不要玩py,玩Erlang,Haskell, 好了，我只会这么多了。。。</p>
<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数。<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def <span class="built_in">add</span>(<span class="keyword">x</span>,<span class="keyword">y</span>,<span class="keyword">f</span>):</div><div class="line">    <span class="keyword">return</span> <span class="keyword">f</span>(<span class="keyword">x</span>) + <span class="keyword">f</span>(<span class="keyword">y</span>)</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="keyword">res</span> = <span class="built_in">add</span>(<span class="number">3</span>,-<span class="number">6</span>,<span class="built_in">abs</span>)</div><div class="line"><span class="keyword">print</span>(<span class="keyword">res</span>)</div></pre></td></tr></table></figure></p>
<h2 id="内置参数"><a href="#内置参数" class="headerlink" title="内置参数"></a>内置参数</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FoVID96Zc78HEbXOBomVPQ1yTYGN.png" alt=""><br>内置参数详解：<a href="https://docs.python.org/3/library/functions.html?highlight=built#ascii" target="_blank" rel="external">https://docs.python.org/3/library/functions.html?highlight=built#ascii </a></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#compile</span></div><div class="line">f = <span class="built_in">open</span>(<span class="string">"函数递归.py"</span>)</div><div class="line">data =compile(f.<span class="built_in">read</span>(),<span class="string">''</span>,<span class="string">'exec'</span>)</div><div class="line">exec(data)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#print</span></div><div class="line">msg = <span class="string">"又回到最初的起点"</span></div><div class="line">f = <span class="built_in">open</span>(<span class="string">"tofile"</span>,<span class="string">"w"</span>)</div><div class="line">print(msg,<span class="string">"记忆中你青涩的脸"</span>,sep=<span class="string">"|"</span>,<span class="keyword">end</span>=<span class="string">""</span>,<span class="built_in">file</span>=f)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># #slice</span></div><div class="line"><span class="comment"># a = range(20)</span></div><div class="line"><span class="comment"># pattern = slice(3,8,2)</span></div><div class="line"><span class="comment"># for i in a[pattern]: #等于a[3:8:2]</span></div><div class="line"><span class="comment">#     print(i)</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#memoryview</span></div><div class="line"><span class="comment">#usage:</span></div><div class="line"><span class="comment">#&gt;&gt;&gt; memoryview(b'abcd')</span></div><div class="line"><span class="comment">#&lt;memory at 0x104069648&gt;</span></div><div class="line"><span class="comment">#在进行切片并赋值数据时，不需要重新copy原列表数据，可以直接映射原数据内存，</span></div><div class="line">import <span class="built_in">time</span></div><div class="line"><span class="keyword">for</span> n <span class="keyword">in</span> (<span class="number">100000</span>, <span class="number">200000</span>, <span class="number">300000</span>, <span class="number">400000</span>):</div><div class="line">    data = b<span class="string">'x'</span>*n</div><div class="line">    <span class="built_in">start</span> = <span class="built_in">time</span>.<span class="built_in">time</span>()</div><div class="line">    b = data</div><div class="line">    <span class="keyword">while</span> b:</div><div class="line">        b = b[<span class="number">1</span>:]</div><div class="line">    print(<span class="string">'bytes'</span>, n, <span class="built_in">time</span>.<span class="built_in">time</span>()-<span class="built_in">start</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> n <span class="keyword">in</span> (<span class="number">100000</span>, <span class="number">200000</span>, <span class="number">300000</span>, <span class="number">400000</span>):</div><div class="line">    data = b<span class="string">'x'</span>*n</div><div class="line">    <span class="built_in">start</span> = <span class="built_in">time</span>.<span class="built_in">time</span>()</div><div class="line">    b = memoryview(data)</div><div class="line">    <span class="keyword">while</span> b:</div><div class="line">        b = b[<span class="number">1</span>:]</div><div class="line">    print(<span class="string">'memoryview'</span>, n, <span class="built_in">time</span>.<span class="built_in">time</span>()-<span class="built_in">start</span>)</div><div class="line"></div><div class="line">几个内置方法用法提醒</div></pre></td></tr></table></figure>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=1559072&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;函数基本语法及特性&lt;/li&gt;
&lt;li&gt;参数与局部变量&lt;/li&gt;
&lt;li&gt;返回值&lt;/li&gt;
&lt;li&gt;嵌套函数&lt;/li&gt;
&lt;li&gt;递归&lt;/li&gt;
&lt;li&gt;匿名函数&lt;/li&gt;
&lt;li&gt;函数式编程介绍&lt;/li&gt;
&lt;li&gt;高阶函数&lt;/li&gt;
&lt;li&gt;内置函数&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python从入门到放弃" scheme="http://dinson.win/categories/Python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
    
    
  </entry>
  
  <entry>
    <title>2017 年最流行的 15 个数据科学 Python 库</title>
    <link href="http://dinson.win/2017/05/23/17-05-23/"/>
    <id>http://dinson.win/2017/05/23/17-05-23/</id>
    <published>2017-05-23T00:34:58.000Z</published>
    <updated>2017-05-23T12:00:50.280Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Python 近几年在数据科学行业获得了人们的极大青睐，各种资源也层出不穷。数据科学解决方案公司 ActiveWizards 近日根据他们自己的应用开发经验，总结了数据科学家和工程师将在 2017 年最常使用的 Python 库。</p>
</blockquote>
<a id="more"></a>
<!-- 这是　　缩进-->
<h2 id="核心库"><a href="#核心库" class="headerlink" title="核心库"></a>核心库</h2><h3 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h3><p>地址：<a href="http://www.numpy.org" target="_blank" rel="external">http://www.numpy.org</a></p>
<p>当使用 Python 开始处理科学任务时，不可避免地需要求助 Python 的 SciPy Stack，它是专门为 Python 中的科学计算而设计的软件的集合（不要与 SciPy 混淆，它只是这个 stack 的一部分，以及围绕这个 stack 的社区）。这个 stack 相当庞大，其中有十几个库，所以我们想聚焦在核心包上（特别是最重要的）。</p>
<p>NumPy（代表 Numerical Python）是构建科学计算 stack 的最基础的包。它为 Python 中的 n 维数组和矩阵的操作提供了大量有用的功能。该库还提供了 NumPy 数组类型的数学运算向量化，可以提升性能，从而加快执行速度。</p>
<h3 id="SciPy"><a href="#SciPy" class="headerlink" title="SciPy"></a>SciPy</h3><p>地址：<a href="https://www.scipy.org" target="_blank" rel="external">https://www.scipy.org</a></p>
<p>SciPy 是一个工程和科学软件库。除此以外，你还要了解 SciPy Stack 和 SciPy 库之间的区别。SciPy 包含线性代数、优化、集成和统计的模块。SciPy 库的主要功能建立在 NumPy 的基础之上，因此它的数组大量使用了 NumPy。它通过其特定的子模块提供高效的数值例程操作，比如数值积分、优化和许多其他例程。SciPy 的所有子模块中的函数都有详细的文档，这也是一个优势。</p>
<h3 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h3><p>地址：<a href="http://pandas.pydata.org" target="_blank" rel="external">http://pandas.pydata.org</a></p>
<p>Pandas 是一个 Python 包，旨在通过「标记（labeled）」和「关系（relational）」数据进行工作，简单直观。Pandas 是 data wrangling 的完美工具。它设计用于快速简单的数据操作、聚合和可视化。库中有两个主要的数据结构：</p>
<ul>
<li><p>Series：一维<br><img src="http://ondlsj2sn.bkt.clouddn.com/FjqLL2zH_K3jEIDhObj_ZaKAnHFi.png" alt=""></p>
</li>
<li><p>Data Frames：二维<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fl-HvXsnXx8_txPMebEW0T5FVjXv.png" alt=""></p>
</li>
</ul>
<p>例如，当你要从这两种类型的结构中接收到一个新的「Dataframe」类型的数据时，你将通过传递一个「Series」来将一行添加到「Dataframe」中来接收这样的 Dataframe：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fl-HvXsnXx8_txPMebEW0T5FVjXv.png" alt=""><br>这里只是一小撮你可以用 Pandas 做的事情：</p>
<ul>
<li>轻松删除并添加「Dataframe」中的列</li>
<li>将数据结构转换为「Dataframe」对象</li>
<li>处理丢失数据，表示为 NaN（Not a Number）</li>
<li>功能强大的分组</li>
</ul>
<h2 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h2><h3 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h3><p>地址：<a href="https://matplotlib.org" target="_blank" rel="external">https://matplotlib.org</a></p>
<p>Matplotlib 是另一个 SciPy Stack 核心软件包和另一个 Python 库，专为轻松生成简单而强大的可视化而量身定制。它是一个顶尖的软件，使得 Python（在 NumPy、SciPy 和 Pandas 的帮助下）成为 MatLab 或 Mathematica 等科学工具的显著竞争对手。然而，这个库比较底层，这意味着你需要编写更多的代码才能达到高级的可视化效果，通常会比使用更高级工具付出更多努力，但总的来说值得一试。花一点力气，你就可以做到任何可视化：</p>
<ul>
<li>线图</li>
<li>散点图</li>
<li>条形图和直方图</li>
<li>饼状图</li>
<li>茎图</li>
<li>轮廓图</li>
<li>场图</li>
<li>频谱图<br>还有使用 Matplotlib 创建标签、网格、图例和许多其他格式化实体的功能。基本上，一切都是可定制的。</li>
</ul>
<p>该库支持不同的平台，并可使用不同的 GUI 工具套件来描述所得到的可视化。许多不同的 IDE（如 IPython）都支持 Matplotlib 的功能。</p>
<p>还有一些额外的库可以使可视化变得更加容易。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FgdV3nNPrPgsu2WSKIpYS452haom.png" alt=""></p>
<h3 id="Seaborn"><a href="#Seaborn" class="headerlink" title="Seaborn"></a>Seaborn</h3><p>地址：<a href="https://seaborn.pydata.org" target="_blank" rel="external">https://seaborn.pydata.org</a></p>
<p>Seaborn 主要关注统计模型的可视化；这种可视化包括热度图（heat map），可以总结数据但也描绘总体分布。Seaborn 基于 Matplotlib，并高度依赖于它。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqdaBaaD9bBZwQdlBAwPRJbyhC0c.png" alt=""></p>
<h3 id="Bokeh"><a href="#Bokeh" class="headerlink" title="Bokeh"></a>Bokeh</h3><p>地址：<a href="http://bokeh.pydata.org" target="_blank" rel="external">http://bokeh.pydata.org</a></p>
<p>Bokeh 也是一个很好的可视化库，其目的是交互式可视化。与之前的库相反，这个库独立于 Matplotlib。正如我们已经提到的那样，Bokeh 的重点是交互性，它通过现代浏览器以数据驱动文档（D3.js）的风格呈现。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FiLhaLNjLyyHox6iCyYgqpKYiMTi.png" alt=""></p>
<h3 id="Plotly"><a href="#Plotly" class="headerlink" title="Plotly"></a>Plotly</h3><p>地址：<a href="https://plot.ly" target="_blank" rel="external">https://plot.ly</a></p>
<p>最后谈谈 Plotly。它是一个基于 Web 的工具箱，用于构建可视化，将 API 呈现给某些编程语言（其中包括 Python）。在 plot.ly 网站上有一些强大的、开箱即用的图形。为了使用 Plotly，你需要设置你的 API 密钥。图形处理会放在服务器端，并在互联网上发布，但也有一种方法可以避免这么做。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fi0NOy4lxMmqhhEPDLTJuANRMude.png" alt=""></p>
<h2 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h2><h3 id="SciKit-Learn"><a href="#SciKit-Learn" class="headerlink" title="SciKit-Learn"></a>SciKit-Learn</h3><p>地址：<a href="http://scikit-learn.org" target="_blank" rel="external">http://scikit-learn.org</a><br>Scikits 是 SciPy Stack 的附加软件包，专为特定功能（如图像处理和辅助机器学习）而设计。在后者方面，其中最突出的一个是 scikit-learn。该软件包构建于 SciPy 之上，并大量使用其数学操作。</p>
<p>scikit-learn 有一个简洁和一致的接口，可利用常见的机器学习算法，让我们可以简单地在生产中应用机器学习。该库结合了质量很好的代码和良好的文档，易于使用且有着非常高的性能，是使用 Python 进行机器学习的实际上的行业标准。</p>
<h2 id="深度学习：Keras-TensorFlow-Theano"><a href="#深度学习：Keras-TensorFlow-Theano" class="headerlink" title="深度学习：Keras / TensorFlow / Theano"></a>深度学习：Keras / TensorFlow / Theano</h2><blockquote>
<p>在深度学习方面，Python 中最突出和最方便的库之一是 Keras，它可以在 TensorFlow 或者 Theano 之上运行。让我们来看一下它们的一些细节。</p>
</blockquote>
<h3 id="Theano"><a href="#Theano" class="headerlink" title="Theano"></a>Theano</h3><p>地址：<a href="https://github.com/Theano" target="_blank" rel="external">https://github.com/Theano</a></p>
<p>首先，让我们谈谈 Theano。Theano 是一个 Python 包，它定义了与 NumPy 类似的多维数组，以及数学运算和表达式。该库是经过编译的，使其在所有架构上能够高效运行。这个库最初由蒙特利尔大学机器学习组开发，主要是为了满足机器学习的需求。</p>
<p>要注意的是，Theano 与 NumPy 在底层的操作上紧密集成。该库还优化了 GPU 和 CPU 的使用，使数据密集型计算的性能更快。</p>
<p>效率和稳定性调整允许更精确的结果，即使是非常小的值也可以，例如，即使 x 很小，log(1+x) 也能得到很好的结果。</p>
<h3 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h3><p>地址：<a href="https://www.tensorflow.org" target="_blank" rel="external">https://www.tensorflow.org</a><br><img src="http://ondlsj2sn.bkt.clouddn.com/FlB55UPCqB09XPeWUVlGqzi24Gui.png" alt=""><br>TensorFlow 来自 Google 的开发人员，它是用于数据流图计算的开源库，专门为机器学习设计。它是为满足 Google 对训练神经网络的高要求而设计的，是基于神经网络的机器学习系统 DistBelief 的继任者。然而，TensorFlow 并不是谷歌的科学专用的——它也足以支持许多真实世界的应用。</p>
<p>TensorFlow 的关键特征是其多层节点系统，可以在大型数据集上快速训练人工神经网络。这为 Google 的语音识别和图像识别提供了支持。</p>
<h3 id="Keras"><a href="#Keras" class="headerlink" title="Keras"></a>Keras</h3><p>地址：<a href="https://keras.io" target="_blank" rel="external">https://keras.io</a></p>
<p>最后，我们来看看 Keras。它是一个使用高层接口构建神经网络的开源库，它是用 Python 编写的。它简单易懂，具有高级可扩展性。它使用 Theano 或 TensorFlow 作为后端，但 Microsoft 现在已将 CNTK（Microsoft 的认知工具包）集成为新的后端。</p>
<p>其简约的设计旨在通过建立紧凑型系统进行快速和容易的实验。</p>
<p>Keras 极其容易上手，而且可以进行快速的原型设计。它完全使用 Python 编写的，所以本质上很高层。它是高度模块化和可扩展的。尽管它简单易用且面向高层，但 Keras 也非常深度和强大，足以用于严肃的建模。</p>
<p>Keras 的一般思想是基于神经网络的层，然后围绕层构建一切。数据以张量的形式进行准备，第一层负责输入张量，最后一层用于输出。模型构建于两者之间。</p>
<h2 id="自然语言处理"><a href="#自然语言处理" class="headerlink" title="自然语言处理"></a>自然语言处理</h2><h3 id="NLTK"><a href="#NLTK" class="headerlink" title="NLTK"></a>NLTK</h3><p>地址：<a href="http://www.nltk.org" target="_blank" rel="external">http://www.nltk.org</a></p>
<p>这套库的名称是 Natural Language Toolkit（自然语言工具包），顾名思义，它可用于符号和统计自然语言处理的常见任务。NLTK 旨在促进 NLP 及相关领域（语言学、认知科学和人工智能等）的教学和研究，目前正被重点关注。</p>
<p>NLTK 允许许多操作，例如文本标记、分类和 tokenizing、命名实体识别、建立语语料库树（揭示句子间和句子内的依存性）、词干提取、语义推理。所有的构建块都可以为不同的任务构建复杂的研究系统，例如情绪分析、自动摘要。</p>
<h3 id="Gensim"><a href="#Gensim" class="headerlink" title="Gensim"></a>Gensim</h3><p>地址：<a href="http://radimrehurek.com/gensim" target="_blank" rel="external">http://radimrehurek.com/gensim</a></p>
<p>这是一个用于 Python 的开源库，实现了用于向量空间建模和主题建模的工具。这个库为大文本进行了有效的设计，而不仅仅可以处理内存中内容。其通过广泛使用 NumPy 数据结构和 SciPy 操作而实现了效率。它既高效又易于使用。</p>
<p>Gensim 的目标是可以应用原始的和非结构化的数字文本。Gensim 实现了诸如分层 Dirichlet 进程（HDP）、潜在语义分析（LSA）和潜在 Dirichlet 分配（LDA）等算法，还有 tf-idf、随机投影、word2vec 和 document2vec，以便于检查一组文档（通常称为语料库）中文本的重复模式。所有这些算法是无监督的——不需要任何参数，唯一的输入是语料库。</p>
<h2 id="数据挖掘与统计"><a href="#数据挖掘与统计" class="headerlink" title="数据挖掘与统计"></a>数据挖掘与统计</h2><h3 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h3><p>地址：<a href="https://scrapy.org" target="_blank" rel="external">https://scrapy.org</a></p>
<p>Scrapy 是用于从网络检索结构化数据（如联系人信息或 URL）的爬虫程序（也称为 spider bots）的库。它是开源的，用 Python 编写。它最初是为 scraping 设计的，正如其名字所示的那样，但它现在已经发展成了一个完整的框架，可以从 API 收集数据，也可以用作通用的爬虫。</p>
<p>该库在接口设计上遵循著名的 Don』t Repeat Yourself 原则——提醒用户编写通用的可复用的代码，因此可以用来开发和扩展大型爬虫。</p>
<p>Scrapy 的架构围绕 Spider 类构建，该类包含了一套爬虫所遵循的指令。</p>
<h3 id="Statsmodels"><a href="#Statsmodels" class="headerlink" title="Statsmodels"></a>Statsmodels</h3><p>地址：<a href="http://www.statsmodels.org" target="_blank" rel="external">http://www.statsmodels.org</a></p>
<p>statsmodels 是一个用于 Python 的库，正如你可能从名称中猜出的那样，其让用户能够通过使用各种统计模型估计方法以及执行统计断言和分析来进行数据探索。</p>
<p>许多有用的特征是描述性的，并可通过使用线性回归模型、广义线性模型、离散选择模型、稳健的线性模型、时序分析模型、各种估计器进行统计。</p>
<p>该库还提供了广泛的绘图函数，专门用于统计分析和调整使用大数据统计数据的良好性能。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>这个列表中的库被很多数据科学家和工程师认为是最顶级的，了解和熟悉它们是很有价值的。这里有这些库在 GitHub 上活动的详细统计：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fih19SF7s1rRHz8_SY05D8WI5ni0.png" alt=""><br>当然，这并不是一份完全详尽的列表，还有其它很多值得关注的库、工具包和框架。比如说用于特定任务的 SciKit 包，其中包括用于图像的 SciKit-Image。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=3435378&auto=1&height=66"></iframe> ]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Python 近几年在数据科学行业获得了人们的极大青睐，各种资源也层出不穷。数据科学解决方案公司 ActiveWizards 近日根据他们自己的应用开发经验，总结了数据科学家和工程师将在 2017 年最常使用的 Python 库。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Python从入门到放弃（3）</title>
    <link href="http://dinson.win/2017/05/22/17-05-22/"/>
    <id>http://dinson.win/2017/05/22/17-05-22/</id>
    <published>2017-05-22T01:04:43.000Z</published>
    <updated>2017-05-23T12:00:50.280Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<ol>
<li>集合操作</li>
<li>文件操作</li>
<li>字符编码与转码</li>
</ol>
</blockquote>
<a id="more"></a>
<!-- 这是　　缩进-->
<h2 id="集合操作"><a href="#集合操作" class="headerlink" title="集合操作"></a>集合操作</h2><p>集合是一个无序的，不重复的数据组合，它的主要作用如下：</p>
<ul>
<li>去重，把一个列表变成集合，就自动去重了,天生去重</li>
<li>关系测试，测试两组数据之前的交集、差集、并集等关系</li>
</ul>
<p><strong>创建</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">s = set([5, 2, 1, 4, 3])</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 增</span></div><div class="line"><span class="meta">#</span><span class="bash"> s.add(<span class="string">"Dinson"</span>)  <span class="comment"># &#123;1, 2, 3, 4, 5, 'Dinson'&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> s.update([<span class="string">"Disnon"</span>, 4, 6])  <span class="comment"># &#123;1, 2, 3, 4, 5, 'Disnon', 6&#125;</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 删</span></div><div class="line"><span class="meta">#</span><span class="bash"> s.remove(1)  <span class="comment"># &#123;2, 3, 4, 5&#125; 删除一项</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> s.discard(8)  <span class="comment"># &#123;1, 2, 3, 4, 5&#125; 有则删，不会崩溃</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> s.pop();  <span class="comment"># &#123;2, 3, 4, 5&#125; 随机删除一项</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 查</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(4 <span class="keyword">in</span> s)  <span class="comment"># True</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(4 not <span class="keyword">in</span> s)  <span class="comment"># False</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 其他</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(len(s))  <span class="comment"># 5 集合长度</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s.clear())  <span class="comment"># None</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s.copy())  <span class="comment"># 浅copy</span></span></div><div class="line"></div><div class="line">s1 = set([1, 2])</div><div class="line">s2 = set([2, 3])</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 交集</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1 &amp; s2)  <span class="comment"># &#123;2&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.intersection(s2))  <span class="comment"># &#123;2&#125;</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 并集</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1 | s2)  <span class="comment"># &#123;1, 2, 3&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.union(s2))  <span class="comment"># &#123;1, 2, 3&#125;</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 差集</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1 - s2)  <span class="comment"># &#123;1&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.difference(s2))  <span class="comment"># &#123;1&#125;</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 对称差集</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1 ^ s2)  <span class="comment"># &#123;1, 3&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.symmetric_difference(s2))  <span class="comment"># &#123;1, 3&#125;</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 两个集合是否不相交</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.isdisjoint(s2))  <span class="comment"># False</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> 判断子父集</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.issubset(s2))  <span class="comment"># False</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(s1.issuperset(s2))  <span class="comment"># False</span></span></div></pre></td></tr></table></figure></p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>对文件操作流程</p>
<ol>
<li>打开文件，得到文件句柄并赋值给一个变量</li>
<li>通过句柄对文件进行操作</li>
<li>关闭文件 </li>
</ol>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作　　"></a>基本操作　　</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">f = <span class="keyword">open</span>(<span class="string">'source_name'</span>) <span class="comment">#打开文件</span></div><div class="line">first_line = f.readline()</div><div class="line"><span class="keyword">print</span>(<span class="string">'first line:'</span>,first_line) <span class="comment">#读一行</span></div><div class="line"><span class="keyword">print</span>(<span class="string">'我是分隔线'</span>.center(<span class="number">50</span>,<span class="string">'-'</span>))</div><div class="line">data = f.read()<span class="comment"># 读取剩下的所有内容,文件大时不要用</span></div><div class="line"><span class="keyword">print</span>(data) <span class="comment">#打印文件</span></div><div class="line"> </div><div class="line">f.close() <span class="comment">#关闭文件</span></div></pre></td></tr></table></figure>
<p><strong>打开文件的模式有：</strong></p>
<ul>
<li>r，只读模式（默认）。</li>
<li>w，只写模式。【不可读；不存在则创建；存在则删除内容；】</li>
<li>a，追加模式。【可读；   不存在则创建；存在则只追加内容；】</li>
</ul>
<p><strong>“+” 表示可以同时读写某个文件</strong></p>
<ul>
<li>r+，可读写文件。【可读；可写；可追加】</li>
<li>w+，写读</li>
<li>a+，同a</li>
</ul>
<p><strong>“U”表示在读取时，可以将 \r \n \r\n自动转换成 \n （与 r 或 r+ 模式同使用）</strong></p>
<ul>
<li>rU</li>
<li>r+U</li>
</ul>
<p><strong>“b”表示处理二进制文件（如：FTP发送上传ISO镜像文件，linux可忽略，windows处理二进制文件时需标注）</strong></p>
<ul>
<li>rb</li>
<li>wb</li>
<li>ab</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">f = open("lyrice", encoding="utf-8")</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> <span class="built_in">print</span>(f.read(50))  <span class="comment"># 读取，带参表示读取字符数</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.readline(50))  <span class="comment"># 读取一行，带参表示读取字符数</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.readable())  <span class="comment"># Ture or False 判断文件是否可读</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> f.write()  <span class="comment"># 写数据</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.writelines())  <span class="comment"># 写一行数据</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.writable())  <span class="comment"># Ture or False 判断文件是否可写</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> <span class="built_in">print</span>(f.name)  <span class="comment"># lyrice    文件名</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.encoding)  <span class="comment"># utf-8 文件格式</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.errors)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.closed)  <span class="comment"># Ture or False 查询文件是否关闭</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.buffer)  <span class="comment"># &lt;_io.BufferedReader name='lyrice'&gt;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.newlines)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.line_buffering)</span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> <span class="built_in">print</span>(f.flush())  <span class="comment"># 强制刷新</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.close())  <span class="comment"># 关闭文件</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.fileno())  <span class="comment"># 3 操作系统IO在内存的编号</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.isatty())  <span class="comment"># 是否是终端设备(打印机之类)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.tell())  <span class="comment"># 查询当前光标在第几个字符位置</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.seek(10))  <span class="comment"># 光标移动到指定字符</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.seekable())  <span class="comment"># 光标是否可移动(tty file,device file等返回False)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.truncate(10))  <span class="comment"># 截断，无视光标位置</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(f.detach())  <span class="comment"># 有问题，会造成文件格式异常</span></span></div></pre></td></tr></table></figure>
<p><strong>with语句</strong><br>为了避免打开文件后忘记关闭，可以通过管理上下文，即：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> open(<span class="string">'log'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:</div><div class="line">    </div><div class="line">   ...</div></pre></td></tr></table></figure></p>
<p>如此方式，当with代码块执行完毕时，内部会自动关闭并释放文件资源。<br>在Python 2.7 后，with又支持同时对多个文件的上下文进行管理，即：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'log1'</span>) <span class="keyword">as</span> obj1, <span class="built_in">open</span>(<span class="string">'log2'</span>) <span class="keyword">as</span> obj2:</div><div class="line">    pass</div></pre></td></tr></table></figure></p>
<h2 id="字符编码与转码"><a href="#字符编码与转码" class="headerlink" title="字符编码与转码"></a>字符编码与转码</h2><p>详细文章:<br><a href="http://www.cnblogs.com/yuanchenqi/articles/5956943.html" target="_blank" rel="external">http://www.cnblogs.com/yuanchenqi/articles/5956943.html</a><br><a href="http://www.diveintopython3.net/strings.html" target="_blank" rel="external">http://www.diveintopython3.net/strings.html</a></p>
<p><strong>需知</strong></p>
<blockquote>
<p>1.在python2默认编码是ASCII, python3里默认是unicode</p>
<p>2.unicode 分为 utf-32(占4个字节),utf-16(占两个字节)，utf-8(占1-4个字节)， so utf-16就是现在最常用的unicode版本， 不过在文件里存的还是utf-8，因为utf8省空间</p>
<p>3.在py3中encode,在转码的同时还会把string 变成bytes类型，decode在解码的同时还会把bytes变回string</p>
</blockquote>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/Fl1tIyvZx5Wxfyzqt82Z1rdGwdkO.png" alt=""></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=29950496&auto=1&height=66"></iframe>  ]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;集合操作&lt;/li&gt;
&lt;li&gt;文件操作&lt;/li&gt;
&lt;li&gt;字符编码与转码&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python从入门到放弃" scheme="http://dinson.win/categories/Python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Python从入门到放弃（2）</title>
    <link href="http://dinson.win/2017/05/21/17-05-21/"/>
    <id>http://dinson.win/2017/05/21/17-05-21/</id>
    <published>2017-05-21T12:19:17.000Z</published>
    <updated>2017-05-22T13:26:07.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<ol>
<li>列表、元组操作</li>
<li>字符串操作</li>
<li>字典操作</li>
</ol>
</blockquote>
<a id="more"></a>
<!-- 这是　　缩进 -->
<h2 id="列表、元组操作"><a href="#列表、元组操作" class="headerlink" title="列表、元组操作"></a>列表、元组操作</h2><p><strong>列表</strong>是我们最以后最常用的数据类型之一，通过列表可以对数据实现最方便的存储、修改等操作<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">name = [<span class="string">"张三"</span>, <span class="string">"李四"</span>, <span class="string">"王五"</span>, <span class="string">"赵六"</span>, <span class="string">"赵六"</span>]</div><div class="line"></div><div class="line">print(name.clear())  # []</div><div class="line">print(name.count(<span class="string">"赵六"</span>))  # <span class="number">2</span></div><div class="line">print(name.index(<span class="string">"赵六"</span>))  # <span class="number">3</span></div><div class="line">print(name[<span class="number">0</span>], name[<span class="number">2</span>], name[<span class="number">-4</span>])  # 张三 王五 李四</div><div class="line">print(name[:])  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line">print(name[<span class="number">0</span>:<span class="number">2</span>])  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>]</div><div class="line"></div><div class="line">name.remove(<span class="string">"李四"</span>)</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">del name[<span class="number">2</span>]</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">name[<span class="number">4</span>] = <span class="string">"孙七"</span></div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'孙七'</span>]</div><div class="line"></div><div class="line">name.insert(<span class="number">2</span>, <span class="string">"周八"</span>)</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'周八'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">name.append(<span class="string">"孙七"</span>)</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'孙七'</span>]</div><div class="line"></div><div class="line">name.pop()</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">name.pop(<span class="number">1</span>)  # 李四</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">name.remove(<span class="string">"赵六"</span>)</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>]</div><div class="line"></div><div class="line">name.reverse();</div><div class="line">print(name)  # [<span class="string">'赵六'</span>, <span class="string">'赵六'</span>, <span class="string">'王五'</span>, <span class="string">'李四'</span>, <span class="string">'张三'</span>]</div><div class="line"></div><div class="line">name2 = [<span class="string">"b"</span>, <span class="string">"d"</span>, <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"c"</span>]</div><div class="line">name2.sort();</div><div class="line">print(name2)  # [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line"></div><div class="line">name2 = [<span class="string">"b"</span>, <span class="string">"d"</span>, <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"c"</span>]</div><div class="line">name.extend(name2)</div><div class="line">print(name)  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'e'</span>, <span class="string">'c'</span>]</div><div class="line"></div><div class="line"># 浅copy</div><div class="line">name1 = [<span class="string">"a"</span>, <span class="string">"b"</span>, [<span class="string">"张三"</span>, <span class="string">"李四"</span>], <span class="string">"d"</span>, <span class="string">"e"</span>]</div><div class="line">name2 = name.copy();</div><div class="line">name1[<span class="number">1</span>] = <span class="string">"f"</span></div><div class="line">name1[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">"王五"</span></div><div class="line">print(name1)  # [<span class="string">'a'</span>, <span class="string">'f'</span>, [<span class="string">'王五'</span>, <span class="string">'李四'</span>], <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line">print(name2)  # [<span class="string">'a'</span>, <span class="string">'b'</span>, [<span class="string">'王五'</span>, <span class="string">'李四'</span>], <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line"></div><div class="line"># 深copy</div><div class="line">import copy</div><div class="line">name1 = [<span class="string">"a"</span>, <span class="string">"b"</span>, [<span class="string">"张三"</span>, <span class="string">"李四"</span>], <span class="string">"d"</span>, <span class="string">"e"</span>]</div><div class="line">name2 = copy.deepcopy(name1)</div><div class="line">name1[<span class="number">1</span>] = <span class="string">"f"</span></div><div class="line">name1[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">"王五"</span></div><div class="line">print(name1)  # [<span class="string">'a'</span>, <span class="string">'f'</span>, [<span class="string">'王五'</span>, <span class="string">'李四'</span>], <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line">print(name2)  # [<span class="string">'a'</span>, <span class="string">'b'</span>, [<span class="string">'张三'</span>, <span class="string">'李四'</span>], <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line"></div><div class="line"># 遍历</div><div class="line">print(name[<span class="number">0</span>:-<span class="number">1</span>:<span class="number">2</span>])  # [<span class="string">'张三'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>]</div><div class="line">print(name[::<span class="number">2</span>])  # [<span class="string">'张三'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>]</div><div class="line">print(name[:])  # [<span class="string">'张三'</span>, <span class="string">'李四'</span>, <span class="string">'王五'</span>, <span class="string">'赵六'</span>, <span class="string">'赵六'</span>]</div><div class="line">for i in name:</div><div class="line">    print(i)  # 张三李四王五赵六赵六</div></pre></td></tr></table></figure></p>
<p><strong>元组</strong><br>元组其实跟列表差不多，也是存一组数，只不是它一旦创建，便不能再修改，所以又叫只读列表<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">names = (<span class="string">"alex"</span>,<span class="string">"jack"</span>,<span class="string">"eric"</span>)</div><div class="line">它只有<span class="number">2</span>个方法，一个是<span class="keyword">count</span>,一个是<span class="keyword">index</span>，完毕。</div></pre></td></tr></table></figure></p>
<h2 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">str = "My Name is Dinson"</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> <span class="built_in">print</span>(str.index(<span class="string">"n"</span>))  <span class="comment"># 13  索引字符 无该字符则报错</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.rindex(<span class="string">"n"</span>))  <span class="comment"># 16 从右边开始索引字符 无该字符则报错</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.find(<span class="string">"y"</span>))  <span class="comment"># 1 索引字符 无该字符则返回-1</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.rfind(<span class="string">"n"</span>))  <span class="comment"># 16 从右边开始索引字符 无该字符则返回-1</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.count(<span class="string">"n"</span>))  <span class="comment"># 2  字符出现的个数</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"dinson"</span>.capitalize())  <span class="comment"># Dinson    首字母大写</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.center(24, <span class="string">"-"</span>))  <span class="comment"># ---My Name is Dinson----</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.ljust(24, <span class="string">"-"</span>))   <span class="comment"># My Name is Dinson-------</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.rjust(24, <span class="string">"-"</span>))   <span class="comment"># -------My Name is Dinson</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.zfill(24))        <span class="comment"># 0000000My Name is Dinson</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.endswith(<span class="string">"on"</span>))  <span class="comment"># True 判断是否以该字符结束</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.startswith(<span class="string">"my"</span>))  <span class="comment"># False  判断是否以该字符开始</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"a\ta"</span>.expandtabs(10))  <span class="comment"># a         a</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"_"</span>.join([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>]))  <span class="comment"># a_b_c_d</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.swapcase())  <span class="comment"># mY nAME IS dINSON 大小写互换</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.lower())  <span class="comment"># my name is dinson</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.upper())  <span class="comment"># MY NAME IS DINSON</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.replace(<span class="string">"Dinson"</span>, <span class="string">"Mike"</span>))  <span class="comment"># My Name is Mike</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"\n  Dinson  \n"</span>.strip())  <span class="comment"># Dinson 去除左右空格和换行</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"\n  Dinson  \n"</span>.lstrip())  <span class="comment"># Dinson  \n 去除左边空格和换行</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"\n  Dinson  \n"</span>.rstrip())  <span class="comment"># \n  Dinson 去除右边空格和换行</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"aaaaa"</span>.split(<span class="string">"a"</span>, 2))  <span class="comment"># ['', '', 'aaa'] 从左切割</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"aaaaa"</span>.rsplit(<span class="string">"a"</span>, 2))  <span class="comment"># ['aaa', '', ''] 从右切割</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"Dinson"</span>.partition(<span class="string">"n"</span>))  <span class="comment"># ('Di', 'n', 'son') 切割成固定三个元组</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"Dinson"</span>.rpartition(<span class="string">"n"</span>))  <span class="comment"># ('Dinso', 'n', '')从右边切割成固定三个元组</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"a\nb"</span>.splitlines())  <span class="comment"># ['a', 'b'] 根据不用系统换行符分割</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"my name is dinson"</span>.title())  <span class="comment"># My Name Is Dinson</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> p1 = str.maketrans(<span class="string">"abcdefghijklmnopqrstuvwxyz MND"</span>, <span class="string">"9352401867peiwqcmzoshlmabv$*&amp;^"</span>)</span></div><div class="line"><span class="meta">#</span><span class="bash"> p2 = str.maketrans(<span class="string">"9352401867peiwqcmzoshlmabv$*&amp;^"</span>, <span class="string">"abcdefghijklmnopqrstuvwxyz MND"</span>)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.translate(p1))                <span class="comment"># *b$&amp;9i4$6o$^6woqw</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.translate(p1).translate(p2))  <span class="comment"># My Name is Dinson</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"name:&#123;name&#125;,age:&#123;age&#125;"</span>.format(name=<span class="string">"Dinson"</span>, age=18))  <span class="comment"># name:Dinson,age:18</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"name:&#123;name&#125;,age:&#123;age&#125;"</span>.format_map(&#123;<span class="string">"name"</span>: <span class="string">"Dinson"</span>, <span class="string">"age"</span>: 18&#125;))  <span class="comment"># name:Dinson,age:18</span></span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> <span class="built_in">print</span>(<span class="string">"123"</span>.isdecimal())  <span class="comment"># True 是否为阿拉伯数字(非负整数)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"123"</span>.isalnum())  <span class="comment"># True 是否为阿拉伯数字(非负整数)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"123"</span>.isnumeric())  <span class="comment"># True 是否为阿拉伯数字(非负整数)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"123"</span>.isdigit())  <span class="comment"># True 是否为阿拉伯数字(非负整数)</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"abcdABCD"</span>.isalpha())  <span class="comment"># True 是否为字母</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"_1a中国"</span>.isidentifier())  <span class="comment"># True 是否为合法标识符</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"abcd"</span>.islower())  <span class="comment"># True 是否全部为小写</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"ABCD"</span>.isupper())  <span class="comment"># True 是否全部为大写</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"My Name Is Dinson"</span>.istitle())  <span class="comment"># True 是否为标题格式</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(<span class="string">"\t"</span>.isspace())  <span class="comment"># True 是否全部为空格</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span>(str.isprintable())  <span class="comment"># True tty file,drive file不可打印</span></span></div></pre></td></tr></table></figure>
<h2 id="字典操作"><a href="#字典操作" class="headerlink" title="字典操作"></a>字典操作</h2><p>字典一种key - value 的数据类型，使用就像我们上学用的字典，通过笔划、字母来查对应页的详细内容。<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">cinfo</span> = &#123;</div><div class="line">    <span class="string">'stu1101'</span>: <span class="string">"TengLan Wu"</span>,</div><div class="line">    <span class="string">'stu1102'</span>: <span class="string">"LongZe Luola"</span>,</div><div class="line">    <span class="string">'stu1103'</span>: <span class="string">"XiaoZe Maliya"</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>字典的特性</strong></p>
<ul>
<li>dict是无序的</li>
<li>key必须是唯一的,so 天生去重</li>
</ul>
<p><strong>增加</strong><br><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">info</span>[<span class="string">"stu1104"</span>] = <span class="string">"苍井空"</span></div></pre></td></tr></table></figure></p>
<p><strong>修改</strong><br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">info[<span class="string">'stu1101'</span>] = <span class="string">"武藤兰"</span></div></pre></td></tr></table></figure></p>
<p><strong>删除</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">info.pop(<span class="string">"stu1101"</span>) <span class="comment">#标准删除姿势</span></div><div class="line">或者</div><div class="line"><span class="keyword">del</span> info[<span class="string">'stu1103'</span>] <span class="comment">#换个姿势删除</span></div><div class="line">或者</div><div class="line">info.popitem() <span class="comment">#随机删除</span></div></pre></td></tr></table></figure></p>
<p><strong>查找</strong><br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="string">"stu1102"</span> <span class="keyword">in</span> info <span class="comment">#标准用法，返回Ture，False</span></div><div class="line">或者</div><div class="line">info.<span class="keyword">get</span>(<span class="string">"stu1102"</span>)  <span class="comment">#获取，返回value</span></div><div class="line">或者</div><div class="line">info[<span class="string">"stu1102"</span>] <span class="comment">#同上，但是看下面</span></div><div class="line">info[<span class="string">"stu1105"</span>] <span class="comment">#如果一个key不存在，就报错，get不会，不存在只返回None</span></div></pre></td></tr></table></figure></p>
<p><strong>其它姿势</strong><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#values</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info.values()</div><div class="line">dict_values([<span class="string">'LongZe Luola'</span>, <span class="string">'XiaoZe Maliya'</span>])</div><div class="line"></div><div class="line"><span class="comment">#keys</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info.keys()</div><div class="line">dict_keys([<span class="string">'stu1102'</span>, <span class="string">'stu1103'</span>])</div><div class="line"></div><div class="line"><span class="comment">#setdefault</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info.setdefault(<span class="string">"stu1106"</span>,<span class="string">"Alex"</span>)</div><div class="line"><span class="string">'Alex'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info</div><div class="line">&#123;<span class="string">'stu1102'</span>: <span class="string">'LongZe Luola'</span>, <span class="string">'stu1103'</span>: <span class="string">'XiaoZe Maliya'</span>, <span class="string">'stu1106'</span>: <span class="string">'Alex'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info.setdefault(<span class="string">"stu1102"</span>,<span class="string">"龙泽萝拉"</span>)</div><div class="line"><span class="string">'LongZe Luola'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info</div><div class="line">&#123;<span class="string">'stu1102'</span>: <span class="string">'LongZe Luola'</span>, <span class="string">'stu1103'</span>: <span class="string">'XiaoZe Maliya'</span>, <span class="string">'stu1106'</span>: <span class="string">'Alex'</span>&#125;</div><div class="line"></div><div class="line"><span class="comment">#update </span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info</div><div class="line">&#123;<span class="string">'stu1102'</span>: <span class="string">'LongZe Luola'</span>, <span class="string">'stu1103'</span>: <span class="string">'XiaoZe Maliya'</span>, <span class="string">'stu1106'</span>: <span class="string">'Alex'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b = &#123;<span class="number">1</span><span class="symbol">:</span><span class="number">2</span>,<span class="number">3</span><span class="symbol">:</span><span class="number">4</span>, <span class="string">"stu1102"</span><span class="symbol">:<span class="string">"龙泽萝拉"</span></span>&#125;</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info.update(b)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; info</div><div class="line">&#123;<span class="string">'stu1102'</span>: <span class="string">'龙泽萝拉'</span>, <span class="number">1</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">4</span>, <span class="string">'stu1103'</span>: <span class="string">'XiaoZe Maliya'</span>, <span class="string">'stu1106'</span>: <span class="string">'Alex'</span>&#125;</div><div class="line"></div><div class="line"><span class="comment">#items</span></div><div class="line">info.items()</div><div class="line">dict_items([(<span class="string">'stu1102'</span>, <span class="string">'龙泽萝拉'</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="string">'stu1103'</span>, <span class="string">'XiaoZe Maliya'</span>), (<span class="string">'stu1106'</span>, <span class="string">'Alex'</span>)])</div><div class="line"></div><div class="line"><span class="comment">#通过一个列表生成默认dict,有个没办法解释的坑，少用吧这个</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; dict.fromkeys([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="string">'testd'</span>)</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'testd'</span>, <span class="number">2</span>: <span class="string">'testd'</span>, <span class="number">3</span>: <span class="string">'testd'</span>&#125;</div></pre></td></tr></table></figure></p>
<p><strong>循环dict</strong><br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#方法1</span></div><div class="line"><span class="keyword">for</span> <span class="built_in">key</span> in info:</div><div class="line">    <span class="keyword">print</span>(<span class="built_in">key</span>,info[<span class="built_in">key</span>])</div><div class="line"></div><div class="line"><span class="meta">#方法2</span></div><div class="line"><span class="keyword">for</span> k,v in info.items(): <span class="meta">#会先把dict转成list,数据里大时莫用</span></div><div class="line">    <span class="keyword">print</span>(k,v)</div></pre></td></tr></table></figure></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=26372969&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;列表、元组操作&lt;/li&gt;
&lt;li&gt;字符串操作&lt;/li&gt;
&lt;li&gt;字典操作&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python从入门到放弃" scheme="http://dinson.win/categories/Python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Python从入门到放弃（1）</title>
    <link href="http://dinson.win/2017/05/20/17-05-20/"/>
    <id>http://dinson.win/2017/05/20/17-05-20/</id>
    <published>2017-05-20T09:40:27.000Z</published>
    <updated>2017-05-22T13:26:07.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<ol>
<li>Python介绍</li>
<li>发展史</li>
<li>Python 2 or 3?</li>
<li>安装</li>
<li>Hello World程序</li>
<li>变量</li>
<li>用户输入</li>
<li>模块初识</li>
<li>.pyc是个什么鬼？</li>
<li>数据类型初识</li>
<li>数据运算</li>
<li>表达式if …else语句</li>
<li>表达式for 循环</li>
<li>break and continue </li>
<li>表达式while 循环</li>
<li>一切皆对象</li>
</ol>
</blockquote>
<a id="more"></a>
<h2 id="Python介绍"><a href="#Python介绍" class="headerlink" title="Python介绍"></a>Python介绍</h2><p>python的创始人为吉多·范罗苏姆（Guido van Rossum）。1989年的圣诞节期间，吉多·范罗苏姆为了在阿姆斯特丹打发时间，决心开发一个新的脚本解释程序，作为ABC语言的一种继承。  </p>
<p>最新的TIOBE排行榜，Python赶超PHP占据第四， Python崇尚优美、清晰、简单，是一个优秀并广泛使用的语言。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fjyi1qC0MKR3BoyQygGOvVu4fqxk.png" alt=""></p>
<p>由上图可见，Python整体呈上升趋势，反映出Python应用越来越广泛并且也逐渐得到业内的认可！！！</p>
<p>Python可以应用于众多领域，如：数据分析、组件集成、网络服务、图像处理、数值计算和科学计算等众多领域。目前业内几乎所有大中型互联网企业都在使用Python，如：Youtube、Dropbox、BT、Quora（中国知乎）、豆瓣、知乎、Google、Yahoo!、Facebook、NASA、百度、腾讯、汽车之家、美团等。</p>
<p><strong>目前Python主要应用领域：</strong></p>
<ul>
<li>云计算: 云计算最火的语言， 典型应用OpenStack</li>
<li>WEB开发: 众多优秀的WEB框架，众多大型网站均为Python开发，Youtube, Dropbox, 豆瓣。。。， 典型WEB框架有Django</li>
<li>科学运算、人工智能: 典型库NumPy, SciPy, Matplotlib, Enthought librarys,pandas</li>
<li>系统运维: 运维人员必备语言</li>
<li>金融：量化交易，金融分析，在金融工程领域，Python不但在用，且用的最多，而且重要性逐年提高。原因：作为动态语言的Python，语言结构清晰简单，库丰富，成熟稳定，科学计算和统计分析都很牛逼，生产效率远远高于c,c++,java,尤其擅长策略回测</li>
<li>图形GUI: PyQT, WxPython,TkInter</li>
</ul>
<p><strong>Python在一些公司的应用： </strong></p>
<ul>
<li>谷歌：Google App Engine 、code.google.com 、Google earth 、谷歌爬虫、- - - Google广告等项目都在大量使用Python开发</li>
<li>CIA: 美国中情局网站就是用Python开发的</li>
<li>NASA: 美国航天局(NASA)大量使用Python进行数据分析和运算</li>
<li>YouTube:世界上最大的视频网站YouTube就是用Python开发的</li>
<li>Dropbox:美国最大的在线云存储网站，全部用Python实现，每天网站处理10亿个文件的上传和下载</li>
<li>Instagram:美国最大的图片分享社交网站，每天超过3千万张照片被分享，全部用python开发</li>
<li>Facebook:大量的基础库均通过Python实现的</li>
<li>Redhat: 世界上最流行的Linux发行版本中的yum包管理工具就是用python开发的</li>
<li>豆瓣: 公司几乎所有的业务均是通过Python开发的</li>
<li>知乎: 国内最大的问答社区，通过Python开发(国外Quora)</li>
<li>春雨医生：国内知名的在线医疗网站是用Python开发的</li>
<li>除上面之外，还有搜狐、金山、腾讯、盛大、网易、百度、阿里、淘宝 、土豆、新浪、果壳等公司都在使用Python完成各种各样的任务。 </li>
</ul>
<h3 id="Python-是一门什么样的语言？"><a href="#Python-是一门什么样的语言？" class="headerlink" title="Python 是一门什么样的语言？"></a>Python 是一门什么样的语言？</h3><blockquote>
<p>编程语言主要从以下几个角度为进行分类，编译型和解释型、静态语言和动态语言、强类型定义语言和弱类型定义语言，每个分类代表什么意思呢，我们一起来看一下。</p>
</blockquote>
<p><strong>编译和解释的区别是什么？</strong></p>
<p><strong>编译器</strong>是把源程序的每一条语句都编译成机器语言,并保存成二进制文件,这样运行时计算机可以直接以机器语言来运行此程序,速度很快;<br>而<strong>解释器</strong>则是只在执行程序时,才一条一条的解释成机器语言给计算机来执行,所以运行速度是不如编译后的程序运行的快的. </p>
<p>这是因为计算机不能直接认识并执行我们写的语句,它只能认识机器语言(是二进制的形式)<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnLlYURhDBaW4cpWv38KuQ55fJZX.png" alt=""></p>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/Ft9VR7pT0oVd2ahshLFUppbkNkzW.png" alt=""></p>
<p><strong>编译型vs解释型</strong><br>编译型<br>优点：编译器一般会有预编译的过程对代码进行优化。因为编译只做一次，运行时不需要编译，所以编译型语言的程序执行效率高。可以脱离语言环境独立运行。<br>缺点：编译之后如果需要修改就需要整个模块重新编译。编译的时候根据对应的运行环境生成机器码，不同的操作系统之间移植就会有问题，需要根据运行的操作系统环境编译不同的可执行文件。</p>
<p>解释型<br>优点：有良好的平台兼容性，在任何环境中都可以运行，前提是安装了解释器（虚拟机）。灵活，修改代码的时候直接修改就可以，可以快速部署，不用停机维护。<br>缺点：每次运行的时候都要解释一遍，性能上不如编译型语言。</p>
<p>一、<strong>低级语言与高级语言</strong></p>
<blockquote>
<p>最初的计算机程序都是用0和1的序列表示的，程序员直接使用的是机器指令，无需翻译，从纸带打孔输入即可执行得到结果。后来为了方便记忆，就将用0、1序列表示的机器指令都用符号助记，这些与机器指令一一对应的助记符就成了汇编指令，从而诞生了汇编语言。无论是机器指令还是汇编指令都是面向机器的，统称为低级语言。因为是针对特定机器的机器指令的助记符，所以汇编语言是无法独立于机器(特定的CPU体系结构)的。但汇编语言也是要经过翻译成机器指令才能执行的，所以也有将运行在一种机器上的汇编语言翻译成运行在另一种机器上的机器指令的方法，那就是交叉汇编技术。</p>
<p>高级语言是从人类的逻辑思维角度出发的计算机语言，抽象程度大大提高，需要经过编译成特定机器上的目标代码才能执行，一条高级语言的语句往往需要若干条机器指令来完成。高级语言独立于机器的特性是靠编译器为不同机器生成不同的目标代码(或机器指令)来实现的。那具体的说，要将高级语言编译到什么程度呢，这又跟编译的技术有关了，既可以编译成直接可执行的目标代码，也可以编译成一种中间表示，然后拿到不同的机器和系统上去执行，这种情况通常又需要支撑环境，比如解释器或虚拟机的支持，Java程序编译成bytecode，再由不同平台上的虚拟机执行就是很好的例子。所以，说高级语言不依赖于机器，是指在不同的机器或平台上高级语言的程序本身不变，而通过编译器编译得到的目标代码去适应不同的机器。从这个意义上来说，通过交叉汇编，一些汇编程序也可以获得不同机器之间的可移植性，但这种途径获得的移植性远远不如高级语言来的方便和实用性大。</p>
</blockquote>
<p>二、<strong>编译与解释</strong></p>
<blockquote>
<p>编译是将源程序翻译成可执行的目标代码，翻译与执行是分开的；而解释是对源程序的翻译与执行一次性完成，不生成可存储的目标代码。这只是表象，二者背后的最大区别是：对解释执行而言，程序运行时的控制权在解释器而不在用户程序；对编译执行而言，运行时的控制权在用户程序。</p>
</blockquote>
<p>解释具有良好的动态特性和可移植性，比如在解释执行时可以动态改变变量的类型、对程序进行修改以及在程序中插入良好的调试诊断信息等，而将解释器移植到不同的系统上，则程序不用改动就可以在移植了解释器的系统上运行。同时解释器也有很大的缺点，比如执行效率低，占用空间大，因为不仅要给用户程序分配空间，解释器本身也占用了宝贵的系统资源。</p>
<p>编译器是把源程序的每一条语句都编译成机器语言,并保存成二进制文件,这样运行时计算机可以直接以机器语言来运行此程序,速度很快;<br>而解释器则是只在执行程序时,才一条一条的解释成机器语言给计算机来执行,所以运行速度是不如编译后的程序运行的快的.</p>
<p>三、<strong>编译型和解释型</strong></p>
<blockquote>
<p>我们先看看编译型，其实它和汇编语言是一样的：也是有一个负责翻译的程序来对我们的源代码进行转换，生成相对应的可执行代码。这个过程说得专业一点，就称为编译（Compile），而负责编译的程序自然就称为编译器（Compiler）。如果我们写的程序代码都包含在一个源文件中，那么通常编译之后就会直接生成一个可执行文件，我们就可以直接运行了。但对于一个比较复杂的项目，为了方便管理，我们通常把代码分散在各个源文件中，作为不同的模块来组织。这时编译各个文件时就会生成目标文件（Object   file）而不是前面说的可执行文件。一般一个源文件的编译都会对应一个目标文件。这些目标文件里的内容基本上已经是可执行代码了，但由于只是整个项目的一部分，所以我们还不能直接运行。待所有的源文件的编译都大功告成，我们就可以最后把这些半成品的目标文件“打包”成一个可执行文件了，这个工作由另一个程序负责完成，由于此过程好像是把包含可执行代码的目标文件连接装配起来，所以又称为链接（Link），而负责链接的程序就叫……就叫链接程序（Linker）。链接程序除了链接目标文件外，可能还有各种资源，像图标文件啊、声音文件啊什么的，还要负责去除目标文件之间的冗余重复代码，等等，所以……也是挺累的。链接完成之后，一般就可以得到我们想要的可执行文件了。 </p>
<p>上面我们大概地介绍了编译型语言的特点，现在再看看解释型。噢，从字面上看，“编译”和“解释”的确都有“翻译”的意思，它们的区别则在于翻译的时机安排不大一样。打个比方：假如你打算阅读一本外文书，而你不知道这门外语，那么你可以找一名翻译，给他足够的时间让他从头到尾把整本书翻译好，然后把书的母语版交给你阅读；或者，你也立刻让这名翻译辅助你阅读，让他一句一句给你翻译，如果你想往回看某个章节，他也得重新给你翻译。 </p>
<p>两种方式，前者就相当于我们刚才所说的编译型：一次把所有的代码转换成机器语言，然后写成可执行文件；而后者就相当于我们要说的解释型：在程序运行的前一刻，还只有源程序而没有可执行程序；而程序每执行到源程序的某一条指令，则会有一个称之为解释程序的外壳程序将源代码转换成二进制代码以供执行，总言之，就是不断地解释、执行、解释、执行……所以，解释型程序是离不开解释程序的。像早期的BASIC就是一门经典的解释型语言，要执行BASIC程序，就得进入BASIC环境，然后才能加载程序源文件、运行。解释型程序中，由于程序总是以源代码的形式出现，因此只要有相应的解释器，移植几乎不成问题。编译型程序虽然源代码也可以移植，但前提是必须针对不同的系统分别进行编译，对于复杂的工程来说，的确是一件不小的时间消耗，况且很可能一些细节的地方还是要修改源代码。而且，解释型程序省却了编译的步骤，修改调试也非常方便，编辑完毕之后即可立即运行，不必像编译型程序一样每次进行小小改动都要耐心等待漫长的Compiling…Linking…这样的编译链接过程。不过凡事有利有弊，由于解释型程序是将编译的过程放到执行过程中，这就决定了解释型程序注定要比编译型慢上一大截，像几百倍的速度差距也是不足为奇的。 </p>
<p>编译型与解释型，两者各有利弊。前者由于程序执行速度快，同等条件下对系统要求较低，因此像开发操作系统、大型应用程序、数据库系统等时都采用它，像C/C++、Pascal/Object   Pascal（Delphi）、VB等基本都可视为编译语言，而一些网页脚本、服务器脚本及辅助开发接口这样的对速度要求不高、对不同系统平台间的兼容性有一定要求的程序则通常使用解释性语言，如Java、JavaScript、VBScript、Perl、Python等等。 </p>
<p>但既然编译型与解释型各有优缺点又相互对立，所以一批新兴的语言都有把两者折衷起来的趋势，例如Java语言虽然比较接近解释型语言的特征，但在执行之前已经预先进行一次预编译，生成的代码是介于机器码和Java源代码之间的中介代码，运行的时候则由JVM（Java的虚拟机平台，可视为解释器）解释执行。它既保留了源代码的高抽象、可移植的特点，又已经完成了对源代码的大部分预编译工作，所以执行起来比“纯解释型”程序要快许多。而像VB6（或者以前版本）、C#这样的语言，虽然表面上看生成的是.exe可执行程序文件，但VB6编译之后实际生成的也是一种中介码，只不过编译器在前面安插了一段自动调用某个外部解释器的代码（该解释程序独立于用户编写的程序，存放于系统的某个DLL文件中，所有以VB6编译生成的可执行程序都要用到它），以解释执行实际的程序体。C#（以及其它.net的语言编译器）则是生成.net目标代码，实际执行时则由.net解释系统（就像JVM一样，也是一个虚拟机平台）进行执行。当然.net目标代码已经相当“低级”，比较接近机器语言了，所以仍将其视为编译语言，而且其可移植程度也没有Java号称的这么强大，Java号称是“一次编译，到处执行”，而.net则是“一次编码，到处编译”。呵呵，当然这些都是题外话了。总之，随着设计技术与硬件的不断发展，编译型与解释型两种方式的界限正在不断变得模糊。</p>
</blockquote>
<p>四、<strong>动态语言和静态语言</strong></p>
<blockquote>
<p>通常我们所说的动态语言、静态语言是指动态类型语言和静态类型语言。</p>
<p>（1）动态类型语言：动态类型语言是指在运行期间才去做数据类型检查的语言，也就是说，在用动态类型的语言编程时，永远也不用给任何变量指定数据类型，该语言会在你第一次赋值给变量时，在内部将数据类型记录下来。Python和Ruby就是一种典型的动态类型语言，其他的各种脚本语言如VBScript也多少属于动态类型语言。</p>
<p>（2）静态类型语言：静态类型语言与动态类型语言刚好相反，它的数据类型是在编译其间检查的，也就是说在写程序时要声明所有变量的数据类型，C/C++是静态类型语言的典型代表，其他的静态类型语言还有C#、JAVA等。</p>
</blockquote>
<p>五、<strong>强类型定义语言和弱类型定义语言</strong></p>
<blockquote>
<p>（1）强类型定义语言：强制数据类型定义的语言。也就是说，一旦一个变量被指定了某个数据类型，如果不经过强制转换，那么它就永远是这个数据类型了。举个例子：如果你定义了一个整型变量a,那么程序根本不可能将a当作字符串类型处理。强类型定义语言是类型安全的语言。</p>
<p>（2）弱类型定义语言：数据类型可以被忽略的语言。它与强类型定义语言相反, 一个变量可以赋不同数据类型的值。</p>
<p>强类型定义语言在速度上可能略逊色于弱类型定义语言，但是强类型定义语言带来的严谨性能够有效的避免许多错误。另外，“这门语言是不是动态语言”与“这门语言是否类型安全”之间是完全没有联系的！<br>例如：Python是动态语言，是强类型定义语言（类型安全的语言）; VBScript是动态语言，是弱类型定义语言（类型不安全的语言）; JAVA是静态语言，是强类型定义语言（类型安全的语言）。</p>
</blockquote>
<p>通过上面这些介绍，我们可以得出，<code>python是一门动态解释性的强类型定义语言</code>。那这些基因使成就了Python的哪些优缺点呢？我们继续往下看。</p>
<h3 id="Python的优缺点"><a href="#Python的优缺点" class="headerlink" title="Python的优缺点"></a>Python的优缺点</h3><p><strong>优点</strong></p>
<ol>
<li>Python的定位是“优雅”、“明确”、“简单”，所以Python程序看上去总是简单易懂，初学者学Python，不但入门容易，而且将来深入下去，可以编写那些非常非常复杂的程序。</li>
<li>开发效率非常高，Python有非常强大的第三方库，基本上你想通过计算机实现任何功能，Python官方库里都有相应的模块进行支持，直接下载调用后，在基础库的基础上再进行开发，大大降低开发周期，避免重复造轮子。</li>
<li>高级语言————当你用Python语言编写程序的时候，你无需考虑诸如如何管理你的程序使用的内存一类的底层细节</li>
<li>可移植性————由于它的开源本质，Python已经被移植在许多平台上（经过改动使它能够工 作在不同平台上）。如果你小心地避免使用依赖于系统的特性，那么你的所有Python程序无需修改就几乎可以在市场上所有的系统平台上运行</li>
<li>可扩展性————如果你需要你的一段关键代码运行得更快或者希望某些算法不公开，你可以把你的部分程序用C或C++编写，然后在你的Python程序中使用它们。</li>
<li>可嵌入性————你可以把Python嵌入你的C/C++程序，从而向你的程序用户提供脚本功能。</li>
</ol>
<p><strong>缺点</strong></p>
<ol>
<li>速度慢，Python 的运行速度相比C语言确实慢很多，跟JAVA相比也要慢一些，因此这也是很多所谓的大牛不屑于使用Python的主要原因，但其实这里所指的运行速度慢在大多数情况下用户是无法直接感知到的，必须借助测试工具才能体现出来，比如你用C运一个程序花了0.01s,用Python是0.1s,这样C语言直接比Python快了10倍,算是非常夸张了，但是你是无法直接通过肉眼感知的，因为一个正常人所能感知的时间最小单位是0.15-0.4s左右，哈哈。其实在大多数情况下Python已经完全可以满足你对程序速度的要求，除非你要写对速度要求极高的搜索引擎等，这种情况下，当然还是建议你用C去实现的。</li>
<li>代码不能加密，因为PYTHON是解释性语言，它的源码都是以名文形式存放的，不过我不认为这算是一个缺点，如果你的项目要求源代码必须是加密的，那你一开始就不应该用Python来去实现。</li>
<li>线程不能利用多CPU问题，这是Python被人诟病最多的一个缺点，GIL即全局解释器锁（Global Interpreter Lock），是计算机程序设计语言解释器用于同步线程的工具，使得任何时刻仅有一个线程在执行，Python的线程是操作系统的原生线程。在Linux上为pthread，在Windows上为Win thread，完全由操作系统调度线程的执行。一个python解释器进程内有一条主线程，以及多条用户程序的执行线程。即使在多核CPU平台上，由于GIL的存在，所以禁止多线程的并行执行。关于这个问题的折衷解决方法，我们在以后线程和进程章节里再进行详细探讨。</li>
</ol>
<p>当然，Python还有一些其它的小缺点，在这就不一一列举了，我想说的是，任何一门语言都不是完美的，都有擅长和不擅长做的事情，建议各位不要拿一个语言的劣势去跟另一个语言的优势来去比较，语言只是一个工具，是实现程序设计师思想的工具，就像我们之前中学学几何时，有的时候需要要圆规，有的时候需要用三角尺一样，拿相应的工具去做它最擅长的事才是正确的选择。之前很多人问我Shell和Python到底哪个好？我回答说Shell是个脚本语言，但Python不只是个脚本语言，能做的事情更多，然后又有钻牛角尖的人说完全没必要学Python, Python能做的事情Shell都可以做，只要你足够牛B,然后又举了用Shell可以写俄罗斯方块这样的游戏，对此我能说表达只能是，不要跟SB理论，SB会把你拉到跟他一样的高度，然后用充分的经验把你打倒。</p>
<h3 id="Python解释器"><a href="#Python解释器" class="headerlink" title="Python解释器"></a>Python解释器</h3><p>当我们编写Python代码时，我们得到的是一个包含Python代码的以.py为扩展名的文本文件。要运行代码，就需要Python解释器去执行.py文件。</p>
<p>由于整个Python语言从规范到解释器都是开源的，所以理论上，只要水平够高，任何人都可以编写Python解释器来执行Python代码（当然难度很大）。事实上，确实存在多种Python解释器。</p>
<p><strong>CPython</strong><br>当我们从Python官方网站下载并安装好Python 2.7后，我们就直接获得了一个官方版本的解释器：CPython。这个解释器是用C语言开发的，所以叫CPython。在命令行下运行python就是启动CPython解释器。</p>
<p>CPython是使用最广的Python解释器。教程的所有代码也都在CPython下执行。</p>
<p><strong>IPython</strong><br>IPython是基于CPython之上的一个交互式解释器，也就是说，IPython只是在交互方式上有所增强，但是执行Python代码的功能和CPython是完全一样的。好比很多国产浏览器虽然外观不同，但内核其实都是调用了IE。</p>
<p>CPython用&gt;&gt;&gt;作为提示符，而IPython用In [序号]:作为提示符。</p>
<p><strong>PyPy</strong><br>PyPy是另一个Python解释器，它的目标是执行速度。PyPy采用JIT技术，对Python代码进行动态编译（注意不是解释），所以可以显著提高Python代码的执行速度。</p>
<p>绝大部分Python代码都可以在PyPy下运行，但是PyPy和CPython有一些是不同的，这就导致相同的Python代码在两种解释器下执行可能会有不同的结果。如果你的代码要放到PyPy下执行，就需要了解PyPy和CPython的不同点。</p>
<p><strong>Jython</strong><br>Jython是运行在Java平台上的Python解释器，可以直接把Python代码编译成Java字节码执行。</p>
<p><strong>IronPython</strong><br>IronPython和Jython类似，只不过IronPython是运行在微软.Net平台上的Python解释器，可以直接把Python代码编译成.Net的字节码。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>Python的解释器很多，但使用最广泛的还是CPython。如果要和Java或.Net平台交互，最好的办法不是用Jython或IronPython，而是通过网络调用来交互，确保各程序之间的独立性。</p>
<h2 id="Python发展史"><a href="#Python发展史" class="headerlink" title="Python发展史"></a>Python发展史</h2><ul>
<li>1989年，为了打发圣诞节假期，Guido开始写Python语言的编译器。Python这个名字，来自Guido所挚爱的电视剧Monty Python’s Flying Circus。他希望这个新的叫做Python的语言，能符合他的理想：创造一种C和shell之间，功能全面，易学易用，可拓展的语言。</li>
<li>1991年，第一个Python编译器诞生。它是用C语言实现的，并能够调用C语言的库文件。从一出生，Python已经具有了：类，函数，异常处理，包含表和词典在内的核心数据类型，以及模块为基础的拓展系统。</li>
<li>Granddaddy of Python web frameworks, Zope 1 was released in 1999</li>
<li>Python 1.0 - January 1994 增加了 <a href="https://en.wikipedia.org/wiki/Lambda_calculus" target="_blank" rel="external">lambda</a>, <a href="https://en.wikipedia.org/wiki/Map_(higher-order_function" target="_blank" rel="external">map</a>), <a href="https://en.wikipedia.org/wiki/Filter_(higher-order_function" target="_blank" rel="external">filter</a>) and <a href="https://en.wikipedia.org/wiki/Fold_(higher-order_function" target="_blank" rel="external">reduce</a>).</li>
<li>Python 2.0 - October 16, 2000，加入了内存回收机制，构成了现在Python语言框架的基础</li>
<li>Python 2.4 - November 30, 2004, 同年目前最流行的WEB框架Django 诞生</li>
<li>Python 2.5 - September 19, 2006</li>
<li>Python 2.6 - October 1, 2008</li>
<li>Python 2.7 - July 3, 2010</li>
<li>In November 2014, it was announced that Python 2.7 would be supported until 2020, and reaffirmed that there would be no 2.8 release as users were expected to move to Python 3.4+ as soon as possible</li>
<li>Python 3.0 - December 3, 2008</li>
<li>Python 3.1 - June 27, 2009</li>
<li>Python 3.2 - February 20, 2011</li>
<li>Python 3.3 - September 29, 2012</li>
<li>Python 3.4 - March 16, 2014</li>
<li>Python 3.5 - September 13, 2015</li>
<li>Python 3.6 - December 23, 2016</li>
</ul>
<h2 id="Python-2-or-3"><a href="#Python-2-or-3" class="headerlink" title="Python 2 or 3?"></a>Python 2 or 3?</h2><p><strong>In summary : Python 2.x is legacy, Python 3.x is the present and future of the language</strong></p>
<p>Python 3.0 was released in 2008. The final 2.x version 2.7 release came out in mid-2010, with a statement of extended support for this end-of-life release. The 2.x branch will see no new major releases after that. 3.x is under active development and has already seen over five years of stable releases, including version 3.3 in 2012, 3.4 in 2014, and 3.5 in 2015. This means that all recent standard library improvements, for example, are only available by default in Python 3.x.</p>
<p>Guido van Rossum (the original creator of the Python language) decided to clean up Python 2.x properly, with less regard for backwards compatibility than is the case for new releases in the 2.x range. The most drastic improvement is the better Unicode support (with all text strings being Unicode by default) as well as saner bytes/Unicode separation.</p>
<p>Besides, several aspects of the core language (such as print and exec being statements, integers using floor division) have been adjusted to be easier for newcomers to learn and to be more consistent with the rest of the language, and old cruft has been removed (for example, all classes are now new-style, “range()” returns a memory efficient iterable, not a list as in 2.x). </p>
<p><strong>py2与3的详细区别</strong><br><strong>PRINT IS A FUNCTION</strong><br>The statement has been replaced with a print() function, with keyword arguments to replace most of the special syntax of the old statement (PEP 3105). Examples:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Old: <span class="keyword">print</span> <span class="string">"The answer is"</span>, <span class="number">2</span>*<span class="number">2</span> <span class="keyword">New</span>: <span class="keyword">print</span>(<span class="string">"The answer is"</span>, <span class="number">2</span>*<span class="number">2</span>)</div><div class="line">Old: <span class="keyword">print</span> x, <span class="comment"># Trailing comma suppresses newline New: print(x, end=" ") # Appends a space instead of a newline</span></div><div class="line">Old: <span class="keyword">print</span> <span class="comment"># Prints a newline</span></div><div class="line"><span class="keyword">New</span>: <span class="keyword">print</span>() <span class="comment"># You must call the function!</span></div><div class="line">Old: <span class="keyword">print</span> &gt;&gt;sys.stderr, <span class="string">"fatal error"</span> <span class="keyword">New</span>: <span class="keyword">print</span>(<span class="string">"fatal error"</span>, file=sys.stderr)</div><div class="line">Old: <span class="keyword">print</span> (x, y) <span class="comment"># prints repr((x, y))</span></div><div class="line"><span class="keyword">New</span>: <span class="keyword">print</span>((x, y)) <span class="comment"># Not the same as print(x, y)!</span></div></pre></td></tr></table></figure></p>
<p>You can also customize the separator between items, e.g.:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"There are &lt;"</span>, <span class="number">2</span>**<span class="number">32</span>, <span class="string">"&gt; possibilities!"</span>, sep=<span class="string">""</span>)</span></span></div></pre></td></tr></table></figure></p>
<p><strong>ALL IS UNICODE NOW<br>从此不再为讨厌的字符编码而烦恼</strong></p>
<p>还可以这样玩： (A,*REST,B)=RANGE(5)<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;strong&gt;&gt;&gt;&gt; <span class="selector-tag">a</span>,*rest,<span class="selector-tag">b</span> = range(<span class="number">5</span>)</div><div class="line">&gt;&gt;&gt; <span class="selector-tag">a</span>,rest,<span class="selector-tag">b</span></div><div class="line">(<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>)</div><div class="line">&lt;/strong&gt;</div></pre></td></tr></table></figure></p>
<p>某些库改名了</p>
<table>
<thead>
<tr>
<th>Old Name</th>
<th>New Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>_winreg</td>
<td>winreg</td>
</tr>
<tr>
<td>ConfigParser</td>
<td>configparser</td>
</tr>
<tr>
<td>copy_reg</td>
<td>copyreg</td>
</tr>
<tr>
<td>Queue</td>
<td>queue</td>
</tr>
<tr>
<td>SocketServer</td>
<td>socketserver</td>
</tr>
<tr>
<td>markupbase</td>
<td>_markupbase</td>
</tr>
<tr>
<td>repr</td>
<td>reprlib</td>
</tr>
<tr>
<td>test.test_support</td>
<td>test.support</td>
</tr>
</tbody>
</table>
<p>还有谁不支持PYTHON3?<br>One popular module that don’t yet support Python 3 is Twisted (for networking and other applications). Most actively maintained libraries have people working on 3.x support. For some libraries, it’s more of a priority than others: Twisted, for example, is mostly focused on production servers, where supporting older versions of Python is important, let alone supporting a new version that includes major changes to the language. (Twisted is a prime example of a major package where porting to 3.x is far from trivial ）</p>
<h2 id="Python安装"><a href="#Python安装" class="headerlink" title="Python安装"></a>Python安装</h2><p><strong>windows</strong></p>
<ol>
<li>下载安装包<a href="https://www.python.org/downloads/" target="_blank" rel="external">https://www.python.org/downloads/</a></li>
<li>安装</li>
<li>配置环境变量</li>
</ol>
<p><strong>linux、Mac</strong><br>无需安装，原装Python环境</p>
<p>ps：如果自带2.6，请更新至2.7</p>
<h2 id="Hello-World程序"><a href="#Hello-World程序" class="headerlink" title="Hello World程序"></a>Hello World程序</h2><p>创建一个文件叫hello.py,并输入<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"Hello World!"</span>)</span></span></div></pre></td></tr></table></figure></p>
<p>然后执行命令:python hello.py ,输出<br><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hello World!</div></pre></td></tr></table></figure></p>
<p><strong>指定解释器</strong><br>那么就需要在 hello.py 文件的头部指定解释器，如下：<br><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env python</span></div></pre></td></tr></table></figure></p>
<p><strong>指定字符编码</strong><br>那么就需要在 hello.py 文件的头部指定解释器，如下：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> -*- coding: utf-8 -*-</span></div></pre></td></tr></table></figure></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>声明变量</strong><br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#<span class="keyword">_</span>*_coding:utf<span class="number">-8</span><span class="keyword">_</span>*<span class="keyword">_</span></div><div class="line"> </div><div class="line">name = <span class="string">"Dinson"</span></div></pre></td></tr></table></figure></p>
<p>上述代码声明了一个变量，变量名为： name，变量name的值为：”Dinson”　</p>
<p><strong>变量定义的规则</strong>：</p>
<ul>
<li>变量名只能是 字母、数字或下划线的任意组合</li>
<li>变量名的第一个字符不能是数字</li>
<li>以下关键字不能声明为变量名<br>[‘and’, ‘as’, ‘assert’, ‘break’, ‘class’, ‘continue’, ‘def’, ‘del’, ‘elif’, ‘else’, ‘except’, ‘exec’, ‘finally’, ‘for’, ‘from’, ‘global’, ‘if’, ‘import’, ‘in’, ‘is’, ‘lambda’, ‘not’, ‘or’, ‘pass’, ‘print’, ‘raise’, ‘return’, ‘try’, ‘while’, ‘with’, ‘yield’]</li>
</ul>
<h2 id="用户输入"><a href="#用户输入" class="headerlink" title="用户输入　"></a>用户输入　</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line">#_*_coding:utf-<span class="number">8</span>_*_</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="selector-id">#name</span> = raw_input(<span class="string">"What is your name?"</span>) <span class="selector-id">#only</span> on python <span class="number">2</span><span class="selector-class">.x</span></div><div class="line">name = input(<span class="string">"What is your name?"</span>)</div><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"Hello "</span> + name )</span></span></div></pre></td></tr></table></figure>
<p>输入密码时，如果想要不可见，需要利用getpass 模块中的 getpass方法，即：<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env python</span></div><div class="line"><span class="meta"># -*- coding: utf-8 -*-</span></div><div class="line">  </div><div class="line">import getpass</div><div class="line">  </div><div class="line"><span class="meta"># 将用户输入的内容赋值给 name 变量</span></div><div class="line">pwd = getpass.getpass(<span class="string">"请输入密码："</span>)</div><div class="line">  </div><div class="line"><span class="meta"># 打印输入的内容</span></div><div class="line">print(pwd)</div></pre></td></tr></table></figure></p>
<h2 id="模块初识"><a href="#模块初识" class="headerlink" title="模块初识　　"></a>模块初识　　</h2><p>Python的强大之处在于他有非常丰富和强大的标准库和第三方库，几乎你想实现的任何功能都有相应的Python库支持，以后的课程中会深入讲解常用到的各种库，现在，我们先来象征性的学2个简单的。</p>
<p><strong>sys</strong><br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"> </div><div class="line"><span class="keyword">import</span> sys</div><div class="line"> </div><div class="line"><span class="built_in">print</span>(sys.argv)</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">#输出</span></div><div class="line">$ python test.py helo world</div><div class="line">[<span class="string">'test.py'</span>, <span class="string">'helo'</span>, <span class="string">'world'</span>]  <span class="comment">#把执行脚本时传递的参数获取到了</span></div></pre></td></tr></table></figure></p>
<p><strong>os</strong><br><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env python</span></div><div class="line"># -*- coding: utf-<span class="number">8</span> -*-</div><div class="line"> </div><div class="line"><span class="keyword">import</span> os</div><div class="line"> </div><div class="line">os.system(<span class="string">"df -h"</span>) #调用系统命令</div></pre></td></tr></table></figure></p>
<p><strong>完全结合一下</strong><br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os,sys</div><div class="line"> </div><div class="line">os.<span class="keyword">system</span>(<span class="string">''</span>.join(sys.argv[<span class="number">1</span>:])) #把用户的输入的参数当作一条命令交给os.<span class="keyword">system</span>来执行</div></pre></td></tr></table></figure></p>
<h2 id="pyc是个什么鬼？"><a href="#pyc是个什么鬼？" class="headerlink" title=".pyc是个什么鬼？"></a>.pyc是个什么鬼？</h2><p><strong>1. Python是一门解释型语言？</strong><br>我初学Python时，听到的关于Python的第一句话就是，Python是一门解释性语言，我就这样一直相信下去，直到发现了<em>.pyc文件的存在。如果是解释型语言，那么生成的</em>.pyc文件是什么呢？c应该是compiled的缩写才对啊！<br>为了防止其他学习Python的人也被这句话误解，那么我们就在文中来澄清下这个问题，并且把一些基础概念给理清。</p>
<p><strong>2. 解释型语言和编译型语言 </strong><br>计算机是不能够识别高级语言的，所以当我们运行一个高级语言程序的时候，就需要一个“翻译机”来从事把高级语言转变成计算机能读懂的机器语言的过程。这个过程分成两类，第一种是编译，第二种是解释。<br>编译型语言在程序执行之前，先会通过编译器对程序执行一个编译的过程，把程序转变成机器语言。运行时就不需要翻译，而直接执行就可以了。最典型的例子就是C语言。<br>解释型语言就没有这个编译的过程，而是在程序运行的时候，通过解释器对程序逐行作出解释，然后直接运行，最典型的例子是Ruby。<br>通过以上的例子，我们可以来总结一下解释型语言和编译型语言的优缺点，因为编译型语言在程序运行之前就已经对程序做出了“翻译”，所以在运行时就少掉了“翻译”的过程，所以效率比较高。但是我们也不能一概而论，一些解释型语言也可以通过解释器的优化来在对程序做出翻译时对整个程序做出优化，从而在效率上超过编译型语言。<br>此外，随着Java等基于虚拟机的语言的兴起，我们又不能把语言纯粹地分成解释型和编译型这两种。<br>用Java来举例，Java首先是通过编译器编译成字节码文件，然后在运行时通过解释器给解释成机器文件。所以我们说Java是一种先编译后解释的语言。</p>
<p><strong>3. Python到底是什么 </strong><br>其实Python和Java/C#一样，也是一门基于虚拟机的语言，我们先来从表面上简单地了解一下Python程序的运行过程吧。<br>当我们在命令行中输入python hello.py时，其实是激活了Python的“解释器”，告诉“解释器”：你要开始工作了。可是在“解释”之前，其实执行的第一项工作和Java一样，是编译。<br>熟悉Java的同学可以想一下我们在命令行中如何执行一个Java的程序：<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">javac </span>hello.<span class="keyword">java</span></div><div class="line"><span class="keyword">java </span>hello</div></pre></td></tr></table></figure></p>
<p>只是我们在用Eclipse之类的IDE时，将这两部给融合成了一部而已。其实Python也一样，当我们执行python hello.py时，他也一样执行了这么一个过程，所以我们应该这样来描述Python，Python是一门先编译后解释的语言。</p>
<p><strong>4. 简述Python的运行过程</strong><br>在说这个问题之前，我们先来说两个概念，PyCodeObject和pyc文件。<br>我们在硬盘上看到的pyc自然不必多说，而其实PyCodeObject则是Python编译器真正编译成的结果。我们先简单知道就可以了，继续向下看。<br>当python程序运行时，编译的结果则是保存在位于内存中的PyCodeObject中，当Python程序运行结束时，Python解释器则将PyCodeObject写回到pyc文件中。<br>当python程序第二次运行时，首先程序会在硬盘中寻找pyc文件，如果找到，则直接载入，否则就重复上面的过程。<br>所以我们应该这样来定位PyCodeObject和pyc文件，我们说pyc文件其实是PyCodeObject的一种持久化保存方式。</p>
<h2 id="数据类型初识"><a href="#数据类型初识" class="headerlink" title="数据类型初识"></a>数据类型初识</h2><p><strong>1. 数字</strong></p>
<blockquote>
<p>2 是一个整数的例子。<br>长整数 不过是大一些的整数。<br>3.23和52.3E-4是浮点数的例子。E标记表示10的幂。在这里，52.3E-4表示52.3 * 10-4。<br>(-5+4j)和(2.3-4.6j)是复数的例子，其中-5,4为实数，j为虚数，数学中表示复数是什么？。</p>
</blockquote>
<p>bytes(字节)<br>　　Python 3最重要的新特性大概要算是对文本和二进制数据作了更为清晰的区分。文本总是Unicode，由str类型表示，二进制数据则由bytes类型表示。Python 3不会以任意隐式的方式混用str和bytes，正是这使得两者的区分特别清晰。你不能拼接字符串和字节包，也无法在字节包里搜索字符串（反之亦然），也不能将字符串传入参数为字节包的函数（反之亦然）。<br>int（整型）<br>　　在32位机器上，整数的位数为32位，取值范围为-2<strong>31～2</strong>31-1，即-2147483648～2147483647<br>　　在64位系统上，整数的位数为64位，取值范围为-2<strong>63～2</strong>63-1，即-9223372036854775808～9223372036854775807<br>long（长整型）<br>　　跟C语言不同，Python的长整数没有指定位宽，即：Python没有限制长整数数值的大小，但实际上由于机器内存有限，我们使用的长整数数值不可能无限大。<br>　　注意，自从Python2.2起，如果整数发生溢出，Python会自动将整数数据转换为长整数，所以如今在长整数数据后面不加字母L也不会导致严重后果了。<br>float（浮点型）<br>　　浮点数用来处理实数，即带有小数的数字。类似于C语言中的double类型，占8个字节（64位），其中52位表示底，11位表示指数，剩下的一位表示符号。<br>complex（复数）<br>　　复数由实数部分和虚数部分组成，一般形式为x＋yj，其中的x是复数的实数部分，y是复数的虚数部分，这里的x和y都是实数。<br>注：Python中存在小数字池：-5 ～ 257</p>
<p><strong>2、布尔值</strong><br>　　真或假<br>　　1 或 0</p>
<p><strong>3、字符串</strong><br>　　“hello world”</p>
<p>　　万恶的字符串拼接：<br>　　python中的字符串在C语言中体现为是一个字符数组，每次创建字符串时候需要在内存中开辟一块连续的空，并且一旦需要修改字符串的话，就需要再次开辟空间，万恶的+号每出现一次就会在内从中重新开辟一块空间。</p>
<p>字符串格式化输出<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">name</span> = <span class="string">"Dinson"</span></div><div class="line">print <span class="string">"i am %s "</span> % <span class="built_in">name</span></div><div class="line">  </div><div class="line"><span class="comment">#输出: i am Dinson</span></div></pre></td></tr></table></figure></p>
<p>PS: 字符串是 %s;整数 %d;浮点数%f</p>
<p>字符串常用功能：</p>
<ul>
<li>移除空白</li>
<li>分割</li>
<li>长度</li>
<li>索引</li>
<li>切片</li>
</ul>
<p><strong>4、列表</strong><br>创建列表：<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">name_list = [<span class="string">'dinson'</span>, <span class="string">'nick'</span>, <span class="string">'decy'</span>]</div><div class="line">或</div><div class="line">name_list ＝ list([<span class="string">'dinson'</span>, <span class="string">'nick'</span>, <span class="string">'decy'</span>])</div></pre></td></tr></table></figure></p>
<p>基本操作：</p>
<ul>
<li>索引</li>
<li>切片</li>
<li>追加</li>
<li>删除</li>
<li>长度</li>
<li>切片</li>
<li>循环</li>
<li>包含</li>
</ul>
<p><strong>5、元组(不可变列表)</strong><br>创建元组：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ages = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>)</div><div class="line">或</div><div class="line">ages = tuple((<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>))</div></pre></td></tr></table></figure></p>
<p><strong>6、字典（无序）</strong><br>创建字典：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">person = &#123;<span class="string">"name"</span>: <span class="string">"mr.wu"</span>, 'age': 18&#125;</div><div class="line">或</div><div class="line">person = dict(&#123;<span class="string">"name"</span>: <span class="string">"mr.wu"</span>, 'age': 18&#125;)</div></pre></td></tr></table></figure></p>
<p>常用操作：</p>
<ul>
<li>索引</li>
<li>新增</li>
<li>删除</li>
<li>键、值、键值对</li>
<li>循环</li>
<li>长度</li>
</ul>
<h2 id="数据运算"><a href="#数据运算" class="headerlink" title="数据运算　"></a>数据运算　</h2><p>算数运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fp-9vQiBnaADZDMJXDn2BWS4zeX9.png" alt=""><br>比较运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fh7X_ex7ebXm16-WpR5vldok97ys.png" alt=""><br>赋值运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqpWM8BtdMLD-0GW-hzGVoqMX4hx.png" alt=""><br>逻辑运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FjKfsi27q5BqYjyyqF0j9hgwJSvN.png" alt=""><br>成员运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fg9nIiLObvszh1-8H8AH0NxktzS0.png" alt=""><br>身份运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FuYOArbG3tvwyhSUqFQIzOkflAgC.png" alt=""><br>位运算：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnI2vXuNHCAzskrIi8nJDHYvY_iL.png" alt=""><br>运算符优先级：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fq3y306q1Qss-ovsrdtRcGN_NEIu.png" alt=""><br>更多内容：<a href="http://www.runoob.com/python/python-operators.html" target="_blank" rel="external">猛击这里</a></p>
<h2 id="表达式if-…-else"><a href="#表达式if-…-else" class="headerlink" title="表达式if … else"></a>表达式if … else</h2><p>场景一、用户登陆验证<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 提示输入用户名和密码</span></div><div class="line">  </div><div class="line"><span class="meta"># 验证用户名和密码</span></div><div class="line"><span class="meta">#     如果错误，则输出用户名或密码错误</span></div><div class="line"><span class="meta">#     如果成功，则输出 欢迎，XXX!</span></div><div class="line"> </div><div class="line"><span class="meta">#!/usr/bin/env python</span></div><div class="line"><span class="meta"># -*- coding: encoding -*-</span></div><div class="line">  </div><div class="line">import getpass</div><div class="line">  </div><div class="line">name = raw_input(<span class="string">'请输入用户名：'</span>)</div><div class="line">pwd = getpass.getpass(<span class="string">'请输入密码：'</span>)</div><div class="line">  </div><div class="line"><span class="keyword">if</span> name == <span class="string">"dinson"</span> and pwd == <span class="string">"cmd"</span>:</div><div class="line">    print(<span class="string">"欢迎，dinson！"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"用户名和密码错误"</span>)</div></pre></td></tr></table></figure></p>
<p>场景二、猜年龄游戏</p>
<p>在程序里设定好你的年龄，然后启动程序让用户猜测，用户输入后，根据他的输入提示用户输入的是否正确，如果错误，提示是猜大了还是小了<br><figure class="highlight hsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env python</span></div><div class="line"><span class="meta"># -*- coding: utf<span class="number">-8</span> -*-</span></div><div class="line"> </div><div class="line">my_age = <span class="number">28</span></div><div class="line">user_input = <span class="keyword">int</span>(<span class="keyword">input</span>(<span class="string">"input your guess num:"</span>))</div><div class="line"> </div><div class="line"><span class="keyword">if</span> user_input == my_age:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"Congratulations, you got it !"</span>)</div><div class="line">elif user_input &lt; my_age:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"Oops,think bigger!"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"think smaller!"</span>)</div></pre></td></tr></table></figure></p>
<p>外层变量，可以被内层代码使用<br>内层变量，不应被外层代码使用</p>
<h2 id="表达式for-loop"><a href="#表达式for-loop" class="headerlink" title="表达式for loop"></a>表达式for loop</h2><p>最简单的循环10次<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#<span class="symbol">_</span>*_coding:utf-8<span class="symbol">_</span>*<span class="symbol">_</span></div><div class="line">__author__ = 'Alex Li'</div><div class="line"> </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"loop:"</span>, i )</div></pre></td></tr></table></figure></p>
<p>需求一：还是上面的程序，但是遇到小于5的循环次数就不走了，直接跳入下一次循环<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</div><div class="line">    <span class="keyword">if</span> i&lt;<span class="number">5</span>:</div><div class="line">        continue #不往下走了,直接进入下一次loop</div><div class="line">    print(<span class="string">"loop:"</span>, <span class="selector-tag">i</span> )</div></pre></td></tr></table></figure></p>
<p>需求二：还是上面的程序，但是遇到大于5的循环次数就不走了，直接退出<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</div><div class="line">    <span class="keyword">if</span> i&gt;<span class="number">5</span>:</div><div class="line">        break #不往下走了,直接跳出整个loop</div><div class="line">    print(<span class="string">"loop:"</span>, <span class="selector-tag">i</span> )</div></pre></td></tr></table></figure></p>
<h2 id="while-loop"><a href="#while-loop" class="headerlink" title="while loop 　"></a>while loop 　</h2><p>有一种循环叫死循环，一经触发，就运行个天荒地老、海枯石烂。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">count</span> = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"你是风儿我是沙,缠缠绵绵到天涯..."</span>,<span class="keyword">count</span>)</div><div class="line">    <span class="keyword">count</span> +=<span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>其实除了时间，没有什么是永恒的，死loop还是少写为好　</p>
<p>上面的代码循环100次就退出吧<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">count</span> = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"你是风儿我是沙,缠缠绵绵到天涯..."</span>,<span class="keyword">count</span>)</div><div class="line">    <span class="keyword">count</span> +=<span class="number">1</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">count</span> == <span class="number">100</span>:</div><div class="line">        <span class="keyword">print</span>(<span class="string">"去你妈的风和沙,你们这些脱了裤子是人,穿上裤子是鬼的臭男人.."</span>)</div><div class="line">        <span class="keyword">break</span></div></pre></td></tr></table></figure></p>
<p>回到上面for 循环的例子，如何实现让用户不断的猜年龄，但只给最多3次机会，再猜不对就退出程序。<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env <span class="keyword">python</span></div><div class="line"># -*- codin<span class="variable">g:</span> utf-<span class="number">8</span> -*-</div><div class="line"> </div><div class="line">my_age = <span class="number">28</span></div><div class="line"><span class="built_in">count</span> = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> <span class="built_in">count</span> &lt; <span class="number">3</span>:</div><div class="line">    user_input = <span class="keyword">int</span>(<span class="built_in">input</span>(<span class="string">"input your guess num:"</span>))</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> user_input == my_age:</div><div class="line">        <span class="keyword">print</span>(<span class="string">"Congratulations, you got it !"</span>)</div><div class="line">        <span class="keyword">break</span></div><div class="line">    elif user_input &lt; my_age:</div><div class="line">        <span class="keyword">print</span>(<span class="string">"Oops,think bigger!"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">print</span>(<span class="string">"think smaller!"</span>)</div><div class="line">    <span class="built_in">count</span> += <span class="number">1</span> #每次loop 计数器+<span class="number">1</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span>(<span class="string">"猜这么多次都不对,fuck off."</span>)</div></pre></td></tr></table></figure></p>
<h2 id="一切皆对象"><a href="#一切皆对象" class="headerlink" title="一切皆对象"></a>一切皆对象</h2><p>对于Python，一切事物都是对象，对象基于类创建<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fr8cO7DUYpkNySDcDJSBEpwNXbkc.png" alt=""><br>所以，以下这些值都是对象： “wupeiqi”、38、[‘北京’, ‘上海’, ‘深圳’]，并且是根据不同的类生成的对象。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fpef1qFxifrxnJnoGBOim5EHN0Gb.png" alt=""></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=27713248&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Python介绍&lt;/li&gt;
&lt;li&gt;发展史&lt;/li&gt;
&lt;li&gt;Python 2 or 3?&lt;/li&gt;
&lt;li&gt;安装&lt;/li&gt;
&lt;li&gt;Hello World程序&lt;/li&gt;
&lt;li&gt;变量&lt;/li&gt;
&lt;li&gt;用户输入&lt;/li&gt;
&lt;li&gt;模块初识&lt;/li&gt;
&lt;li&gt;.pyc是个什么鬼？&lt;/li&gt;
&lt;li&gt;数据类型初识&lt;/li&gt;
&lt;li&gt;数据运算&lt;/li&gt;
&lt;li&gt;表达式if …else语句&lt;/li&gt;
&lt;li&gt;表达式for 循环&lt;/li&gt;
&lt;li&gt;break and continue &lt;/li&gt;
&lt;li&gt;表达式while 循环&lt;/li&gt;
&lt;li&gt;一切皆对象&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python从入门到放弃" scheme="http://dinson.win/categories/Python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Kotlin学习资料</title>
    <link href="http://dinson.win/2017/05/19/17-05-19/"/>
    <id>http://dinson.win/2017/05/19/17-05-19/</id>
    <published>2017-05-19T09:42:09.000Z</published>
    <updated>2017-05-22T13:26:07.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Kotlin 成为 Android 官方支持的编程语言</p>
</blockquote>
<a id="more"></a>
<h2 id="官方资料"><a href="#官方资料" class="headerlink" title="官方资料"></a>官方资料</h2><p>首发的肯定是kotlin的官方github地址了：</p>
<blockquote>
<p><a href="https://github.com/JetBrains/kotlin" target="_blank" rel="external">https://github.com/JetBrains/kotlin</a></p>
</blockquote>
<p>github trending，会有很多的新新优质资源</p>
<blockquote>
<p><a href="https://github.com/trending/java" target="_blank" rel="external">https://github.com/trending/java</a></p>
</blockquote>
<p>Readme中包含官方的tutorials、推荐的图书《Kotlin in Action》、《Kotlin for Android Developers》以及其他资源。</p>
<p>英文不太好的不要担心，有官方中文翻译站点：</p>
<blockquote>
<p><a href="https://www.kotlincn.net/docs/reference/" target="_blank" rel="external">https://www.kotlincn.net/docs/reference/</a><br><a href="https://www.gitbook.com/book/hltj/kotlin-reference-chinese/details" target="_blank" rel="external">https://www.gitbook.com/book/hltj/kotlin-reference-chinese/details</a></p>
</blockquote>
<h2 id="《Kotlin-for-android-developers》中文版翻译"><a href="#《Kotlin-for-android-developers》中文版翻译" class="headerlink" title="《Kotlin for android developers》中文版翻译"></a>《Kotlin for android developers》中文版翻译</h2><p>在线版阅读地址</p>
<blockquote>
<p><a href="https://wangjiegulu.gitbooks.io/kotlin-for-android-developers-zh/zhe_ben_shu_shi_he_ni_ma_ff1f.html" target="_blank" rel="external">https://wangjiegulu.gitbooks.io/kotlin-for-android-developers-zh/zhe_ben_shu_shi_he_ni_ma_ff1f.html</a></p>
</blockquote>
<p>离线版PDF下载地址</p>
<blockquote>
<p><a href="https://www.gitbook.com/download/pdf/book/wangjiegulu/kotlin-for-android-developers-zh" target="_blank" rel="external">https://www.gitbook.com/download/pdf/book/wangjiegulu/kotlin-for-android-developers-zh</a></p>
</blockquote>
<h2 id="张涛的开源实验室"><a href="#张涛的开源实验室" class="headerlink" title="张涛的开源实验室"></a>张涛的开源实验室</h2><p>之前在推送中推荐过张涛的博客，博客质量都很高，在很早的时候就开始编写Kotlin相关博客，此外还有很多比较新的知识~</p>
<blockquote>
<p><a href="https://kymjs.com/column/kotlin.html" target="_blank" rel="external">https://kymjs.com/column/kotlin.html</a></p>
</blockquote>
<h2 id="大精-wing的地方酒馆"><a href="#大精-wing的地方酒馆" class="headerlink" title="大精-wing的地方酒馆"></a>大精-wing的地方酒馆</h2><p>让你的代码量减少3倍！使用kotlin开发Android系列~</p>
<blockquote>
<p><a href="http://androidwing.net/index.php/89" target="_blank" rel="external">http://androidwing.net/index.php/89</a></p>
</blockquote>
<p>还有个Kotlin项目：</p>
<blockquote>
<p><a href="https://github.com/githubwing/GankClient-Kotlin" target="_blank" rel="external">https://github.com/githubwing/GankClient-Kotlin</a></p>
</blockquote>
<h2 id="Kotlin-视频教程"><a href="#Kotlin-视频教程" class="headerlink" title="Kotlin 视频教程"></a>Kotlin 视频教程</h2><p>腾讯视频：</p>
<blockquote>
<p><a href="http://v.qq.com/boke/gplay/903446d6231d8612d198c58fb86eb4dc_t6d000101bd9lx1.html" target="_blank" rel="external">http://v.qq.com/boke/gplay/903446d6231d8612d198c58fb86eb4dc_t6d000101bd9lx1.html</a></p>
</blockquote>
<p>百度云：</p>
<blockquote>
<p><a href="http://pan.baidu.com/s/1nvGYAfB" target="_blank" rel="external">http://pan.baidu.com/s/1nvGYAfB</a></p>
</blockquote>
<h2 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h2><p>一个用Kotlin写的简单漫画APP</p>
<blockquote>
<p><a href="https://github.com/wuapnjie/PoiShuhui-Kotlin" target="_blank" rel="external">https://github.com/wuapnjie/PoiShuhui-Kotlin</a></p>
</blockquote>
<h2 id="其他文章"><a href="#其他文章" class="headerlink" title="其他文章"></a>其他文章</h2><p>为什么我要改用Kotlin-by:技术小黑屋</p>
<blockquote>
<p><a href="http://droidyue.com/blog/2017/05/18/why-do-i-turn-to-kotlin/" target="_blank" rel="external">http://droidyue.com/blog/2017/05/18/why-do-i-turn-to-kotlin/</a></p>
</blockquote>
<p>Android开发必备知识：为什么说Kotlin值得一试-by:腾讯Bugly公众号<br><a href="https://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=404087761&amp;idx=1&amp;sn=d80625ee52f860a7a2ed4c238d2151b6" target="_blank" rel="external">https://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=404087761&amp;idx=1&amp;sn=d80625ee52f860a7a2ed4c238d2151b6</a></p>
<p>使用Kotlin进行Android开发</p>
<blockquote>
<p><a href="http://ragnraok.github.io/using-kotlin-to-write-android-app.html" target="_blank" rel="external">http://ragnraok.github.io/using-kotlin-to-write-android-app.html</a></p>
</blockquote>
<p>使用Kotlin在Android Studio上开发App-by:Blincheng</p>
<blockquote>
<p><a href="http://blog.csdn.net/qq_25867141/article/details/52875330" target="_blank" rel="external">http://blog.csdn.net/qq_25867141/article/details/52875330</a></p>
</blockquote>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=26515317&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Kotlin 成为 Android 官方支持的编程语言&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin从放弃到入门" scheme="http://dinson.win/categories/Kotlin%E4%BB%8E%E6%94%BE%E5%BC%83%E5%88%B0%E5%85%A5%E9%97%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>Kotlin基本语法</title>
    <link href="http://dinson.win/2017/05/18/17-05-18/"/>
    <id>http://dinson.win/2017/05/18/17-05-18/</id>
    <published>2017-05-18T10:24:15.000Z</published>
    <updated>2017-05-22T13:26:07.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>如果你觉得Java 7是一个过期的语言，并决定找一个更现代的语言代替。恭喜你！就如你知道的，虽然Java 8已经发布了，它包含了很多我们期待的像现代语言中那样的改善，但是我们Android开发者还是被迫在使用Java 7.这是因为法律的问题。但是就算没有这个限制，并且新的Android设备从今天开始使用新的能理解Java8的VM，在当前的设备过期、几乎没有人使用它们之前我们也不能使用Java 8，所以恐怕我们不会很快等到这一天的到来。<br>但是并不是没有补救的方法。多亏使用了JVM，我们可以使用任何语言去编写Android应用，只要它能够编译成JVM能够认识的字节码就可以了。<br>正如你所想，有很多选择，比如Groovy，Scala，Clojure，当然还有Kotlin。通过实践，只有其中一些能够被考虑来作为替代品。<br>上述的每一种语言都有它的利弊，如果你还没有真正确定你该使用那种语言，我建议你可以去尝试一下它们。</p>
</blockquote>
<a id="more"></a>
<h2 id="类和函数"><a href="#类和函数" class="headerlink" title="类和函数"></a>类和函数</h2><p>Kotlin中的类遵循一个简单的结构。尽管与Java有一点细微的差别。你可以使用<a href="https://try.kotlinlang.org/" target="_blank" rel="external">try.kotlinlang.org</a>在不需要一个真正的项目和不需要部署到机器的前提下来测试一些简单的代码范例。</p>
<h2 id="怎么定义一个类"><a href="#怎么定义一个类" class="headerlink" title="怎么定义一个类"></a>怎么定义一个类</h2><p>如果你想定义一个类，你只需要使用class关键字。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span></span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>它有一个默认唯一的构造器。我们会在以后的课程中学习在特殊的情况下创建其它额外的构造器，但是请记住大部分情况下你只需要这个默认的构造器。你只需要在类名后面写上它的参数。如果这个类没有任何内容可以省略大括号：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Person(<span class="keyword">name</span>: <span class="keyword">String</span>, surname: <span class="keyword">String</span>)</div></pre></td></tr></table></figure></p>
<p>那么构造函数的函数体在哪呢？你可以写在init块中：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Person(<span class="keyword">name</span>: <span class="keyword">String</span>, surname: <span class="keyword">String</span>) <span class="comment">&#123;</span></div><div class="line">    init&#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="类继承"><a href="#类继承" class="headerlink" title="类继承"></a>类继承</h2><p>默认任何类都是基础继承自Any（与java中的Object类似），但是我们可以继承其它类。所有的类默认都是不可继承的（final），所以我们只能继承那些明确声明open或者abstract的类：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">open <span class="keyword">class</span> Animal(<span class="keyword">name</span>: <span class="keyword">String</span>)</div><div class="line"><span class="keyword">class</span> Person(<span class="keyword">name</span>: <span class="keyword">String</span>, surname: <span class="keyword">String</span>) : Animal(<span class="keyword">name</span>)</div></pre></td></tr></table></figure></p>
<p>当我们只有单个构造器时，我们需要在从父类继承下来的构造器中指定需要的参数。这是用来替换Java中的super调用的。</p>
<h2 id="函数-方法"><a href="#函数-方法" class="headerlink" title="函数(方法)"></a>函数(方法)</h2><p>函数（我们Java中的方法）可以使用<code>fun</code>关键字就可以定义:<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果你没有指定它的返回值，它就会返回<code>Unit</code>，与Java中的<code>void</code>类似，但是<code>Unit</code>是一个真正的对象。你当然也可以指定任何其它的返回类型：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span> : <span class="built_in">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>就想你在上面的例子中看到的那样，我在每句的最后没有使用分号。当然你也可以使用分号，分号不是必须的，而且不使用分号是一个不错的实践。当你这么做了，你会发现这节约了你很多时间。</p>
</blockquote>
<p>然而如果返回的结果可以使用一个表达式计算出来，你可以不使用括号而是使用等号：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(x: <span class="type">Int</span>,y: <span class="type">Int</span>)</span></span> : <span class="built_in">Int</span> = x + y</div></pre></td></tr></table></figure></p>
<h2 id="构造方法和函数参数"><a href="#构造方法和函数参数" class="headerlink" title="构造方法和函数参数"></a>构造方法和函数参数</h2><p>Kotlin中的参数与Java中有些不同。如你所见，我们先写参数的名字再写它的类型：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span> : <span class="built_in">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们可以给参数指定一个默认值使得它们变得可选，这是非常有帮助的。这里有一个例子，在Activity中创建了一个函数用来toast一段信息：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">toast</span><span class="params">(message: <span class="type">String</span>, length: <span class="type">Int</span> = Toast.LENGTH_SHORT)</span></span> &#123;</div><div class="line">    Toast.makeText(<span class="keyword">this</span>, message, length).show()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如你所见，第二个参数（length）指定了一个默认值。这意味着你调用的时候可以传入第二个值或者不传，这样可以避免你需要的重载函数：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">toast</span><span class="params">(<span class="string">"Hello"</span>)</span></span></div><div class="line"><span class="function"><span class="title">toast</span><span class="params">(<span class="string">"Hello"</span>, Toast.LENGTH_LONG)</span></span></div></pre></td></tr></table></figure></p>
<p>这个与下面的Java代码是一样的：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">toast</span><span class="params">(String message)</span></span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">toast</span><span class="params">(String message, <span class="keyword">int</span> length)</span></span>&#123;</div><div class="line">    Toast.makeText(<span class="keyword">this</span>, message, length).show();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这跟你想象的一样复杂。再看看这个例子：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">niceToast</span><span class="params">(message: <span class="type">String</span>,</span></span></div><div class="line">                tag: <span class="type">String</span> = javaClass&lt;MainActivity&gt;().getSimpleName(),</div><div class="line">                length: <span class="built_in">Int</span> = Toast.LENGTH_SHORT) &#123;</div><div class="line">    Toast.makeText(<span class="keyword">this</span>, <span class="string">"[<span class="subst">$className</span>] <span class="subst">$message</span>"</span>, length).show()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我增加了第三个默认值是类名的tag参数。如果在Java中总数开销会以几何增长。现在可以通过以下方式调用：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">toast</span><span class="params">(<span class="string">"Hello"</span>)</span></span></div><div class="line"><span class="function"><span class="title">toast</span><span class="params">(<span class="string">"Hello"</span>, <span class="string">"MyTag"</span>)</span></span></div><div class="line"><span class="function"><span class="title">toast</span><span class="params">(<span class="string">"Hello"</span>, <span class="string">"MyTag"</span>, Toast.LENGTH_SHORT)</span></span></div></pre></td></tr></table></figure></p>
<p>而且甚至还有其它选择，因为你可以使用参数名字来调用，这表示你可以通过在值前写明参数名来传入你希望的参数：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">toast</span><span class="params">(message = <span class="string">"Hello"</span>, length = Toast.LENGTH_SHORT)</span></span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>你可以在String中直接使用模版表达式。它可以帮助你很简单地在静态值和变量的基础上编写复杂的String。在上面的例子中，我使用了”[$className] $message”。<br>如你所见，任何时候你使用一个<code>$</code>符号就可以插入一个表达式。如果这个表达式有一点复杂，你就需要使用一对大括号括起来：”Your name is ${user.name}”。</p>
</blockquote>
<h2 id="Layout的编写"><a href="#Layout的编写" class="headerlink" title="Layout的编写"></a>Layout的编写</h2><blockquote>
<p>以天气预报应用为例</p>
</blockquote>
<!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=86 src="//music.163.com/outchain/player?type=2&id=songid&auto=1&height=66"></iframe> -->]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;如果你觉得Java 7是一个过期的语言，并决定找一个更现代的语言代替。恭喜你！就如你知道的，虽然Java 8已经发布了，它包含了很多我们期待的像现代语言中那样的改善，但是我们Android开发者还是被迫在使用Java 7.这是因为法律的问题。但是就算没有这个限制，并且新的Android设备从今天开始使用新的能理解Java8的VM，在当前的设备过期、几乎没有人使用它们之前我们也不能使用Java 8，所以恐怕我们不会很快等到这一天的到来。&lt;br&gt;但是并不是没有补救的方法。多亏使用了JVM，我们可以使用任何语言去编写Android应用，只要它能够编译成JVM能够认识的字节码就可以了。&lt;br&gt;正如你所想，有很多选择，比如Groovy，Scala，Clojure，当然还有Kotlin。通过实践，只有其中一些能够被考虑来作为替代品。&lt;br&gt;上述的每一种语言都有它的利弊，如果你还没有真正确定你该使用那种语言，我建议你可以去尝试一下它们。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin从放弃到入门" scheme="http://dinson.win/categories/Kotlin%E4%BB%8E%E6%94%BE%E5%BC%83%E5%88%B0%E5%85%A5%E9%97%A8/"/>
    
    
      <category term="Kotlin" scheme="http://dinson.win/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Google I/O 2017</title>
    <link href="http://dinson.win/2017/05/17/17-05-17/"/>
    <id>http://dinson.win/2017/05/17/17-05-17/</id>
    <published>2017-05-17T09:38:37.000Z</published>
    <updated>2017-05-22T13:26:07.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>美国时间5月17日-19日，Google I/O 2017大会将于美国加利福尼亚州山景城的海岸线圆形剧场召开，下面一起看看此次I/O大会将会有哪些值得期待的看点</p>
</blockquote>
<a id="more"></a>
<h2 id="Google-Assistant"><a href="#Google-Assistant" class="headerlink" title="Google Assistant"></a>Google Assistant</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/Fsle7cG5g1hAKRNZYOkMefIse-WC.png" alt=""><br>Google宣布其AI语音助手Google Assistant将推出iPhone版，并对其加入了文字输入、Google Lens图像输入，支持到更多设备和语言等新功能升级。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FgFBMsW0Ii9OrJomlWtFmBlU0viX.png" alt=""><br>Google Assistant将推出iPhone版，iPhone用户也能享受Google这个语音AI助手进行语音搜索、查看Gmail、Youtube和网页搜索等操作。<br>为了方便用户在不能使用语音输入情况下，Google Assistant加入了文字输入方式和通过新公布的Google Lens技术进行图像识别。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FmoSO2aQS5Z9wXtJVyRGDh_fN8ey.png" alt=""><br>Goolge还推出Assistant SDK给开发者，并联合大量硬件制造商，推出内置Google Assistant的设备，这些设备将标有Google Assistant Built-in。</p>
<h2 id="Google系统Android-O"><a href="#Google系统Android-O" class="headerlink" title="Google系统Android O"></a>Google系统Android O</h2><p>本次Google I/O 2017上最重要的发布，自然就是Android O了，迄今Android激活设备已经达到20亿部，包括了智能手机、手表、车载和TV等，早在两个月前Android O开发者阅览版便已经放出，现在Google正式介绍了Android O的新功能，包括流动性体验和关键功能改进两部分。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FgHrbLSOKKKP70RfLT1g1ytDc0T6.png" alt=""><br>Android O提供流动式体验（Fluid Experience），包括画中画分屏功能、在App图标中显示通知的通知点、更好用的网页自动填写、可自动识别文字中地址和电话的智能选择，Google还为新系统推出TensorFlow Lite智能AI学习系统，用于加强语音、图像学习和识别能力。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Ft0Z6EAr30-aIplsjfFcn5FtupXt.png" alt=""><br>画中画<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtOdaHdi6pHKtPk8vUy1t_mKa6Bd.png" alt=""><br>通知点<br><img src="http://ondlsj2sn.bkt.clouddn.com/FoWDfDFY77RIzXSjzZmv3-RhOjcq.png" alt=""><br>智能选择<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fq9YTOykI-zSbucCJb2eKL3FCPza.png" alt=""></p>
<h2 id="TensorFlow-Lite"><a href="#TensorFlow-Lite" class="headerlink" title="TensorFlow Lite"></a>TensorFlow Lite</h2><p>Android O另一新部分为关键功能（Vitals），这包括了安全性改进、系统调整和更方便的开发者工具。其中系统调整中，Android O的开机启动时间比N快了2倍，而App的运行也更快更流畅，以Google Sheets作例子，在没有对App作改动情况下，Android O上运行快了两倍，新系统还在后台管理部分更智能，提供App定位和执行的限制。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fg-bUT_rDh0qN_p5KM21IeheHUKJ.png" alt=""><br>关键性功能改进<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhTEAIb6TYUyvrq7DMfWrpCpMAss.png" alt=""><br>开机速度快2倍，App运行速度快2倍<br><img src="http://ondlsj2sn.bkt.clouddn.com/FloGoCjFPEXthZypGf80L_kY7Y6-.png" alt=""><br>支持Kotlin<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fjclf9tfioJ3CKm5VAnUVtsC7MAt.png" alt=""><br>Android O最新支持Kotlin开发语言，这是由JetBrains基于JVM的一种编程语言，Google表示这是开发者社区强烈要求加入的。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvQwaD1CHS2D8JQ1iYS9sC_77e--.png" alt=""><br>最后Android O还有一些新功能，其中当然少不了增加更多EMOJI表情！Android O Preview开发者阅览版在今天已经提供下载，但Google未透露正式版的推送时间。</p>
<h2 id="Google-I-O-宣布Galaxy-S8将支持Daydream，推出独立式移动VR设备"><a href="#Google-I-O-宣布Galaxy-S8将支持Daydream，推出独立式移动VR设备" class="headerlink" title="Google I/O 宣布Galaxy S8将支持Daydream，推出独立式移动VR设备"></a>Google I/O 宣布Galaxy S8将支持Daydream，推出独立式移动VR设备</h2><p>Google宣布了三星Galaxy S8手机将可支持移动VR平台Daydream，Google还联合高通、HTC和联想推独立式移动VR设备，在今年晚些时候开卖。<br>这次Google I/O 2017大会上VR和AR部分，为移动VR平台Daydream和AR项目Tango的新介绍，其中宣布了三星Galaxy S8手机将可支持Daydream，Google还联合高通、HTC和联想推独立式移动VR设备，Tango部分则宣布了华硕ZenFone AR手机和VPS定位技术。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvGaMDuTLau4ZzOyWGFrDl4w8KeH.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FkytNpII8saTUyQ9UBl03EeZLcfV.png" alt=""><br>除了这类需要搭配Daydream View头显使用的智能手机VR外，Google还宣布推出独立式移动VR设备（Standalone VR）。<br>独立式移动VR设备不需要PC、手机和线缆，有更好易用性和身体定位，相比智能手机VR有更好的WorldSense运动追踪技术。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fk0tajcyA6hpq0zI4BSbGzlqq_yL.png" alt=""><br>Google将于与高通、HTC和联想合作推出相关的产品，后者两款独立式VR设备将在今年晚些时候开卖。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fudn_2ojtA3h6l3iNTzZIVtBli4t.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FsIg5uxiTPwa3gzJFuY0JAoQFWU2.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/Fu3DWkwPEA3rKa1CaxFvVYIWYKhA.png" alt=""><br>AR部分也就是Google的Tango项目，从2015的DK到去年发布首款AR手机，Tango发展顺利，今年华硕将在夏天开卖第二代Tango手机ZenFone AR。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FthzcYXG3mMPXkpqZTu2TLmH7nhj.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FpABLGpOuypbj8iojWMtc0jcNJkj.png" alt=""><br>技术方面，Tango与Google地图团体合作开发推出VPS（Visual Positioning Service，可视定位服务），提供准确的室内定位能力，可通过摄像头对室内的物体进行识别。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvOhjNNcGzNYUjyKLm26aE7VOAmY.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FvGysvuo23UeVzpiwVJ-j7__Uqmz.png" alt=""><br>Tango还加入到Google的学校和教育项目Google Expeditions中，为学生展示AR技术。</p>
<h2 id="Google-Home智能音箱"><a href="#Google-Home智能音箱" class="headerlink" title="Google Home智能音箱"></a>Google Home智能音箱</h2><p>Google的智能家庭助手Google Home也迎来四个功能升级，包括主动通知和免提电话在内，并将在更多国家提供服务。<br>在今天凌晨的I/O 2017大会上，Google的智能家庭助手Google Home也迎来功能升级，包括主动式通知助手、免提电话、更多流媒体服务支持和可视化反馈，Google Home还将在更多国家提供服务。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fpm-i1TFp-cH_W5I35MHHSMeeTqG.png" alt=""><br>Google Home将扩展在英国、加拿大、澳洲、法国、德国和日本六个国家，这次新加入了Proactive Assistance主动式助手，会自动通过底部的指示灯，提醒用户将下来的行程、事件、重要约会等。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fn3pp3lRJ89anJzeFA8YeD27HJVH.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FhwVO3ptpf7N7aSBh5wXHGeqOBPh.png" alt=""><br>Google Home另一个新功能为Hands-Free Calling免提拨打功能，无需设置可免费拨打电话，支持现有的电话号码。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fp3BD13nUGF7xxOKrNDo2LKA3gb_.png" alt=""><br>Google Home支持更多音乐流媒体服务商，并加入蓝牙连接播放手机上音乐支持，视频流媒体也加入更多电视内容。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Flvv6lDwSrSHlHzzW928VDS5FpmQ.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FmEUgXQiZ-FlOemvcdcYv8u6D4EB.png" alt=""><br>可视化反馈让Google Home可以通过Chromecast连接用户家中的电视，作为屏幕显示Google Assistant搜索返回的内容。</p>
<h2 id="Google公布可180万亿次浮点运算的Cloud-TPU，自动帮你画猫猫"><a href="#Google公布可180万亿次浮点运算的Cloud-TPU，自动帮你画猫猫" class="headerlink" title="Google公布可180万亿次浮点运算的Cloud TPU，自动帮你画猫猫"></a>Google公布可180万亿次浮点运算的Cloud TPU，自动帮你画猫猫</h2><p>Google在这次I/O 2017大会上公布了最新一代Cloud TPU，可提供每秒能进行180万亿次浮点运算，另外Google还利用AI资源建立Google.ai，用于多方面的AI运算。<br>Google CEO Sundar Pichai在这次I/O 2017大会上宣布Goolge要建立Ai First数据中心，用到最新一代Cloud TPU打造，为机器学习提供足够的运算能力，Google还结合现有AI资源推出Google.ai，用在科研项目和自动帮你画猫猫上…<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhM891BVbZ1o4bAxpbzWaOyhsuZ2.png" alt=""><br>在去年Google便公布了他们的TPU（Tensor Processing Unit，张量处理器），相比以往的CPU和GPU快15-30倍、效能高30-80倍，用于Google所有产品背后的计算，包括在AlphaGO上，但机器学习太复杂，经过锻炼和推断两个阶段，这需要超高的亿万级运算能力，所以Google为此推出了Cloud TPU。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtQedQPsnO8spSa-w34Vgf4uz5bb.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FiCxP-toy7zxeVdjCgfY_Wzv84VP.png" alt=""><br>Google的Cloud TPU在一块运算板上包括了四个处理单元，每秒能进行180万亿次浮点运算，64块板可组成一套超级计算机，Google称为TPU Pods，每个Pods能提供11.5千万亿次浮点运算（PetaFLOPS）。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FmfLkw9eR0goGd01SCQYn6MZwYXa.png" alt=""><br>Could TPU除了AI云计算外，还将在今天开始加入到Google Computing Engine，提供给他们客户使用。<br>Google通过结合自身的AI优势建立了Google.ai，包括AtuoML用在AI的Learing to learn上，还有科研和医疗的活体组织检测模型建立预测、DNA序列研究上。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fp6PVWB-_2g_9C92qqUffqjVUSvX.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FizNCl75j_A__tHR0e6nwmVoD_-4.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FvdasEO7hkqxpSsdYE7NwvVPYHkW.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FlLCUtonrbqJ2iTfRtktHE-RkCar.png" alt=""><br>另外除了那些复杂庞大的项目，Google.ai还能做简单有趣的事情，可以帮你自动纠正画猫猫。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=2054828&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;美国时间5月17日-19日，Google I/O 2017大会将于美国加利福尼亚州山景城的海岸线圆形剧场召开，下面一起看看此次I/O大会将会有哪些值得期待的看点&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="I/O大会" scheme="http://dinson.win/tags/I-O%E5%A4%A7%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>适配器模式在Android开发中的应用</title>
    <link href="http://dinson.win/2017/05/14/17-05-14/"/>
    <id>http://dinson.win/2017/05/14/17-05-14/</id>
    <published>2017-05-14T02:57:58.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>适配器：Adapter，大家看到这个单词是不是非常眼熟了？没错，这就是我们平时用到 ListView 和 RecyclerView 时必定会配合使用的 Adapter。列表显示数据几乎是任何一个安卓项目都会用到的一个功能，谷歌使用适配器模式来封装等使之异常灵活且非常实用，我们想要了解谷歌为什么这样做，就要先理解Java适配器模式是怎样运作的，这篇文章我们就学习一下java设计模式之一的适配器模式以及它在安卓中的应用。</p>
</blockquote>
<a id="more"></a>
<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><p>使用场景：适配器模式把一个类的接口变换成客户端所期待的另一种接口，从而使原本因接口不匹配而无法在一起工作的两个类能够在一起工作。</p>
<p>引用网上的一个例子：笔记本电脑电源一般用的都是5V电压，但是我们的家用电是220V，我们要让笔记本充上电，最好的办法应该是通过一个工具把220V的电压转换成5V，这个工具就是适配器</p>
<blockquote>
<p>好好理解一下设计模式的使用场景比起去记住代码是怎样写的效果要好很多，说不定你哪天编码的时候灵光一现用上了，那就是你真正掌握了。</p>
</blockquote>
<h2 id="适配器模式的种类"><a href="#适配器模式的种类" class="headerlink" title="适配器模式的种类"></a>适配器模式的种类</h2><ol>
<li>类适配器<br> UML图(强烈建议大家去了解一下UML图，它很简单粗暴的把类与类之间的关系描述的很清楚易懂)<br> <img src="http://ondlsj2sn.bkt.clouddn.com/Fs4FzeduZqZwKp_valNHL2xixG_a.png" alt=""><br> 我们可以看到，目标接口 Target 就相当于是上面的5V电压，Adaptee 就是被适配的220V电压，Adapter 就是适配器。看代码：<br> <img src="http://ondlsj2sn.bkt.clouddn.com/FrnD7GHFRzAkfWsCBsW6S9RyJdCa.png" alt=""><br>输出结果：<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">充<span class="number">5</span>V电啦</div><div class="line">充<span class="number">220</span>V电啦</div></pre></td></tr></table></figure>
</li>
</ol>
<p>结合上面给点UML图稍微分析一下：</p>
<p>Adapter类 继承了 Adaptee220V类 然后实现了接口 Target5V 并实现了目标方法 chong5V()，类适配器的一个特点就是 Adapter 会去继承被适配类，这样适配器就直接拥有了被适配类中的方法，所以类适配器的缺点就是不够灵活，让我们看一下另外一种适配器。</p>
<p>2.对象适配器<br>    <img src="http://ondlsj2sn.bkt.clouddn.com/FqlJTeYjCEyqfW1TkXVFWhfXNlBj.png" alt=""><br>    这里的 Target 依然是 5V电压，Adaptee 依然是 220V电压，比起类适配器，Adapter 和 Adaptee 的关系从继承变成了组合，上代码：<br>    <img src="http://ondlsj2sn.bkt.clouddn.com/Fp19DHfUfVXxpmoVLljE8cbVk_y7.png" alt=""><br>输出结果：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">充<span class="number">5</span>V电啦</div><div class="line">充<span class="number">220</span>V电啦</div></pre></td></tr></table></figure></p>
<p>这里我们把 Adaptee220V 通过 Adapter 的构造方法传入到 Adapter 中，当调用 Adapter 的 chong220V()方法 时，实际是调用传进来 Adaptee220V 对象的 chong220V 方法，这样就会变得很灵活。</p>
<h2 id="项目中的运用"><a href="#项目中的运用" class="headerlink" title="项目中的运用"></a>项目中的运用</h2><p>之所以写这篇关于适配器设计模式的文章，是因为作者在以前有一次实际开发中，在没有学习过适配器模式的前提下，为了解决项目中的一个开发痛点，自己费劲脑筋想出来的一种模式，到现在才知道原来这个叫适配器模式，在学习了这个设计模式之后更加深入了解了一下。接下来，就来演示一下作者在实际工作中使用到的变异形态的对象适配器模式。</p>
<p>当时开发场景：当时作者开发一个基于POS机的APP，APP要求有打印功能，像订单打印、日期打印等等。我们知道POS机是有多种型号的，每种型号的POS机会有他们单独的SDK，也就是说打印方法是不同的！<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvDRdNm9GjhtZcVJU3zGmFJjlRsS.png" alt=""><br>首先，我们每次调用打印的时候都会先判断 POS机 型号，因为型号不对程序肯定会报错，假如某一天，APP适配的 POS机 类型要增加一款，也就是说我每个判断 POS机 型号的地方都要多家一个if语句，并且还要把 新POS机型 的打印方法加上去，如果我有5个地方用到了打印，就要加5次，这样是很痛苦的，别问我为什么知道。。。经过2次这样的真实情况发生后，我暴走了，痛定思痛要想个办法结局，于是有了以下代码：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FivN4O4hC_9t73vDyjI-waTLQrd0.png" alt=""><br>每种 POS机 都实现 IPrint 中的打印方法：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fpn2N2ZOurpL1MYk_KQGbUy99_Xn.png" alt=""><br>这里我把 POS机 型号判断的代码放到了 PrintManager 的构造方法中，每次 new 出实例时就会去判断。然后我让 PrintManager 也实现了IPrint接口，因为我认为项目中的打印管理类必须要拥有这三种打印方法。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FthJ065I8Q4WZIDg4qvY6O3y3i-6.png" alt=""><br>发现没，改过之后的代码，在不同的调用的地方再也不用担心新增POS机型需要改代码了，只需要在 PrintManager 的构造方法中增加一个判断就好了。要是改成单例：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Ft17x0u3weV_Vr1eGsOH5E_OWCG5.png" alt=""><br>改完之后我哭了。。。我他吗的是个天才啊。。。后面果然加了多款POS机，但是我再也不痛苦了！看一下我的UML图：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FouB2lpViMCX2QC5qam7YltZBmoZ.png" alt=""><br>其实，光看UML图，作者在项目中的这种写法已经不算是适配器模式了，因为 Adaptee 已经直接实现了Target中的方法，也就是说根本就不存在不满足目标接口这个说法了。。不过作者这样写完全是自己想出来的，没有基于任何设计模式，就现在目前的效果来说还是不错的，通过这篇文章，我对于适配器模式有了一个清晰的理解，同时也反思了一下我这种写法，还是很有收获的。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=19107967&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;适配器：Adapter，大家看到这个单词是不是非常眼熟了？没错，这就是我们平时用到 ListView 和 RecyclerView 时必定会配合使用的 Adapter。列表显示数据几乎是任何一个安卓项目都会用到的一个功能，谷歌使用适配器模式来封装等使之异常灵活且非常实用，我们想要了解谷歌为什么这样做，就要先理解Java适配器模式是怎样运作的，这篇文章我们就学习一下java设计模式之一的适配器模式以及它在安卓中的应用。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="设计模式" scheme="http://dinson.win/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Android录屏与截图功能(5.0以上有效)</title>
    <link href="http://dinson.win/2017/05/13/17-05-12/"/>
    <id>http://dinson.win/2017/05/13/17-05-12/</id>
    <published>2017-05-13T06:20:59.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>这篇文章，会带你学习如何使用 MediaProjection，MediaCodec 以及 MediaMuxer 来实现简单的截屏和录屏功能。</p>
<p>因为 MediaProjection 是 5.0以上 才出现的，所以今天所讲述功能实现，只在 5.0以上 的系统有效。</p>
</blockquote>
<a id="more"></a>
<h2 id="截屏"><a href="#截屏" class="headerlink" title="截屏"></a>截屏</h2><h3 id="步骤如下"><a href="#步骤如下" class="headerlink" title="步骤如下"></a>步骤如下</h3><p>1：获取 MediaProjectionManager</p>
<p>2：通过 MediaProjectionManager.createScreenCaptureIntent() 获取 Intent</p>
<p>3：通过 startActivityForResult 传入 Intent 然后在 onActivityResult 中通过 MediaProjectionManager.getMediaProjection(resultCode,data) 获取 MediaProjection</p>
<p>4：创建 ImageReader,构建 VirtualDisplay</p>
<p>5 : 最后就是通过 ImageReader 截图，就可以从 ImageReader 里获得 Image 对象。</p>
<p>6 : 将 Image 对象转换成 bitmap</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>步骤已经给出了，我们就按照步骤来实现代码吧。</p>
<p>首先 MediaProjectionManager 是系统服务，我们通过<br><code>getSystemService(MEDIA_PROJECTION_SERVICE)</code>获取它</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">projectionManager = (<span class="name">MediaProjectionManager</span>)getSystemService(<span class="name">MEDIA_PROJECTION_SERVICE</span>)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>然后调用 startActivityForResult 传入 projectionManager.createScreenCaptureIntent() 创建的 Intent</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">startActivityForResult(<span class="name">projectionManager</span>.createScreenCaptureIntent(), SCREEN_SHOT)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>紧接着我们就可以在 onActivityResult(int requestCode, int resultCode, Intent data) 中通过 resultCode 和 data 来获取 MediaProjection：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvvwP2iend8mydeWF0tijrsyMnbx.png" alt=""><br>然后就是创建 ImageReader 和 VirtualDisplay：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtclwbgSmfNuAKRzLV7ItmxQ2TUB.png" alt=""><br><strong>这里我们依次讲解一下：</strong><br>首先是 ImageReader.newInstance 方法：<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> ImageReader newInstance(<span class="keyword">int</span> <span class="built_in">width</span>, <span class="keyword">int</span> <span class="built_in">height</span>, <span class="keyword">int</span> format, <span class="keyword">int</span> maxImages)</div></pre></td></tr></table></figure></p>
<p>方法里接收四个参数。前两个 width,height 是用来指定生成图像的宽和高。<br><strong>第三个参数</strong> format 是图像的格式，这个格式必须是 ImageFormat或 PixelFormat 中的一个，这两个 Format 里有很多格式，大家可以点进去看看，我们例子中使用的是 PixelFormat.RGBA_8888 格式(需要注意的是并不是所有的格式都被 ImageReader 支持，比如说 ImageFormat.NV21)。</p>
<p><strong>第四个参数</strong> maxImages，这个参数指的是你想同时在 ImageReader 里获取到的 Image对象 的个数，这个参数我不是很懂，我不理解同时的意思。我的理解是 ImageReader 是一个类似数组的东西，然后我们可以通过 acquireLatestImage() 或 acquireNextImage() 方法来得到里面的 Image对象(可能有误，仅供参考)。这个值应该设置的越小越好，但是得大于0，所以我们上面设置的是1。</p>
<p>然后我们看看 mediaProjection.createVirtualDisplay 方法：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtUczK9qlxRq-TQdEndwzXTgfn6F.png" alt=""><br>首先这个方法返回的是 VirtualDisplay。<br>前四个不用说了，分别是 VirtualDisplay 的名字，宽，高和dpi。</p>
<p><strong>第五个参数</strong>，大家可以访问</p>
<blockquote>
<p><a href="https://developer.android.google.cn/reference/android/hardware/display/DisplayManager.html" target="_blank" rel="external">https://developer.android.google.cn/reference/android/hardware/display/DisplayManager.html</a></p>
</blockquote>
<p>查看 DisplayManager 的所有flags，我没有具体的研究过，在本次要实现的例子里，除了 VIRTUAL_DISPLAY_FLAG_SECURE 这个会报错，其他的 flags 效果都一样。</p>
<p><strong>第六个参数</strong> 是一个 Surface。我这里表达一下我的理解，当 VirtualDisplay 被创建出来时，也就是 createVirtualDisplay 调用后，你在真实屏幕上的每一帧都会输入到 Surface参数 里。也就是说，如果你放个 SurfaceView，然后传入 SurfaceView 的 Surface 那么你在屏幕上的操作都会显示在 SurfaceView 里(这里我们后面录屏会讲)。我们这里传入的是 ImageReader 的 Surface。这其中的逻辑我的理解是这样的，真实屏幕的每一帧都都会传给 ImageReader，根据 ImageReader 的 maxImages参数，比如说 maxImages 是 2，那么 ImageReader 始终保持两帧图片，但这两帧图片是一直随着真实屏幕的操作而更新的(不知道大家有没有听懂)。</p>
<p><strong>第七个参数</strong> 是一个回调函数，在 VirtualDisplay 状态改变时调用。因为我们这里没有，所以传 null。</p>
<p><strong>第八个参数</strong> 这里我给出原文：“The Handler on which the callback should be invoked, or null if the callback should be invoked on the calling thread’s main Looper.” 因为我翻译不好。不过和普通的 Handler 使用场景类似。</p>
<p>现在我们 ImageReader 和 VirtualDisplay，接下来我们就可以通过 ImageReader 的 acquireLatestImage() 或 acquireNextImage() 来得到 Image对象 了。</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SystemClock.<span class="built_in">sleep</span>(<span class="number">1000</span>);</div><div class="line"><span class="built_in">Image</span> <span class="built_in">image</span> = imageReader.acquireNextImage();</div></pre></td></tr></table></figure>
<p>这里有个坑，就是你在获取 Image 的时候，得先暂停1秒左右，不然就会获取失败(原因未知)。</p>
<p>现在我们有了 Image对象，但是 Image对象 并不能直接作为UI资源被使用，我们可以将它转换成 Bitmap对象。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FkMjyveYJT5Rk3XXBS6V8-3xAb31.png" alt=""></p>
<p>这里最主要的逻辑就是像素与字节的转换，我们需要将 Image对象 的字节流写进 Bitmap 里，但是 Bitmap 接收的是像素格式的。</p>
<p>我们一行一行来看：</p>
<p>首先获取 image对象 的宽和高，注意 width 和 height 是像素格式的。</p>
<p>然后获取 ByteBuffer，里面存放的就是图片的字节流，是字节格式的。我是这么理解的，ByteBuffer 里面是一长串的字节序列，按照某种格式分成行列就变成了图片。</p>
<p>然后获取 PixelStride，这指的是两个像素的距离(就是一个像素头部到相邻像素的头部)，这是字节格式的。</p>
<p>RowStride 是一行占用的距离(就是一行像素头部到相邻行像素的头部)，这个大小和 width 有关，这里需要注意，因为内存对齐的原因，所以每行会有一些空余。这个值也是字节格式的。</p>
<p>紧接着我们需要创建一个 Bitmap 用来接受 Image 的 buffer 的输入，buffer 是字节流，它会按照我们设置的 format 转换成像素，所以这里最重要的一个地方就是 Bitmap 创建的大小，因为高度就是行数所以就是 height，但是宽度因为上面说的内存对齐问题会有些空余，所以我们要先求出空余部分，然后加上 width。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> rowPadding = rowStride - pixelStride * <span class="built_in">width</span>;</div></pre></td></tr></table></figure>
<p>这句话用整行的距离减去了一行里像素及空隙占用的距离，剩下的就是空余部分。但是这个是字节格式的。我们将它除以 pixelStride，也就是一个像素及空隙占用的字节大小，就转换成了像素格式。然后：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">width</span> + rowPadding / pixelStride</div></pre></td></tr></table></figure>
<p>这个就是一行里像素的占用了，我们将它传给Bitmap：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FjyAwd7uOuIyoNuuaec1qCa3nymr.png" alt=""></p>
<p>创建出合适大小的 Bitmap，然后把 Image 的 buffer 传给它，就成功的将 Image对象 转换成了 Bitmap。这里我可能讲的不清楚，我给大家画了张图：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnWlneYKo0wXmd93bqaRDI4M34d4.png" alt=""></p>
<p>上面的一小格一小格是一块块像素。</p>
<p>好了，现在我们已经获取到了 bitmap 了，我们可以把它放到 ImageView 里显示一下，我写了一个例子，效果如下：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtWvLYP7rKhdUAWUPx34llXrOGK3.png" alt=""></p>
<p>点击按钮，弹出一个对话框请求截屏，点击立即开始的话，截屏就会显示在下面的 ImageView 里。</p>
<h2 id="录屏"><a href="#录屏" class="headerlink" title="录屏"></a>录屏</h2><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><p>录屏的前三步和截屏是一样的，出现分歧点的地方在于 VirtualDisplay 创建时传入的 Surface，还记得我们上面说的吗，说在创建 VirtualDisplay 的时候，传入一个 SurfaceView 的 Surface 的话，那么你在真实屏幕上的操作，都会重现在 SurfaceView 上。我们来试一下：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnytHOMHEcK-U27XqYMkI8d69TrV.png" alt=""></p>
<p>我们在Surface参数中传入一个 SurfaceView 的 Surface，效果如下：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FrUySmrKvQ8DIsbBwUNS2O_VRUMk.png" alt=""></p>
<p>可以看到我们放了一个 Button，放了一个 ImageView，放了一个 SurfaceView。点击 Button，然后点立即开始之后，真实屏幕就映射到了 SurfaceView 里。</p>
<p>所以当创建 VirtualDisplay 时，真实屏幕就映射到了 Surface，也就是我们可以再 Surface 里拿到屏幕的一个输入。那我们要录屏的话，就只要把 Surface 转换成我们需要的格式就行了。</p>
<p>在本篇文章的例子中，我们会将 Surface对象 转换成 mp4格式。这就需要用到MediaCodec类 和 MediaMuxer类。MediaCodec 生成一个 Surface 用来接收屏幕的输出并按照格式编码，然后传给 MediaMuxer 用来封装成 mp4格式 的视频。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Frwb1-cIhukMvnpralVVIChnGnxj.png" alt=""><br>上面讲了 MediaCodec 的创建，我们也可以从中看到屏幕数据是怎么进入 MediaCodec 的。具体的我已经注释了。</p>
<p>接下来我们创建一个 MediaMuxer对象：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FghD5GELyVoh3Q10yfrrEyxvGmIJ.png" alt=""><br>然后创建 VirtualDisplay，把 MediaCodec的surface 传进去：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FlSvfgcwQfAnOYlwK965rqsxvQw1.png" alt=""><br>最后就是视频的编码与转换MP4还有保存了：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FkgEsiyPE32QpetqNVJ-1RJsZZy2.png" alt=""><br>好了，录屏到此结束了。我们来看下实例演示：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FuksI4ntCx3D9s-GcPmdh6vpQHu9.png" alt=""></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=17194024&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;这篇文章，会带你学习如何使用 MediaProjection，MediaCodec 以及 MediaMuxer 来实现简单的截屏和录屏功能。&lt;/p&gt;
&lt;p&gt;因为 MediaProjection 是 5.0以上 才出现的，所以今天所讲述功能实现，只在 5.0以上 的系统有效。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="录屏" scheme="http://dinson.win/tags/%E5%BD%95%E5%B1%8F/"/>
    
      <category term="截图" scheme="http://dinson.win/tags/%E6%88%AA%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Android ConstraintLayout 使用指南</title>
    <link href="http://dinson.win/2017/05/11/17-05-11/"/>
    <id>http://dinson.win/2017/05/11/17-05-11/</id>
    <published>2017-05-11T09:19:18.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>升级Android Studio 2.3之后，IDE默认生成的Activity布局都是以ConstraintLayout做为根布局，体验了一把这个Google去年就开始力推的ConstraintLayout后，觉得非常不错，本文用于记录ConstraintLayout各个方面的使用知识。</p>
</blockquote>
<a id="more"></a>
<h2 id="平台支持"><a href="#平台支持" class="headerlink" title="平台支持"></a>平台支持</h2><ul>
<li>ConstraintLayout最低兼容Android 2.3；</li>
<li>目前Android Studio 2.3默认使用ConstraintLayout作为布局文件的根布局；</li>
<li>想要使用ConstraintLayout，需在项目的build.gradle添加com.android.support.constraint:constraint-layout：XXX版本号依赖；</li>
</ul>
<h2 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h2><p>ConstraintLayout翻译成中文也称为约束布局，在整个使用体验过程中真的是贯穿约束二字，这一节先来介绍一些基础使用，后面你就会慢慢感受到约束布局的魅力。创建完工程后打开布局文件，底部切换Design的Tab上，可以看到整个操作界面<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fh88OzTWuj-tCkdgHRA4cfXqVNiZ.png" alt=""> </p>
<p>左上角的面板是放置了系统内置各种各样的控件，想要布局直接拖到到布局文件中即可（所见即所得），右边的面板是选中布局文件中的控件时期各种各样的空间属性，ConstraintLayout最大的好处在于让我们通过拖控件的形式进行布局，并且不用担心适配问题。所以，先来拖个控件试试看，将一个Button拖动到屏幕正中央，然后运行显示看看效果。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fk9RCseEVhX1YMe1HgpvyfRgXSgK.gif" alt=""></p>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/Fh5ZFnU_lprrxHcRDq6bRkSfn_dH.png" alt=""><br>而实际运行后却发现，这个Button还是位于屏幕左上角，说好的居中效果呢？<br>这里就要开始引入ConstraintLayout的约束概念，我们切换回去看xml的布局代码，发现了两个问题。<br>第一，布局预览时能够看到显示居中的Button，是因为控件属性设置中引用了两个tools命名空间下的属性。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhfHzegfsnDjDfUcSq1myX6wS65z.png" alt=""><br>我们都知道，这两个属性只在布局编辑器的预览中有效，实际运行效果是不生效的。</p>
<p>第二，Button标签下有红色波浪线警告，我们把鼠标移到对应位置会发现警告内容，告诉我们Button没有任何约束设置，当前效果只支持预览，实际运行后会返回到左上角去，同时提示我们应该给控件添加约束。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvQG1W61UkNfFJgK2koGJ_YsIbHf.png" alt=""><br>如何增加约束？回到Design页面，对着控件上下左右四个原点拖动添加对应的约束即可<br><img src="http://ondlsj2sn.bkt.clouddn.com/FuIMSr43yM-CT5v1UrwDfaY1aZld.gif" alt=""><br>成功添加约束后，即可得到正常的运行效果了。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FmuneIrlzFFdwgBcyb-e0BIsMnbw.png" alt=""><br>实际操作不一定要在Tab，也可以直接在Text页面拖动控件添加约束<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqukVcGA7UTeISA3PFnP1tz2cQku.png" alt=""><br>成功实现添加约束后，可以看到Button多了下面几个属性设置<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fl1j15gsnVPfVL1sZONRs5ERxYXC.png" alt=""></p>
<p><code>app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</code> 意思是Button底部的布局约束是位于parent的底部，parent是指包裹着它的ConstraintLayout，也可以设置指定某个控件的id，其他类似的属性就不再赘述，以上四个约束联合起来便实现了Button的居中，ConstraintLayout总共有下面这些同类的属性<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">app:</span>layout_constraintLeft_toLeftOf</div><div class="line"><span class="symbol">app:</span>layout_constraintLeft_toRightOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintRight_toLeftOf</div><div class="line"><span class="symbol">app:</span>layout_constraintRight_toRightOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintTop_toTopOf</div><div class="line"><span class="symbol">app:</span>layout_constraintTop_toBottomOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintBottom_toTopOf</div><div class="line"><span class="symbol">app:</span>layout_constraintBottom_toBottomOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintStart_toEndOf</div><div class="line"><span class="symbol">app:</span>layout_constraintStart_toStartOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintEnd_toStartOf</div><div class="line"><span class="symbol">app:</span>layout_constraintEnd_toEndOf</div><div class="line"></div><div class="line"><span class="symbol">app:</span>layout_constraintBaseline_toBaselineOf</div></pre></td></tr></table></figure></p>
<p>你会发现ConstraintLayout非常灵活的把RelativeLayout的活给干了，关于left、right、top、bottom、start、end、baseline的基准可以参照下图<br><img src="http://ondlsj2sn.bkt.clouddn.com/FsKl7bMhdTD8qXyQDnFAi-4Kxfjo.png" alt=""><br>如果我想加多一个Button2并且将其放置到原先居中Button的右方并且与其底部对齐，只需如下操作即可<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqliwdR_M5jojMB502KyRRSJIzjp.gif" alt=""><br>并且你也可以发现，Button2依赖与Button后会随着Button的移动而跟着发生相对移动，目的是了保证我设置的依赖，时刻保持Button2就在Button的右边，并且底部对齐。你也可以看到布局文件中也为Button2添加了如下两个属性<br><img src="http://ondlsj2sn.bkt.clouddn.com/FudjacpmywOSX8_e4celVfQh76Sw.png" alt=""><br>如果你已经理解上面提到的属性含义，这里应该不会有疑惑。</p>
<p>介绍完上下左右的依赖设置后，下面介绍一些Margin属性，除了Android常见的各种android:layout_marginXXX外，ConstraintLayout自行添加了如下属性<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">app:</span>layout_goneMarginBottom</div><div class="line"><span class="symbol">app:</span>layout_goneMarginEnd</div><div class="line"><span class="symbol">app:</span>layout_goneMarginLeft</div><div class="line"><span class="symbol">app:</span>layout_goneMarginRight</div><div class="line"><span class="symbol">app:</span>layout_goneMarginStart</div><div class="line"><span class="symbol">app:</span>layout_goneMarginTop</div></pre></td></tr></table></figure></p>
<p>这些设置生效于当依赖的约束对象被设置visibility为gone时。<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">app:</span>layout_constraintVertical_bias</div><div class="line"><span class="symbol">app:</span>layout_constraintHorizontal_bias</div></pre></td></tr></table></figure></p>
<p>当为目标控件设置好横纵向的约束时（app:layout_constraintLeft_toLeftOf=”parent”、app:layout_constraintRight_toRightOf=”parent”或者app:layout_constraintTop_toTopOf=”parent”、app:layout_constraintBottom_toBottomOf=”parent”），这个两个属性才会生效。实际操作过程中，你会发现对着设置好横纵向约束的Button进行拖动，布局中的layout_constraintHorizontal_bias和layout_constraintVertical_bias会一直发生相应的变化，如果你需要Button居中，那么直接将这两个属性的参数值设置为0.5即可。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fj8JMcH1IR1cbDpfn7TnzupsmW2Y.gif" alt=""></p>
<h2 id="进阶使用"><a href="#进阶使用" class="headerlink" title="进阶使用"></a>进阶使用</h2><blockquote>
<p>这里先补充一个关于ConstraintLayout的知识点，与其他Layout不同之处在于，它的layout_width和layout_height不支持设置match_parent，其属性取值只有以下三种情况：</p>
<ul>
<li>wrap_content；</li>
<li>指定具体dp值；</li>
<li>0dp（match_constraint），代表填充约束之意，注意不要以为和match_parent是一样的；</li>
</ul>
</blockquote>
<p>想想如果没有ConstraintLayout，我们要让一个控件的宽高按某个比例进行布局应该怎么做？有了ConstraintLayout后，我们可以使用layout_constraintDimentionRatio属性设置宽高比例，前提是目标控件的layout_width和layout_height至少有一个设置为0dp，如下让一个ImageView宽高按照2:1的比例显示</p>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/Fsf4Y9m69YwE5HujvsEGNIr-HBNH.png" alt=""><br>layout_constraintDimentionRatio默认参数比例是指宽：高，变成高:宽可以设app:layout_constraintDimensionRatio=”H,2:1”。</p>
<p>ConstraintLayout的链条（Chains）特性非常强大，在没有ConstraintLayout之前，线性布局我们主要都依靠LinearLayout来完成，有了ConstraintLayout之后，它把LinearLayout的活也干了，例如要把按钮水平排成一行，可以这样操作<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqYICFlgWhQmP9vk-xHU8hPF0i33.gif" alt=""><br>这样ButtonA、B、C就在水平方向形成了一条Chain，并且底部对齐。回去看xml文件，会见到ButtonA新增app:layout_constraintHorizontal_chainStyle的属性设置，这个属性在一条Chain中只会出现在第一个控件中，这个控件是整条Chain的Head。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtGPVrfIVjFmGFRNWHqzxnoLXTbl.png" alt=""><br>除了水平方向的layout_constraintHorizontal_chainStyle外还有垂直方向的layout_constraintVertical_chainStyle，两者均有spread,spread_inside,packed这三种取值，如果将控件的layout_width和layout_height设置成为0dp，还可以配合layout_constraintHorizontal_weight、layout_constraintVertical_weight两个属性实现和LinearLayout中设置layout_weight相同的效果，具体的操作这里就不再展示了，下面一张图告诉你Chain的强大之处。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnHoSNDHIKaTMcmeAQLkqovC0ZDs.png" alt=""><br>关于Chain的就介绍到此，进阶的最后一部分再介绍一下Guideline功能，如果我们需要对着屏幕的中轴线进行布局，就可以使用到Guideline进行操作，例如下面两个Button分别分布在中轴线的左右两侧<br><img src="http://ondlsj2sn.bkt.clouddn.com/FpwkfWafTRKbMMwnblVjXogv9uiW.gif" alt=""><br>从操作上我们可以看到Guideline也分为垂直和水平两种，并且支持设置在屏幕中所处的位置，可以使用layout_constraintGuide_begin和layout_constraintGuide_end设置具体dp值，也可以使用layout_constraintGuide_percent来设置比例。实际上它也只是一个辅助我们布局的View而已，其源码内部实现也非常简单，并且默认设置了visibility为gone，关于ConstraintLayout的进阶使用便介绍到这里。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ConstraintLayout的使用优势</p>
<ul>
<li>高效布局，Android这么多年以来真正意义上的实现了所见即所得的拖曳方式布局，极大的提高开发效率；</li>
<li>轻松灵活的实现复杂的布局；</li>
<li>解决多重布局嵌套问题，通过前面介绍你会发现ConstraintLayout真的是非常灵活，可以很大程度的避免Layout之间的嵌套；</li>
<li>满足屏幕适配的需求，想想没有ConstraintLayout之前的拖曳式布局，你就知道有多恶心；</li>
</ul>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=33410478&auto=1&height=66"></iframe>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;升级Android Studio 2.3之后，IDE默认生成的Activity布局都是以ConstraintLayout做为根布局，体验了一把这个Google去年就开始力推的ConstraintLayout后，觉得非常不错，本文用于记录ConstraintLayout各个方面的使用知识。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="ConstraintLayout" scheme="http://dinson.win/tags/ConstraintLayout/"/>
    
  </entry>
  
  <entry>
    <title>Android全屏／沉浸式状态栏下，各种键盘挡住输入框解决办法</title>
    <link href="http://dinson.win/2017/05/10/17-05-10/"/>
    <id>http://dinson.win/2017/05/10/17-05-10/</id>
    <published>2017-05-10T01:24:17.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>在开发中，经常会遇到键盘挡住输入框的情况，比如登录界面或注册界面，弹出的软键盘把登录或注册按钮挡住了，用户必须把软键盘收起，才能点击相应按钮，这样的用户体验非常不好。像微信则直接把登录按钮做在输入框的上面，但有很多情况下，这经常满足不了需求。同时如果输入框特别多的情况下，点击输入时，当前输入框没被挡住，但是当前输入框下面的输入框却无法获取焦点，必须先把键盘收起，再去获取下面输入框焦点，这样用户体验也非常不好，那有什么办法呢？ </p>
</blockquote>
<a id="more"></a>
<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><blockquote>
<p>非透明状态栏下使用adjustResize和adjustPan，或是透明状态栏下使用fitsSystemWindows=true属性</p>
</blockquote>
<p>主要实现方法：<br>在AndroidManifest.xml对应的Activity里添加<br>Android:windowSoftInputMode=”adjustPan”或是android:windowSoftInputMode=”adjustResize”属性 </p>
<p>这两种属性的区别，官方的解释是： </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>adjustResize</td>
<td>该活动的主窗口始终调整大小，以使屏幕上的软键盘的余地。</td>
</tr>
<tr>
<td>adjustPan</td>
<td>该活动的主窗口无法调整大小，使软键盘的余地。相反，窗口的内容是自动平移以便当前焦点从来没有遮挡键盘，用户始终可以看到他们正在键入。这是比调整大小，一般是较不可取，因为用户可能需要关闭软键盘在获取和与模糊部分窗口的互动。</td>
</tr>
</tbody>
</table>
<p>这两个属性作用都是为了调整界面使键盘不挡住输入框 ，我这里对这两种属性使用场景、优缺点、注意事项进行了全方面总结，不知大家平时使用时是否注意到了。</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>注意事项</strong></th>
<th><strong>优缺点</strong></th>
<th><strong>失效情况</strong></th>
<th><strong>适用情况</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>adjustResize</td>
<td>需要界面本身可调整尺寸，如在布局添加ScrollView，或输入控件属于RecycleView/ListView某一项</td>
<td>优点：1.不会把标题栏顶出当前布局；<br>2.有多项输入时，当前输入框下面的输入框可上下滑动输入<br>缺点：1.需要界面本身可调整尺寸;<br>2. 全屏时失效</td>
<td>1.Activity主窗口尺寸无法调整；<br>2.Activity全屏<br>3.android5.0以上通过style设置沉浸式状态栏模式而不设置fitSystemWindow为true</td>
<td>非全屏或是非沉浸式状态栏输入界面，输入框比较多</td>
</tr>
<tr>
<td>adjustPan</td>
<td>页面不会重新布局，当前输入框和键盘会直接将当前输入框以上界面整体向上平移，这样即使界面包含标题栏，也会被顶上去</td>
<td>优点： 使用简单，不需要界面本身可调整尺寸，不会有失效情况 <br>缺点： 会把标题栏顶出当前布局；有多项输入时，当前输入框下面的输入框无法输入，必须收起键盘显示输入框再输入</td>
<td>无</td>
<td>有少量输入项，且输入量居界面上方</td>
</tr>
<tr>
<td>fitsSystemWindows</td>
<td>如果多个View设置了fitsSystemWindows=”true”,只有初始的view起作用，都是从第一个设置了fitsSystemWindows的view开始计算padding</td>
<td>优点：使用简单，需要沉浸式状态栏的界面，不需要自己计算padding状态栏的高度<br>缺点：使用有限制</td>
<td>1.View 的其他 padding 值被重新改写了<br>2.手机系统版本&gt;=android 4.4</td>
<td>1.界面全屏<br>2.设置界面主题为沉浸式状态栏</td>
</tr>
</tbody>
</table>
<ul>
<li>adjustResize失效情况：activity设置了全屏属性指Theme.Light.NotittleBar.Fullscreen(键盘弹起时会将标题栏也推上去)或者设置了activity对应的主题中android:windowTranslucentStatus属性，设置方式为：android:windowTranslucentStatus=true，这时如果对应的页面上含有输入框，将会导致点击输入框时软键盘弹出后键盘覆盖输入框，导致输入框看不见。</li>
<li>fitsSystemWindows=”true”,只有初始的view起作用：如果在布局中不是最外层控件设置fitsSystemWindows=”true”, 那么设置的那个控件高度会多出一个状态栏高度。若有多个view设置了，因第一个view已经消耗掉insect，其他view设置了也会被系统忽略。</li>
</ul>
<p>假设原始界面是一个LinearLayout包含若干EditText,如下图所示，在分别使用两种属性时的表现。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FiBssb1owc6o5RWvY8jttNlNpqEw.png" alt=""></p>
<h3 id="adjustPan"><a href="#adjustPan" class="headerlink" title="adjustPan"></a>adjustPan</h3><p>整个界面向上平移，使输入框露出，它不会改变界面的布局；界面整体可用高度还是屏幕高度，这个可以通过下面的截图看出，如点击输入框6,输入框会被推到键盘上方，但输入框1被顶出去了，如果界面包含标题栏，也会被顶出去。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqcA0acjqFTCdq7fhGMQAQLCymuy.png" alt=""></p>
<h3 id="adjustResize"><a href="#adjustResize" class="headerlink" title="adjustResize"></a>adjustResize</h3><p><img src="http://ondlsj2sn.bkt.clouddn.com/FlalEPmcfHwUAaQzlmbOZCOny3Qq.png" alt=""></p>
<p>但使用这两种属性，我们可以总结以下几点：<br>1) 使用adjustPan, 如果需要输入的项比较多时，点击输入框，当前输入项会被顶到软键盘上方，但若当前输入框下面还有输入项时，却需要先收起键盘，再点击相应的输入项才能输入。这样操作太繁琐了，对于用户体验不大好；<br>2) adjustResize的使用，需要界面本身可显示的窗口内容能调整，可结合scrollview使用；</p>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><blockquote>
<p>在界面最外层布局包裹ScrollView</p>
</blockquote>
<h3 id="只使用ScrollView"><a href="#只使用ScrollView" class="headerlink" title="只使用ScrollView"></a>只使用ScrollView</h3><p>在相应界面的xml布局中，最外层添加一个ScrollView，不在AndroidMainfest.xml中设置任何android:windowSoftInputMode属性，此时点击输入框，输入框均不会被软键盘档住。即使当前输入框下方也有输入框，在键盘显示的情况下，也可以通过上下滑动界面来输入，而不用先隐藏键盘，点击下方输入框，再显示键盘输入。 </p>
<p>我们可以根据Android Studio的Inspect Layout工具来查看界面真正占用的布局高度，工具在<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtVH5PO3wZr8dcUo_npuTi46j9Aj.png" alt=""><br>通过该工具，我们看到：<br>界面真正能用的高度=屏幕高度-状态栏高度-软键盘高度<br>界面中蓝框是真正界面所用的高度：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fnd8_JCSsg5tPYqYC7yOjESZXX3U.png" alt=""></p>
<h3 id="ScrollView-adjustPan"><a href="#ScrollView-adjustPan" class="headerlink" title="ScrollView+adjustPan"></a>ScrollView+adjustPan</h3><p>我们再在该类的AndroidMainfest.xml中设置windowSoftInputMode属性为adjustPan<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;activity <span class="string">android:</span>name=<span class="string">".TestInputActivity"</span> <span class="string">android:</span>windowSoftInputMode=<span class="string">"adjustPan"</span>&gt;</div></pre></td></tr></table></figure></p>
<p>发现当前输入框不会被挡住，但是输入框比较多时，在有键盘显示时，界面上下滑动，但只能滑动部分，且如果输入框在界面靠下方时，点击输入框，标题栏也会被顶出去，如下图所示：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvQ_kx2DYkusBw3VGgEvueIr8kEb.png" alt=""></p>
<p>我们借助Inspect Layout工具查看此设置布局可用高度，从下图可以看出，此时布局可用高度是屏幕的高度，上下滑动也只是此屏的高度，在输入框9以下的输入框滑不出来，向上滑动，也只能滑到输入框1。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhsoS1St7ob22uZpH5n2ZCvDp-Q-.png" alt=""></p>
<h3 id="ScrollView-adjustResize"><a href="#ScrollView-adjustResize" class="headerlink" title="ScrollView+adjustResize"></a>ScrollView+adjustResize</h3><p>我们前面说过adjustResize的使用必须界面布局高度是可变的，如最外层套个ScrollView或是界面可收缩的，才起作用。这里在该类的AndroidMainfest.xml中设置windowSoftInputMode属性为adjustResize<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;activity <span class="string">android:</span>name=<span class="string">".TestInputActivity"</span> <span class="string">android:</span>windowSoftInputMode=<span class="string">"adjustResize"</span>&gt;</div></pre></td></tr></table></figure></p>
<p>发现效果和1不设置任何windowSoftInputMode属性类似，其使用高度也是：屏幕高度-状态栏高度-软键盘高度<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fk4K9zDXpOsQlqHUKCqrBP20zEAI.png" alt=""></p>
<p>我们再来看看windowSoftInputMode默认属性值stateUnspecified:</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>stateUnspecified</td>
<td>软键盘的状态(隐藏或可见)没有被指定。系统将选择一个合适的状态或依赖于主题的设置</td>
</tr>
</tbody>
</table>
<p>可以看出，系统将选择合适的状态，也就是在界面最外层包含一层ScrollView时，设置默认属性值stateUnspecified其实就是adjustResize属性。</p>
<p>但以下两方面无法满足需求：<br>1) 当Activity设置成全屏fullscreen模式时或是使用沉浸式状态栏时，界面最外层包裹 ScrollView，当输入框超过一屏，当前输入框下面的输入框并不能上下滑动来输入，情况类似于ScrollView+adjustPan，只能滑动部分，通过Inspect Layout也可以看到，界面可用高度是整个屏幕高度，并不会进行调整高度。即使设置adjustResize，也不起作用。<br>2) 如果是类似于注册界面或是登录界面，键盘会挡住输入框下面的登录按钮。</p>
<h3 id="沉浸式状态栏／透明状态栏情况下"><a href="#沉浸式状态栏／透明状态栏情况下" class="headerlink" title="沉浸式状态栏／透明状态栏情况下"></a>沉浸式状态栏／透明状态栏情况下</h3><p>自android系统4.4(API&gt;=19）就开始支持沉浸式状态栏，当使用觉System windows(系统窗口),显示系统一些属性和操作区域，如 最上方的状态及没有实体按键的最下方的虚拟导航栏。<br>android:fitsSystemWindows=“true”会使得屏幕上的可布局空间位于状态栏下方与导航栏上方</p>
<h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><blockquote>
<p>使用scrollTo方法，当键盘弹起时，让界面整体上移；键盘收起，让界面整体下移<br>使用场景：针对界面全屏或是沉浸式状态栏，输入框不会被键盘遮挡。主要用于一些登录界面，或是需要把界面整体都顶上去的场景。</p>
</blockquote>
<h3 id="主要实现步骤"><a href="#主要实现步骤" class="headerlink" title="主要实现步骤"></a>主要实现步骤</h3><ol>
<li><p>获取Activity布局xml的最外层控件，如xml文件如下：</p>
 <figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:<span class="built_in">id</span>=<span class="string">"@+id/main"</span></div><div class="line">    tools:context=<span class="string">"com.example.liubin1.softkeyboardhelper.MainActivity"</span>&gt;</div><div class="line"></div><div class="line">    &lt;EditText</div><div class="line">        android:<span class="built_in">id</span>=<span class="string">"@+id/name"</span></div><div class="line">        android:hint=<span class="string">"请输入用户名："</span></div><div class="line">        android:layout_centerInParent=<span class="string">"true"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"50dp"</span></div><div class="line">        /&gt;</div><div class="line">    &lt;EditText</div><div class="line">        android:<span class="built_in">id</span>=<span class="string">"@+id/pas"</span></div><div class="line">        android:layout_below=<span class="string">"@id/name"</span></div><div class="line">        android:hint=<span class="string">"请输入密码："</span></div><div class="line">        android:layout_centerInParent=<span class="string">"true"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"50dp"</span></div><div class="line">        /&gt;</div><div class="line">    &lt;Button</div><div class="line">        android:<span class="built_in">id</span>=<span class="string">"@+id/login_btn"</span></div><div class="line">        android:layout_below=<span class="string">"@id/rpas"</span></div><div class="line">        android:layout_centerHorizontal=<span class="string">"true"</span></div><div class="line">        android:<span class="built_in">text</span>=<span class="string">"登录"</span></div><div class="line">        android:layout_width=<span class="string">"180dp"</span></div><div class="line">        android:layout_height=<span class="string">"50dp"</span> /&gt;</div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>先获取到最外层控件，再获取到最后一个控件，如上面的xml文件，最后一个控件是Button</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">RelativeLayout main = (<span class="name">RelativeLayout</span>) findViewById(<span class="name">R</span>.id.main)<span class="comment">;</span></div><div class="line">Button login_btn = (<span class="name">Button</span>) findViewById(<span class="name">R</span>.id.login_btn)<span class="comment">;</span></div></pre></td></tr></table></figure>
</li>
<li><p>给最外层控件和最后一个控件添加监听事件</p>
</li>
</ol>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在Activity的onCreate里添加如下方法</span></div><div class="line">addLayoutListener(main,login_btn);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**   </span></div><div class="line"> * addLayoutListener方法如下</div><div class="line"> * <span class="doctag">@param</span> main 根布局</div><div class="line"> * <span class="doctag">@param</span> scroll 需要显示的最下方View</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">addLayoutListener</span><span class="params">(<span class="keyword">final</span> View main, <span class="keyword">final</span> View scroll)</span> </span>&#123;</div><div class="line">	main.getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">new</span>  ViewTreeObserver.OnGlobalLayoutListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onGlobalLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">                Rect rect = <span class="keyword">new</span> Rect();</div><div class="line">                <span class="comment">//1、获取main在窗体的可视区域</span></div><div class="line">                main.getWindowVisibleDisplayFrame(rect);</div><div class="line">                <span class="comment">//2、获取main在窗体的不可视区域高度，在键盘没有弹起时，main.getRootView().getHeight()调节度应该和rect.bottom高度一样</span></div><div class="line">                <span class="keyword">int</span> mainInvisibleHeight = main.getRootView().getHeight() - rect.bottom;</div><div class="line">                <span class="keyword">int</span> screenHeight = main.getRootView().getHeight();<span class="comment">//屏幕高度</span></div><div class="line">                <span class="comment">//3、不可见区域大于屏幕本身高度的1/4：说明键盘弹起了</span></div><div class="line">                <span class="keyword">if</span> (mainInvisibleHeight &gt; screenHeight / <span class="number">4</span>) &#123;</div><div class="line">                    <span class="keyword">int</span>[] location = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">                    scroll.getLocationInWindow(location);</div><div class="line">                    <span class="comment">// 4､获取Scroll的窗体坐标，算出main需要滚动的高度</span></div><div class="line">                    <span class="keyword">int</span> srollHeight = (location[<span class="number">1</span>] + scroll.getHeight()) - rect.bottom;</div><div class="line">                    <span class="comment">//5､让界面整体上移键盘的高度</span></div><div class="line">                    main.scrollTo(<span class="number">0</span>, srollHeight);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">//3、不可见区域小于屏幕高度1/4时,说明键盘隐藏了，把界面下移，移回到原有高度</span></div><div class="line">                    main.scrollTo(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        		&#125;</div><div class="line">    		&#125;</div><div class="line">	&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>此方法通过监听Activity最外层布局控件来检测软键盘是否弹出，然后去手动调用控件的scrollTo方法达到调整布局目的。</p>
<h3 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h3><p>此种方法需要在当前界面写比较多的代码，在某些手机上，若输入时，软键盘高度是可变的，如中英文切换，高度变化时，会发现适配的不大好。如下图：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FkeMDvMrmpqiAagMm2xTPeIq-nMV.gif" alt=""><br>从上图可以看出，如果键盘高度变化，键盘还是会挡住登录按钮。</p>
<h2 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h2><blockquote>
<p>适配键盘高度变化情况，当键盘弹起时，让界面整体上移；键盘收起，让界面整体下移<br>此方法主要是通过在需要移动的控件外套一层scrollView，同时最布局最外层使用自定义view监听键盘弹出状态，计算键盘高度，再进行计算需要移动的位置，这个和方法三有点类似，但能适配键盘高度变化情况。</p>
</blockquote>
<h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><ol>
<li><p>先写自定义View，实时临听界面键盘弹起状态，计算键盘高度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyboardLayout</span> <span class="keyword">extends</span> <span class="title">FrameLayout</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> KeyboardLayoutListener mListener;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsKeyboardActive = <span class="keyword">false</span>; <span class="comment">//输入法是否激活</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mKeyboardHeight = <span class="number">0</span>; <span class="comment">// 输入法高度</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">KeyboardLayout</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">KeyboardLayout</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">KeyboardLayout</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        <span class="comment">// 监听布局变化</span></div><div class="line">        getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">new</span> KeyboardOnGlobalChangeListener());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKeyboardListener</span><span class="params">(KeyboardLayoutListener listener)</span> </span>&#123;</div><div class="line">        mListener = listener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> KeyboardLayoutListener <span class="title">getKeyboardListener</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mListener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isKeyboardActive</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mIsKeyboardActive;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取输入法高度</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getKeyboardHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mKeyboardHeight;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">KeyboardLayoutListener</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * <span class="doctag">@param</span> isActive       输入法是否激活</div><div class="line">         * <span class="doctag">@param</span> keyboardHeight 输入法面板高度</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onKeyboardStateChanged</span><span class="params">(<span class="keyword">boolean</span> isActive, <span class="keyword">int</span> keyboardHeight)</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyboardOnGlobalChangeListener</span> <span class="keyword">implements</span> <span class="title">ViewTreeObserver</span>.<span class="title">OnGlobalLayoutListener</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> mScreenHeight = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getScreenHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (mScreenHeight &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">return</span> mScreenHeight;</div><div class="line">            &#125;</div><div class="line">            mScreenHeight = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE))</div><div class="line">                    .getDefaultDisplay().getHeight();</div><div class="line">            <span class="keyword">return</span> mScreenHeight;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGlobalLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">            Rect rect = <span class="keyword">new</span> Rect();</div><div class="line">            <span class="comment">// 获取当前页面窗口的显示范围</span></div><div class="line">            ((Activity) getContext()).getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);</div><div class="line">            <span class="keyword">int</span> screenHeight = getScreenHeight();</div><div class="line">            <span class="keyword">int</span> keyboardHeight = screenHeight - rect.bottom; <span class="comment">// 输入法的高度</span></div><div class="line">            <span class="keyword">boolean</span> isActive = <span class="keyword">false</span>;</div><div class="line">            <span class="keyword">if</span> (Math.abs(keyboardHeight) &gt; screenHeight / <span class="number">4</span>) &#123;</div><div class="line">                isActive = <span class="keyword">true</span>; <span class="comment">// 超过屏幕五分之一则表示弹出了输入法</span></div><div class="line">                mKeyboardHeight = keyboardHeight;</div><div class="line">            &#125;</div><div class="line">            mIsKeyboardActive = isActive;</div><div class="line">            <span class="keyword">if</span> (mListener != <span class="keyword">null</span>) &#123;</div><div class="line">                mListener.onKeyboardStateChanged(isActive, keyboardHeight);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>xml文件编写，在界面最外层套上自定义view，在需要滚动的控件外层添加scrollView</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line">&lt;com<span class="selector-class">.example</span><span class="selector-class">.smilexie</span><span class="selector-class">.softboradblockedittext</span><span class="selector-class">.util</span><span class="selector-class">.KeyboardLayout</span></div><div class="line">        android:id=<span class="string">"@+id/main_ll"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"match_parent"</span></div><div class="line">        android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_bg"</span></div><div class="line">        android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        &lt;ScrollView</div><div class="line">            android:id=<span class="string">"@+id/login_ll"</span></div><div class="line">            android:layout_width=<span class="string">"match_parent"</span></div><div class="line">            android:layout_height=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">            &lt;LinearLayout</div><div class="line">                android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">                &lt;LinearLayout</div><div class="line">                    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                    android:layout_marginLeft=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginRight=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginTop=<span class="string">"200dp"</span></div><div class="line">                    android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_input_field_icon"</span></div><div class="line">                    android:orientation=<span class="string">"horizontal"</span>&gt;</div><div class="line"></div><div class="line">                    &lt;ImageView</div><div class="line">                        android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                        android:layout_gravity=<span class="string">"center_vertical"</span></div><div class="line">                        android:layout_marginLeft=<span class="string">"20dp"</span></div><div class="line">                        android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_yonghuming_icon"</span> /&gt;</div><div class="line"></div><div class="line">                    &lt;EditText</div><div class="line">                        android:id=<span class="string">"@+id/ui_username_input"</span></div><div class="line">                        style=<span class="string">"@style/editext_input_style"</span></div><div class="line">                        android:layout_marginLeft=<span class="string">"40dp"</span></div><div class="line">                        android:layout_marginRight=<span class="string">"20dp"</span></div><div class="line">                        android:<span class="attribute">background</span>=<span class="string">"@null"</span></div><div class="line">                        android:hint=<span class="string">"@string/login_hint_username"</span></div><div class="line">                        android:imeOptions=<span class="string">"actionNext"</span></div><div class="line">                        android:textColor=<span class="string">"@android:color/white"</span></div><div class="line">                        android:textColorHint=<span class="string">"@android:color/white"</span>&gt;</div><div class="line"></div><div class="line">                        &lt;requestFocus /&gt;</div><div class="line">                    &lt;/EditText&gt;</div><div class="line">                &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line"></div><div class="line">                &lt;LinearLayout</div><div class="line">                    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                    android:layout_marginLeft=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginRight=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginTop=<span class="string">"20dp"</span></div><div class="line">                    android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_input_field_icon"</span></div><div class="line">                    android:orientation=<span class="string">"horizontal"</span>&gt;</div><div class="line"></div><div class="line">                    &lt;ImageView</div><div class="line">                        android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                        android:layout_gravity=<span class="string">"center_vertical"</span></div><div class="line">                        android:layout_marginLeft=<span class="string">"20dp"</span></div><div class="line">                        android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_mima_icon"</span> /&gt;</div><div class="line"></div><div class="line"></div><div class="line">                    &lt;EditText</div><div class="line">                        android:id=<span class="string">"@+id/ui_password_input"</span></div><div class="line">                        style=<span class="string">"@style/editext_input_style"</span></div><div class="line">                        android:layout_marginLeft=<span class="string">"40dp"</span></div><div class="line">                        android:layout_marginRight=<span class="string">"20dp"</span></div><div class="line">                        android:<span class="attribute">background</span>=<span class="string">"@null"</span></div><div class="line">                        android:hint=<span class="string">"@string/login_hint_pwd"</span></div><div class="line">                        android:imeOptions=<span class="string">"actionDone"</span></div><div class="line">                        android:inputType=<span class="string">"textPassword"</span></div><div class="line">                        android:textColor=<span class="string">"@android:color/white"</span></div><div class="line">                        android:textColorHint=<span class="string">"@android:color/white"</span>&gt;&lt;/EditText&gt;</div><div class="line">                &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">                &lt;Button</div><div class="line">                    android:id=<span class="string">"@+id/login_btn"</span></div><div class="line">                    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                    android:layout_marginLeft=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginRight=<span class="string">"50dp"</span></div><div class="line">                    android:layout_marginTop=<span class="string">"20dp"</span></div><div class="line">                    android:<span class="attribute">background</span>=<span class="string">"@mipmap/login_button_bg_icon"</span></div><div class="line">                    android:text=<span class="string">"@string/login"</span></div><div class="line">                    android:textColor=<span class="string">"@color/titlebar_main_color"</span></div><div class="line">                    android:textSize=<span class="string">"@dimen/font_normal"</span> /&gt;</div><div class="line">            &lt;/LinearLayout&gt;</div><div class="line">        &lt;/ScrollView&gt;</div><div class="line">&lt;/com<span class="selector-class">.example</span><span class="selector-class">.smilexie</span><span class="selector-class">.softboradblockedittext</span><span class="selector-class">.util</span><span class="selector-class">.KeyboardLayout</span>&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Activity调用，自定义view控件添加键盘响应，在键盘变化时调用scrollView的smoothScrollTo去滚动界面</p>
</li>
</ol>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 监听键盘状态，布局有变化时，靠scrollView去滚动界面</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">addLayoutListener</span><span class="params">()</span> </span>&#123;</div><div class="line">    bindingView.mainLl.setKeyboardListener(<span class="keyword">new</span>  KeyboardLayout.KeyboardLayoutListener() &#123;</div><div class="line">      	 <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onKeyboardStateChanged</span><span class="params">(<span class="keyword">boolean</span> isActive, <span class="keyword">int</span> keyboardHeight)</span> </span>&#123;</div><div class="line">                Log.e(<span class="string">"onKeyboardStateChanged"</span>, <span class="string">"isActive:"</span> + isActive + <span class="string">" keyboardHeight:"</span> + keyboardHeight);</div><div class="line">                <span class="keyword">if</span> (isActive) &#123;</div><div class="line">                    scrollToBottom();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 弹出软键盘时将SVContainer滑到底</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">scrollToBottom</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        bindingView.loginLl.postDelayed(<span class="keyword">new</span> Runnable() &#123;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                bindingView.loginLl.smoothScrollTo(<span class="number">0</span>, bindingView.loginLl.getBottom() + SoftKeyInputHidWidget.getStatusBarHeight(LoginActivityForDiffkeyboardHeight.<span class="keyword">this</span>));</div><div class="line">            &#125;</div><div class="line">        &#125;, <span class="number">100</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>具体实现代码见demo中的LoginActivityForDiffkeyboardHeight类。实现效果如下：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fprl5ny3iQ-8LXr6R_IOJNDsDlxY.gif" alt=""><br>可以看到键盘高度变化了，也不会影响界面布局</p>
<h2 id="方法五"><a href="#方法五" class="headerlink" title="方法五"></a>方法五</h2><blockquote>
<p>监听Activity顶层View，判断软键盘是否弹起，对界面重新绘制<br>使用场景：针对界面全屏或是沉浸式状态栏，界面包含比较多输入框，界面即使包裹了一层ScrollView,在键盘显示时，当前输入框下面的输入不能通过上下滑动界面来输入。</p>
</blockquote>
<h3 id="实现步骤-1"><a href="#实现步骤-1" class="headerlink" title="实现步骤"></a>实现步骤</h3><ol>
<li>把SoftHideKeyBoardUtil类复制到项目中； </li>
<li>在需要使用的Activity的onCreate方法中添加：SoftHideKeyBoardUtil.assistActivity(this);即可。</li>
</ol>
<h3 id="实现原理-1"><a href="#实现原理-1" class="headerlink" title="实现原理"></a>实现原理</h3><p>SoftHideKeyBoardUtil类具体代码如下：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 解决键盘档住输入框</div><div class="line"> * Created by SmileXie on 2017/4/3.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SoftHideKeyBoardUtil</span> &#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">assistActivity</span> (<span class="params">Activity activity</span>) </span>&#123;</div><div class="line">        <span class="keyword">new</span> SoftHideKeyBoardUtil(activity);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">private</span> View mChildOfContent;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> usableHeightPrevious;</div><div class="line">    <span class="keyword">private</span> FrameLayout.LayoutParams frameLayoutParams;</div><div class="line">    <span class="comment">//为适应华为小米等手机键盘上方出现黑条或不适配</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> contentHeight;<span class="comment">//获取setContentView本来view的高度</span></div><div class="line">    <span class="keyword">private</span> boolean isfirst = <span class="literal">true</span>;<span class="comment">//只用获取一次</span></div><div class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> statusBarHeight;<span class="comment">//状态栏高度</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SoftHideKeyBoardUtil</span>(<span class="params">Activity activity</span>) </span>&#123;</div><div class="line">   <span class="comment">//1､找到Activity的最外层布局控件，它其实是一个DecorView,它所用的控件就是FrameLayout</span></div><div class="line">        FrameLayout content = (FrameLayout) activity.findViewById(android.R.id.content);</div><div class="line">        <span class="comment">//2､获取到setContentView放进去的View</span></div><div class="line">        mChildOfContent = content.getChildAt(<span class="number">0</span>);</div><div class="line">        <span class="comment">//3､给Activity的xml布局设置View树监听，当布局有变化，如键盘弹出或收起时，都会回调此监听  </span></div><div class="line">          mChildOfContent.getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">new</span> ViewTreeObserver.OnGlobalLayoutListener() &#123;</div><div class="line">        <span class="comment">//4､软键盘弹起会使GlobalLayout发生变化</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGlobalLayout</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (isfirst) &#123;</div><div class="line">                    contentHeight = mChildOfContent.getHeight();<span class="comment">//兼容华为等机型</span></div><div class="line">                    isfirst = <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//5､当前布局发生变化时，对Activity的xml布局进行重绘</span></div><div class="line">                possiblyResizeChildOfContent();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//6､获取到Activity的xml布局的放置参数</span></div><div class="line">        frameLayoutParams = (FrameLayout.LayoutParams) mChildOfContent.getLayoutParams();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 获取界面可用高度，如果软键盘弹起后，Activity的xml布局可用高度需要减去键盘高度  </span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">possiblyResizeChildOfContent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//1､获取当前界面可用高度，键盘弹起后，当前界面可用布局会减少键盘的高度</span></div><div class="line">        <span class="keyword">int</span> usableHeightNow = computeUsableHeight();</div><div class="line">        <span class="comment">//2､如果当前可用高度和原始值不一样</span></div><div class="line">        <span class="keyword">if</span> (usableHeightNow != usableHeightPrevious) &#123;</div><div class="line">            <span class="comment">//3､获取Activity中xml中布局在当前界面显示的高度</span></div><div class="line">            <span class="keyword">int</span> usableHeightSansKeyboard = mChildOfContent.getRootView().getHeight();</div><div class="line">            <span class="comment">//4､Activity中xml布局的高度-当前可用高度</span></div><div class="line">            <span class="keyword">int</span> heightDifference = usableHeightSansKeyboard - usableHeightNow;</div><div class="line">            <span class="comment">//5､高度差大于屏幕1/4时，说明键盘弹出</span></div><div class="line">            <span class="keyword">if</span> (heightDifference &gt; (usableHeightSansKeyboard/<span class="number">4</span>)) &#123;</div><div class="line">                <span class="comment">// 6､键盘弹出了，Activity的xml布局高度应当减去键盘高度</span></div><div class="line">                <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)&#123;</div><div class="line">                    frameLayoutParams.height = usableHeightSansKeyboard - heightDifference + statusBarHeight;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    frameLayoutParams.height = usableHeightSansKeyboard - heightDifference;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                frameLayoutParams.height = contentHeight;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//7､ 重绘Activity的xml布局</span></div><div class="line">            mChildOfContent.requestLayout();</div><div class="line">            usableHeightPrevious = usableHeightNow;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">computeUsableHeight</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        Rect r = <span class="keyword">new</span> Rect();</div><div class="line">        mChildOfContent.getWindowVisibleDisplayFrame(r);</div><div class="line">        <span class="comment">// 全屏模式下：直接返回r.bottom，r.top其实是状态栏的高度</span></div><div class="line">        <span class="keyword">return</span> (r.bottom - r.top);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h3><p>( 1 ) 找到Activity的最外层布局控件，我们知道所有的Activity都是DecorView，它就是一个FrameLayout控件，该控件id是系统写死叫R.id.content，就是我们setContentView时，把相应的View放在此FrameLayout控件里<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">FrameLayout content</span> = (FrameLayout) activity.findViewById(android.R.id.content);</div></pre></td></tr></table></figure></p>
<p>所以content.getChildAt(0)获取到的mChildOfContent，也就是我们用setContentView放进去的View。 </p>
<p>( 2 ) 给我们的Activity的xml布局View设置一个Listener监听<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mChildOfContent.getViewTreeObserver().<span class="keyword">addOnGlobalLayoutListener(&#123; </span></div><div class="line">        possiblyResizeChildOfContent()<span class="comment">;</span></div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>View.getViewTreeObserver()可以获取一个ViewTreeObserver对象——它是一个观察者，用以监听当前View树所发生的变化。这里所注册的addOnGlobalLayoutListener，就是会在当前的View树的全局布局（GlobalLayout）发生变化、或者其中的View可视状态有变化时，进行通知回调。『软键盘弹出/隐 』都能监听到。</p>
<p>( 3 ) 获取当前界面可用高度<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> computeUsableHeight() &#123;</div><div class="line">    Rect <span class="built_in">rect</span> = <span class="keyword">new</span> Rect();</div><div class="line">    mChildOfContent.getWindowVisibleDisplayFrame(<span class="built_in">rect</span>);</div><div class="line">    <span class="comment">// rect.top其实是状态栏的高度，如果是全屏主题，直接 return rect.bottom就可以了</span></div><div class="line">    <span class="built_in">return</span> (<span class="built_in">rect</span>.bottom - <span class="built_in">rect</span>.top);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如下图所示：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fu0LdpFKY1wxCoC-_00ybugeipUu.png" alt=""></p>
<p>( 4 ) 重设高度， 我们计算出的可用高度，是目前在视觉效果上能看到的界面高度。但当前界面的实际高度是比可用高度要多出一个软键盘的距离的。</p>
<p>注意：如果既使用了沉浸式状态栏，又加了fitSystetemWindow=true属性，就需要在AndroidMainfest.xml注册Activity的地方添加上以下属性。因为你两种都用，系统不知道用哪种了。fitSystetemWindow已经有resize屏幕的作用。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>下面对上面几种方法进行对比：</p>
<ul>
<li><p>方法一：优点：使用简单，只需在Activity的AndroidMainfest.xml中设置windowSoftInput属性即可。<br>注意点：adjustResize属性必须要界面大小可以自身改变；<br>缺点：当输入框比较多时，当前输入框下方的输入框会初键盘挡住，须收起键盘再进入输入；使用adjustPan，输入框较多时，因它是把界面当成一个整体，只会显示一屏的高度，会把ActionBar顶上去。</p>
</li>
<li><p>方法二：优点：使用简单，只需在Activity的最外层布局包裹一个ScrollView即可。<br>注意点：不可使用adjustPan属性，否则ScrollView失效；<br>缺点：对于全屏时，在键盘显示时，无法上下滑动界面达到输入的目的；</p>
</li>
<li><p>方法三：优点：可以解决全屏时，键盘挡入按钮问题。<br>缺点：只要有此需求的Activity均需要获取到最外层控件和最后一个控件，监测键盘是否弹出，再调用控件的scrollTo方法对界面整体上移或是下移。代码冗余。对于键盘高度变化时，适配不好。</p>
</li>
<li><p>方法四：优点：可以解决全屏时，键盘挡入按钮问题。<br>缺点：只要有此需求的Activity均需要获取到最外层控件和最后一个控件，布局多出一层。</p>
</li>
<li><p>方法五：优点：可以解决全屏时，键盘挡入输入框问题。只需要写一个全局类，其他有需求的界面直接在onCreate方法里调用此类的全局方法，即可。<br>缺点：多用了一个类。</p>
</li>
</ul>
<p>综上所述： </p>
<ol>
<li>当输入框比较少时，界面只有一个输入框时，可以通过方法一设置adjustPan； </li>
<li>如果对于非全屏/非沉浸式状态栏需求，只需要使用方法二ScrollView+adjustResize； </li>
<li>如果对于使用沉浸式状态栏，使用fitSystemWindow=true属性，按道理android系统已经做好适配，键盘不会挡住输入框； </li>
<li>如果全屏/沉浸式状态栏界面，类似于登录界面，有需要把登录键钮或是评论按钮也顶起，如果键盘没有变化需求，可以使用方法三，若需要适配键盘高度变化，则需要使用方法四； </li>
<li>如果界面使用全屏或沉浸式状态栏，没有使用fitSystemWindow=true属性，一般如需要用到抽屈而且状态栏颜色也需要跟着变化，则选择方法五更恰当。</li>
</ol>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=4154790&auto=1&height=66"></iframe>




















]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在开发中，经常会遇到键盘挡住输入框的情况，比如登录界面或注册界面，弹出的软键盘把登录或注册按钮挡住了，用户必须把软键盘收起，才能点击相应按钮，这样的用户体验非常不好。像微信则直接把登录按钮做在输入框的上面，但有很多情况下，这经常满足不了需求。同时如果输入框特别多的情况下，点击输入时，当前输入框没被挡住，但是当前输入框下面的输入框却无法获取焦点，必须先把键盘收起，再去获取下面输入框焦点，这样用户体验也非常不好，那有什么办法呢？ &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="Android软键盘" scheme="http://dinson.win/tags/Android%E8%BD%AF%E9%94%AE%E7%9B%98/"/>
    
  </entry>
  
  <entry>
    <title>Android双缓冲绘图技术分析</title>
    <link href="http://dinson.win/2017/05/09/17-05-09/"/>
    <id>http://dinson.win/2017/05/09/17-05-09/</id>
    <published>2017-05-09T15:12:42.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>双缓冲、多缓冲技术在计算机科学中其实是一个广义的概念，不过其本质上的意思都是差不多的。今天我们就来讲一讲双缓冲技术在android绘图中的应用。所谓的双缓冲技术其实就是当程序需要在指定的View上进行绘制时，程序并不需要直接绘制到该View组件，而是先绘制到一个内存中的Bitmap图片上（就是缓冲），等内存中的Bitmap绘制好之后，再一次性将Bitmap绘制到View组件上。当进行复杂的绘制操作时会导致呈现的图像闪烁或具有 其他不可接受的外观。双缓冲的使用解决这些问题。双缓冲使用内存缓冲区来解决由多重 绘制操作造成的闪烁问题。当使用双缓冲时，首先在内存缓冲区里完成所有绘制操作，而 不是在屏幕上直接进行绘图。当所有绘制操作完成后，把内存缓冲区完成的图像直接复制 到屏幕。因为在屏幕上只执行一个图形操作，所以消除了由复杂绘制操作造成的图像闪烁 问题。</p>
</blockquote>
<a id="more"></a>
<h2 id="Android绘图中的双缓冲"><a href="#Android绘图中的双缓冲" class="headerlink" title="Android绘图中的双缓冲"></a>Android绘图中的双缓冲</h2><p>我们知道，我们在绘图时有两样东西是少不了的，一个是Canvas（画布），一个是Paint(画笔）。Canvas提供画各种图形的方法，如画圆（drawCircle)，画矩形（drawRect）等等，Paint用来设置画笔的样式，比如笔的粗细，颜色等。每个Canvas内部持有一个Bitmap对象的引用，画图的过程其实就是往这个Bitmap当中写入ARGB信息。<br>比如我们现在自定义一个View,在上面画一个矩形和一个圆：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">	canvas.drawRect(rect,mPaint);</div><div class="line">	canvas.drawCircle(cx,cy,<span class="number">100</span>,mPaint);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那么现在有一个问题，画矩形和画圆是两个独立的动作，会不会在drawRect执行完之后屏幕上马上就会显示出来一个矩形呢？<br>为了验证我们的猜想，我们在两个绘图动作中加一个sleep:<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">	canvas.drawRect(rect,mPaint);</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">	TimeUnit.MILLISECONDS.sleep(<span class="number">2000</span>);</div><div class="line">	&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">	e.printStackTrace();</div><div class="line">	&#125;</div><div class="line">	canvas.drawCircle(cx,cy,<span class="number">100</span>,mPaint);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们会看到，并不是先显示矩形再显示圆，而是两个几乎同时一起显示出来的。这就说明必须要等onDraw方法执行完成之后，才会把数据交给GPU去处理展示。这就是android绘图当中的第一道缓冲，即显示缓冲区。</p>
<p>而所谓的双缓冲，在android绘图中其实就是再创建一个Canvas和对应的Bitmap，然后在onDraw方法里默认的Canvas通过drawBitmap画刚才new的那个bitmap从而实现双缓冲。用代码简单的表述是这样的：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">    Bitmap bufferBm = Bitmap.create(getWidth,getHeight,Bitmap.Config.ARGB_8888);</div><div class="line">    Canvas bufferCanvas = <span class="keyword">new</span> Canvas(bufferBm);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">drawSomething</span><span class="params">()</span></span>&#123;</div><div class="line">    bufferCanvas.drawRect();</div><div class="line">    bufferCanvas.drawCircle();</div><div class="line">    ...</div><div class="line">    invalidate();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">    canvas.drawBitmap(bufferBm,<span class="number">0</span>,<span class="number">0</span>,<span class="keyword">null</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>示意图：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FjYCnjDP3ixkk0ZniR2-KFHD4eGi.png" alt=""></p>
<h2 id="双缓冲绘图的优缺点及适用场景"><a href="#双缓冲绘图的优缺点及适用场景" class="headerlink" title="双缓冲绘图的优缺点及适用场景"></a>双缓冲绘图的优缺点及适用场景</h2><p>我们通过一个例子来说明。<br>实现这样一个功能，一个自定义View,每次点击的时候在点击处画一个圆。我们先不使用双缓冲来实现：</p>
<ul>
<li>不用双缓冲的代码<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">View</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Paint mPaint;</div><div class="line">    <span class="keyword">private</span> List&lt;Point&gt; mPoints;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        mPaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG);</div><div class="line">        mPaint.setStyle(Paint.Style.FILL);</div><div class="line">        mPaint.setColor(Color.GREEN);</div><div class="line">        setBackgroundColor(Color.WHITE);</div><div class="line">        mPoints = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> action = event.getAction();</div><div class="line">        <span class="keyword">switch</span> (action)&#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">                mPoints.add(<span class="keyword">new</span> Point((<span class="keyword">int</span>)event.getX(),(<span class="keyword">int</span>)event.getY()));</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                invalidate();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (Point p : mPoints) &#123;</div><div class="line">            canvas.drawCircle(p.x,p.y,<span class="number">50</span>,mPaint);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>在实验之前，我们先打开开发者选项里的”GPU呈现模式分析“，设置为“在屏幕上显示为条形图”。可以看到，当画的圆数目比较少时，GPU的负荷较低，但是出现一个逐步上升的趋势：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqUK07_35kXMCMkICr4rhu2YQIvD.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FkxoIY31BZ0xVhm9r1GZXOf66qKg.png" alt=""></p>
<p>当画的圆数目增加到比较大时，GPU负荷有点惨不妨睹了：<br><img src="http://ondlsj2sn.bkt.clouddn.com/Ft4kjiraYoIF9GysLMRPNYFpNdrc.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/Fgthd-vIMt0Lbc_jdyx8sJxuPhcD.png" alt=""></p>
<ul>
<li>我们现在改用双缓冲来绘图，代码如下：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">View</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Paint mPaint;</div><div class="line">    <span class="keyword">private</span> Canvas mBufferCanvas;</div><div class="line">    <span class="keyword">private</span> Bitmap mBufferBitmap;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        mPaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG);</div><div class="line">        mPaint.setStyle(Paint.Style.FILL);</div><div class="line">        mPaint.setColor(Color.GREEN);</div><div class="line">        setBackgroundColor(Color.WHITE);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> action = event.getAction();</div><div class="line">        <span class="keyword">switch</span> (action)&#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">                <span class="keyword">if</span> (mBufferBitmap == <span class="keyword">null</span>) &#123;</div><div class="line">                    mBufferBitmap = Bitmap.createBitmap(getWidth(),getHeight(), Bitmap.Config.ARGB_8888);</div><div class="line">                    mBufferCanvas = <span class="keyword">new</span> Canvas(mBufferBitmap);</div><div class="line">                &#125;</div><div class="line">                mBufferCanvas.drawCircle((<span class="keyword">int</span>)event.getX(),(<span class="keyword">int</span>)event.getY(),<span class="number">50</span>,mPaint);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                invalidate();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mBufferBitmap == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        canvas.drawBitmap(mBufferBitmap,<span class="number">0</span>,<span class="number">0</span>,<span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>使用双缓冲，在数量较小时的GPU使用情况是这样的：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FqdunQxqjgDDyO1Y5a6wXJO4NiJi.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FmLMpDHp359u2m-LX67kNEaViR0D.png" alt=""></p>
<p>使用双缓冲，在数量非常大的时候，GPU使用情况是这样的：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtmsmsWOtLxCv9ZuBos1HVAxIir9.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/Fj_TW47YAjMiSJTIgCAtRnApTv5_.png" alt=""></p>
<p>从上面的实验数据我们可以得出结论：</p>
<ul>
<li>在绘制数据量较小时，不使用双缓冲，GPU的负荷更低，即绘制性能更高；</li>
<li>在绘制数据量较大时，使用双缓冲绘图，绘制性能明显高于不使用双缓冲的情况；</li>
<li>使用双缓冲会增加内存消耗。</li>
</ul>
<p>其实上面的结论也很好理解，就像上面举的搬砖的例子，如果砖少的话，用车来拉明显是划不来的，砖的数量很多的时候，用车来拉就可以节省很多时间，但是用车就要消耗额外的资源，这就需要根据不同的情况做出正确的选择。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=2526613&auto=1&height=66"></iframe>















]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;双缓冲、多缓冲技术在计算机科学中其实是一个广义的概念，不过其本质上的意思都是差不多的。今天我们就来讲一讲双缓冲技术在android绘图中的应用。所谓的双缓冲技术其实就是当程序需要在指定的View上进行绘制时，程序并不需要直接绘制到该View组件，而是先绘制到一个内存中的Bitmap图片上（就是缓冲），等内存中的Bitmap绘制好之后，再一次性将Bitmap绘制到View组件上。当进行复杂的绘制操作时会导致呈现的图像闪烁或具有 其他不可接受的外观。双缓冲的使用解决这些问题。双缓冲使用内存缓冲区来解决由多重 绘制操作造成的闪烁问题。当使用双缓冲时，首先在内存缓冲区里完成所有绘制操作，而 不是在屏幕上直接进行绘图。当所有绘制操作完成后，把内存缓冲区完成的图像直接复制 到屏幕。因为在屏幕上只执行一个图形操作，所以消除了由复杂绘制操作造成的图像闪烁 问题。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="优化" scheme="http://dinson.win/tags/%E4%BC%98%E5%8C%96/"/>
    
      <category term="自定义控件" scheme="http://dinson.win/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>你真的了解SharedPreferences吗？</title>
    <link href="http://dinson.win/2017/05/08/17-05-08/"/>
    <id>http://dinson.win/2017/05/08/17-05-08/</id>
    <published>2017-05-08T14:50:54.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SharedPreferences踩坑"><a href="#SharedPreferences踩坑" class="headerlink" title="SharedPreferences踩坑"></a>SharedPreferences踩坑</h2><blockquote>
<p>在日常开发中SharedPreferences想必肯定是经常被我们使用的了，通常情况下使用它并不会发生什么问题，但是假如遇到了在不同进程中使用SharedPreferences（例如指定了process的activity/service），那坑就来了。</p>
</blockquote>
<a id="more"></a>
<p>这里我们可以实验一下，创建两个Activity，在AndroidManifest其中一个将其process指定为second进程</p>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/Fhv03YDAqb37rRk1FWWGv-fyvmsN.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/Fobj0jcsuu1wYcODuqLR49DgDDFj.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FufFaJXxAFaPYmQbS5MqVKue-IzK.png" alt=""></p>
<p>代码比较简单，就是将输入框的内容存入到SharedPreferences中，并显示到TextView上，点击跳转按钮跳转到SecondActivity<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fo2znhVgjpF8V3xIm3ongiFU9KrY.png" alt=""><br><img src="http://ondlsj2sn.bkt.clouddn.com/FiaPwAVp3_Ce5qAJ8FbniDgNU1Zc.png" alt=""></p>
<p>SecondActivity就是点击按钮获取SharedPreferences的值并显示到TextView，不过这里要注意它是运行在不同的进程中的。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhMLVx8S6Oaul-hMY7ORp4iNYYLP.png" alt=""></p>
<p>这里我们将值改为hello，然后点击修改，可以看到SharedPreferences的值已经改成功了。</p>
<p>然后我们跳转到SecondActivity并获取值，<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fsd7m-sUEmjdUWtWeykZrhoXedTU.png" alt=""></p>
<p>一切正常，好现在我们回到MainActivity，并再次修改SharedPreferences中的值，<br><img src="http://ondlsj2sn.bkt.clouddn.com/FpLCVsm2nu14bNeSUKYC7LbXvfGS.png" alt=""></p>
<p>可以看到SharedPreferences的值已经再次被修改成功，这时我们再跳转到SecondActivity并获取值，<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fo32ZpcZ9M3arNwdAgyQ-KgIKfna.png" alt=""></p>
<p>不管怎么获取都是之前的值，然后重启app，再进入SecondActivity，便又能获取到正确的值了。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FlO8FVy_A5NO-2oWgQE1m4ey_y7U.png" alt=""><br>-SecondActivity(重启app后)-</p>
<p>这里我们先总结一下结论</p>
<ul>
<li>先启动主进程并获取SharedPreferences对象，然后启动其他进程并获取SharedPreferences对象，那么此时对SharedPreferences的数值进行修改均不能对其他进程产生作用。</li>
<li>先启动主进程并获取SharedPreferences对象，然后对值进行修改，然后启动其他进程并获取SharedPreferences对象，能取得修改后的值，但此时如果再对此值进行修改，均不能对其他进程产生作用。</li>
</ul>
<p>总结下来就是，其他进程在启动时获取到的SharedPreferences的值只能是这个进程启动前这个值的最后值，即在进程启动后对值的修改只对当前进程有效，须等到进程重启或者app重启才能与其他进程进行“同步”。</p>
<p>这里<strong>即使把获取SharedPreferences对象的模式改为MODE_MULTI_PROCESS，也仅仅是在Android 3.0以下才有效，在Android 3.0以上也是一样不行的。</strong></p>
<p>那么为什么会这样子呢，笔者带大家从源码的角度来分析一下，我们来看一下关于SharedPreferences的源码。</p>
<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><p>通常我们获取SharedPreferences对象一般是这样<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(<span class="keyword">this</span>);</div><div class="line"><span class="comment">//或者这样</span></div><div class="line">SharedPreferences sharedPreferences = getSharedPreferences(<span class="string">"name"</span>, Context.MODE_PRIVATE);</div></pre></td></tr></table></figure></p>
<p>实际上PreferenceManager.getDefaultSharedPreferences(context)方法也是对getSharedPreferences做了封装</p>
<p><img src="http://ondlsj2sn.bkt.clouddn.com/FvywJ70yizMOhfF3aaqGv2vpojew.png" alt=""></p>
<p>所以不管通过哪种方式，最终都是通过Context中的getSharedPreferences方法来获取SharedPreferences对象，在Context中，getSharedPreferences方法是一个抽象方法，没有具体实现。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">public abstract SharedPreferences </div><div class="line">           getSharedPreferences(<span class="built_in">String</span> name, int mode);</div></pre></td></tr></table></figure></p>
<p>我们知道Context的实现类其实就是ContextImpl，所以这里我们直接去到ContextImpl的getSharedPreferences方法中，<br><img src="http://ondlsj2sn.bkt.clouddn.com/FvnQplSy9iuRj4G-AdhNU3jApBRS.png" alt=""></p>
<p>这里比较简单，先判断了ArrayMap中是否存在该File对象，不存在则创建一个并放入ArrayMap，然后调用getSharedPreferences的重载方法getSharedPreferences(file, mode)，我们看一下这个方法的源码<br><img src="http://ondlsj2sn.bkt.clouddn.com/FudqaDKO4sr06vuTurN5IHzJq5a0.png" alt=""></p>
<p>可以看到，这里将SharedPreferences的实例对象SharedPreferencesImpl缓存起来，以后每次获取如果内存中已经存在那么直接返回，如果不存在才会进行重新创建;</p>
<p>那么这里我们可以有个猜想，即是否只有在创建SharedPreferences对象的时候才会从磁盘中进行读取，读取后的值保存在了内存中，获取SharedPreferences对象优先从缓存中获取，再次创建时才会重新从磁盘中再次读取文件。</p>
<p>我们直接看一下SharedPreferencesImpl的源码，验证一下我们的猜想。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FoBTygVx4rT-JlInHmhTXGSzK7Pd.png" alt=""></p>
<p>可以看到，在SharedPreferencesImpl的构造方法中调用了startLoadFromDisk，startLoadFromDisk方法中开启了一个线程加载磁盘中的文件，loadFromDisk源码如下<br><img src="http://ondlsj2sn.bkt.clouddn.com/FteY8ItDC7WESvhix2ob3oIM5wAK.png" alt=""></p>
<p>看到这里，已经逐步验证了我们之前的猜想，在构造方法中读取了磁盘文件的内容并赋值给了成员变量mMap集合，我们只需要看看所有的get方法是不是从mMap成员变量中获取值就能完全验证我们的猜想是否正确，因为get方法都大同小异，所以我们就只分析一下getString方法就可以了。<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fp848IwmUi2p-UpRmBfCADLmnUtj.png" alt=""></p>
<p>可以看到，果然是这样的，从mMap集合中直接取出值进行返回，那么看到这里肯定会有个疑问，为什么在同个进程却又没有问题呢，或者其他进程对SharedPreferences的获取在值修改完毕之后也没有问题，这里我们看一下SharedPreferencesImpl的内部类EditorImpl的源码，EditorImpl是Editor的实现类。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FsnC_5x72iexCxpU7_w6p1A01f5D.png" alt=""></p>
<p>可以看到，EditorImpl内部有一个mModified的Map成员变量，我们所有的修改在调用了commit或者apply方法后才会执行保存，可以看到，不管调用哪个方法都会调用commitToMemory()和enqueueDiskWrite方法，那么我们看一下这两个方法的源码<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtvV2I3jnenZxTJeCv6J-twW7eQy.png" alt=""></p>
<p>其实通过方法名我们也可以猜到，就是将值提交到内存，从代码上也可以看出来，就是将Editor的所有put进去的值添加到SharedPreferences的mMap成员变量中。</p>
<p>那么最后将内容写入磁盘的方法就是enqueueDiskWrite了，我们看一下它的源码<br><img src="http://ondlsj2sn.bkt.clouddn.com/FijRzuJIAO3jXq0PrHwylN1NAASG.png" alt=""></p>
<p>源码比较简单，其中最主要的就是区分了apply方法调用和commit的调用,apply调用的话会将写入磁盘的任务加入到一个线程池中在后台运行，直接commit的话则会在当前线程进行写入。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>整个获取SharedPreferences对象过程的流程图如下<br><img src="http://ondlsj2sn.bkt.clouddn.com/FpnUPmqHC5RdoGU_HabRZXbQ4aip.png" alt=""></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=16686122&auto=1&height=66"></iframe>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SharedPreferences踩坑&quot;&gt;&lt;a href=&quot;#SharedPreferences踩坑&quot; class=&quot;headerlink&quot; title=&quot;SharedPreferences踩坑&quot;&gt;&lt;/a&gt;SharedPreferences踩坑&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在日常开发中SharedPreferences想必肯定是经常被我们使用的了，通常情况下使用它并不会发生什么问题，但是假如遇到了在不同进程中使用SharedPreferences（例如指定了process的activity/service），那坑就来了。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android嫡系" scheme="http://dinson.win/categories/Android%E5%AB%A1%E7%B3%BB/"/>
    
    
      <category term="SharedPreferences" scheme="http://dinson.win/tags/SharedPreferences/"/>
    
  </entry>
  
  <entry>
    <title>全世界最著名的 icons 网站都在这了</title>
    <link href="http://dinson.win/2017/05/05/17-05-05/"/>
    <id>http://dinson.win/2017/05/05/17-05-05/</id>
    <published>2017-05-05T02:45:52.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>分享几个高逼格，免费的icons网站</p>
</blockquote>
<a id="more"></a>
<h2 id="icons8"><a href="#icons8" class="headerlink" title="icons8"></a>icons8</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FgagQPjcElDhzpQ0xc9QuOmY2YZU.png" alt=""><br><a href="https://icons8.com/" target="_blank" rel="external">icons8：</a>拥有 48,900 个免费图标，提供各个平台的基础图标与分类图标，其特色是大小和颜色随意自定义。 </p>
<h2 id="iconfinder"><a href="#iconfinder" class="headerlink" title="iconfinder"></a>iconfinder</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FmkrERamIL5tyHCN8RMfKb3WrB_q.png" alt=""><br><a href="https://www.iconfinder.com/" target="_blank" rel="external">iconfinder：</a>哥本哈根一个团队做的 icon 专业图标网站，拥有 1,667,626 个图标和 40,113 图标集，是最专业的 icon 图标网站之一。</p>
<h2 id="iconfont"><a href="#iconfont" class="headerlink" title="iconfont"></a>iconfont</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FpXxLtfKf4u2-mGev-qLrzhI0zXt.png" alt=""><br><a href="http://iconfont.cn/" target="_blank" rel="external">iconfont：</a>国内功能很强大且图标内容很丰富的矢量图标库,提供矢量图标下载、在线存储、格式转换等功能，是阿里妈妈 MUX 组业余时间做的的矢量图标管理、交流平台。</p>
<h2 id="Font-Awesome"><a href="#Font-Awesome" class="headerlink" title="Font-Awesome"></a>Font-Awesome</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FvqWqkLBNsi2ZlvOKaK7oPRlE7H2.png" alt=""><br><a href="http://fontawesome.io/" target="_blank" rel="external">Font-Awesome：</a>一套专门为 Twitter Boostrap 设计的图标字体库。这套图标字体集几乎囊括了网页中可能用到的所有图标，除了包括 Twitter Boostrap 的默认图标外，还有社交网络图标、Web 应用程序图标和编辑器图标等等，可以免费用于商业项目。</p>
<h2 id="iconstore"><a href="#iconstore" class="headerlink" title="iconstore"></a>iconstore</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FvE9rxkw3oN3NYaWUrrhySmoAFR0.png" alt=""><br><a href="https://iconstore.co/" target="_blank" rel="external">iconstore：</a>Icon Store 提供高质量的免费的/收费的图标，包括卡通风格图标，极简主义图标，扁平化设计风格图标，手绘风格图标，像素风格图标等等，也包括各种类型主题图标，比如圣诞节主题图标，情人节主题图标，天气图标，办公室图标,动物图标，美容美发图标等等。</p>
<h2 id="Material-icons"><a href="#Material-icons" class="headerlink" title="Material icons"></a>Material icons</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FinrvrujnuCMQpTBYGnyInazNC2J.png" alt=""><br><a href="https://material.io/icons/" target="_blank" rel="external">Material icons：</a>Google 官方的扁平化图标手册，收集了多达10,000+图标，包括了网页，排版，音频，商务等等主题的绝大多数图标。格式包括SVG,PNG,ICON,以及字体图标，你可以在网页中轻松引用图标。</p>
<h2 id="swifticons"><a href="#swifticons" class="headerlink" title="swifticons"></a>swifticons</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FhBcgyetvVUy3wzrSJJMD9a57PQd.png" alt=""><br><a href="https://www.swifticons.com/" target="_blank" rel="external">swifticons：</a>覆盖 20 个大类包含 2,264 个高质量图标</p>
<h2 id="flat-icon-design"><a href="#flat-icon-design" class="headerlink" title="flat-icon-design"></a>flat-icon-design</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/Flmo9pR-2DYI_oKg9DI-3fJufTew.png" alt=""><br><a href="http://flat-icon-design.com/" target="_blank" rel="external">flat-icon-design：</a>一个日本的免费扁平化设计图示网站，总数量大约有 500 个左右！网站提供的图示风格设计都很简约、可爱，非常适合使用于网页设计、应用程序开发或投影片报告，而且这些图示明确标示为「可以作为商业用途」，网站开放 Illustrator AI、EPS、JPEG、PNG 和 SVG 五种格式下载。</p>
<h2 id="Noun-Project"><a href="#Noun-Project" class="headerlink" title="Noun Project"></a>Noun Project</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/Fgy4KZ0iiSCB2U4G3LoNz7yhuBKg.png" alt=""><br><a href="https://thenounproject.com/" target="_blank" rel="external">Noun Project：</a>国外三位设计师 2010 创建一个收录、并可免费使用高清符号图示的媒体库，包含25个语言版本，每天都有来自世界各地的设计师提交新 icon。</p>
<h2 id="Flaticon"><a href="#Flaticon" class="headerlink" title="Flaticon"></a>Flaticon</h2><p><img src="http://ondlsj2sn.bkt.clouddn.com/FqW2k1l7XItrd4rFB4OGORpJL-Mp.png" alt=""><br><a href="http://www.flaticon.com/" target="_blank" rel="external">Flaticon：</a>搜索海量扁平化图标，让图标搜索和转换变得非常简单和快速，并提供常用格式 SVG、PSD 源文件和 PNG 下载。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=28828120&auto=1&height=66"></iframe>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;分享几个高逼格，免费的icons网站&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UI设计" scheme="http://dinson.win/categories/UI%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="UI" scheme="http://dinson.win/tags/UI/"/>
    
      <category term="设计师" scheme="http://dinson.win/tags/%E8%AE%BE%E8%AE%A1%E5%B8%88/"/>
    
  </entry>
  
  <entry>
    <title>Android Studio 打包时Signature Version V1 V2</title>
    <link href="http://dinson.win/2017/04/18/17-04-18/"/>
    <id>http://dinson.win/2017/04/18/17-04-18/</id>
    <published>2017-04-18T01:00:16.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<p>前几天更新了一下Android Studio ,今天在打正式包的时候发现多了个签名版本选择：<br><img src="http://ondlsj2sn.bkt.clouddn.com/FnDLFoLyOmCbSA460u26Q0cvUlnl.png" alt=""></p>
<p>从图中可以看到多了签名版本的选择，因为刚开始默认勾选的v2(Full APK Signature)，没多想一路下一步下去，<br>结果在测试机上（5.0.1）一直都安装失败，想着和那个选择签名版本有关系，那就查查吧。<br><a id="more"></a></p>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><blockquote>
<p>Android 7.0中引入了APK Signature Scheme v2，v1呢是jar Signature来自JDK</p>
</blockquote>
<p>V1：应该是通过ZIP条目进行验证，这样APK 签署后可进行许多修改，可以移动甚至重新压缩文件。<br>V2：验证压缩文件的所有字节，而不是单个 ZIP 条目，因此，在签名后无法再更改(包括 zipalign)。正因如此，现在在编译过程中，我们将压缩、调整和签署合并成一步完成。好处显而易见，更安全而且新的签名可缩短在设备上进行验证的时间（不需要费时地解压缩然后验证），从而加快应用安装速度。</p>
<h2 id="解决方案一"><a href="#解决方案一" class="headerlink" title="解决方案一"></a>解决方案一</h2><p>v1和v2的签名使用<br>只勾选v1签名并不会影响什么，但是在7.0上不会使用更安全的验证方式<br>只勾选V2签名7.0以下会直接安装完显示未安装，7.0以上则使用了V2的方式验证<br><strong>同时勾选</strong>V1和V2则所有机型都没问题</p>
<h2 id="解决方案二"><a href="#解决方案二" class="headerlink" title="解决方案二"></a>解决方案二</h2><p>在app的build.gradle的android标签下加入如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123;  </div><div class="line">    debug &#123;  </div><div class="line">        v1SigningEnabled true  </div><div class="line">        v2SigningEnabled true  </div><div class="line">    &#125;  </div><div class="line">    release &#123;  </div><div class="line">        v1SigningEnabled true  </div><div class="line">        v2SigningEnabled true  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=32752246&auto=1&height=66"></iframe>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几天更新了一下Android Studio ,今天在打正式包的时候发现多了个签名版本选择：&lt;br&gt;&lt;img src=&quot;http://ondlsj2sn.bkt.clouddn.com/FnDLFoLyOmCbSA460u26Q0cvUlnl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从图中可以看到多了签名版本的选择，因为刚开始默认勾选的v2(Full APK Signature)，没多想一路下一步下去，&lt;br&gt;结果在测试机上（5.0.1）一直都安装失败，想着和那个选择签名版本有关系，那就查查吧。&lt;br&gt;
    
    </summary>
    
      <category term="Android庶系" scheme="http://dinson.win/categories/Android%E5%BA%B6%E7%B3%BB/"/>
    
    
      <category term="AS" scheme="http://dinson.win/tags/AS/"/>
    
      <category term="签名" scheme="http://dinson.win/tags/%E7%AD%BE%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>Minimum supported Gradle version is 3.3. Current version is 2.14.1</title>
    <link href="http://dinson.win/2017/04/17/17-04-17/"/>
    <id>http://dinson.win/2017/04/17/17-04-17/</id>
    <published>2017-04-17T10:31:16.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近gradle更新到了3.3，studio 每次重新进入项目都会提醒更新，于是手贱便点击了update。点击更新后发现我的项目就瘫痪了，但是打开其他的项目发现并没有出现什么问题。结果就是自己挖的坑把自己埋了一天半，在这记录一下</p>
</blockquote>
<p>首先要搞懂两个概念，<strong>gradle版本</strong>和<strong>gradle插件版本</strong>，比如我现在as升级到了2.3，那么2.3就是gradle版本，2.14.1就是gradle插件版本，这两个概念的一一对应的，而之所以出现这个报错信息，就是因为当前项目的gradle插件版本是2.14.1，而gradle2.3对应的插件版本就是3.3，所以导致了报错。（gradle2.2.3对应的插件版本是2.14.1）<br>那应该怎么解决呢？</p>
<a id="more"></a>
<p>首先我们先查看一下gradle版本，打开根目录的build.gradle文件，框选的即为当前项目的gradle版本<br><img src="http://ondlsj2sn.bkt.clouddn.com/FsOv-qbTsgOI6NcyEw_sBGkXUPJ_.png" alt=""></p>
<p>再来看一下gradle插件版本，打开gradle/wrapper/gradle-wrapper.properties文件，框选的即为gradle插件版本<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fp365p4680YEk2KjrSSR_Jycf5w-.png" alt=""></p>
<p>这里我们是修改了gradle版本，即在build.gradle中把2.3改为了2.2.0，当然我们也可以修改gradle插件的版本，在gradle-wrapper.properties文件中把2.14.1改为3.3，这时候联网下载gradle3.3插件的时候会非常慢，其实我们可以直接从网上下载好对应的gradle-3.3-all.zip包，然后直接放在C:\Users\用户名.gradle\wrapper\dists\gradle-3.3-all\xxxxxxxxxxxxxx文件下（这里注意不要解压缩），然后重新编译就可以了~</p>
<p>对应关系<br><img src="http://ondlsj2sn.bkt.clouddn.com/FtyUo8siEM3laLZaxDwwaMJgGvNW.png" alt=""></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=27911432&auto=1&height=66"></iframe>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近gradle更新到了3.3，studio 每次重新进入项目都会提醒更新，于是手贱便点击了update。点击更新后发现我的项目就瘫痪了，但是打开其他的项目发现并没有出现什么问题。结果就是自己挖的坑把自己埋了一天半，在这记录一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;首先要搞懂两个概念，&lt;strong&gt;gradle版本&lt;/strong&gt;和&lt;strong&gt;gradle插件版本&lt;/strong&gt;，比如我现在as升级到了2.3，那么2.3就是gradle版本，2.14.1就是gradle插件版本，这两个概念的一一对应的，而之所以出现这个报错信息，就是因为当前项目的gradle插件版本是2.14.1，而gradle2.3对应的插件版本就是3.3，所以导致了报错。（gradle2.2.3对应的插件版本是2.14.1）&lt;br&gt;那应该怎么解决呢？&lt;/p&gt;
    
    </summary>
    
      <category term="Android庶系" scheme="http://dinson.win/categories/Android%E5%BA%B6%E7%B3%BB/"/>
    
    
      <category term="AS" scheme="http://dinson.win/tags/AS/"/>
    
      <category term="Gradle" scheme="http://dinson.win/tags/Gradle/"/>
    
      <category term="异常" scheme="http://dinson.win/tags/%E5%BC%82%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>查看Android应用包名、Activity的几个方法</title>
    <link href="http://dinson.win/2016/07/25/16-07-25/"/>
    <id>http://dinson.win/2016/07/25/16-07-25/</id>
    <published>2016-07-25T12:49:20.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>使用自动化测试工具monkeyrunner启动应用时，需要填写被测程序的包名和启动的Activity，以下有两种查看应用包名package和入口activity名称的方法：</p>
</blockquote>
<a id="more"></a>
<h2 id="有源码情况"><a href="#有源码情况" class="headerlink" title="有源码情况"></a>有源码情况</h2><p>直接打开AndroidManifest.xml文件，找到包含Android.intent.action.MAIN和android.intent.category.LAUNCHER对应的activity。</p>
<p>如下图中第三行package为com.cola.ui，第七行主Activity为com.cola.ui.ColaBox(.ColaBox为Activity简写方式)。<br><img src="http://ondlsj2sn.bkt.clouddn.com/FpEkhLttJwPCD-K6u1xt9RUT8AoR.png" alt=""></p>
<h2 id="只有Apk的情况"><a href="#只有Apk的情况" class="headerlink" title="只有Apk的情况"></a>只有Apk的情况</h2><h3 id="aapt"><a href="#aapt" class="headerlink" title="aapt"></a>aapt</h3><p>使用命令行aapt dump xmltree xxxxxx.apk AndroidManifest.xml<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fs_TbbRr30EjXC_HMpazfn8z8H4U.png" alt=""></p>
<h3 id="aapt-1"><a href="#aapt-1" class="headerlink" title="aapt"></a>aapt</h3><p>使用命令行aapt dump badging xxxxxx.apk<br><img src="http://ondlsj2sn.bkt.clouddn.com/FgJTlyBvGOmlVU-sxGqD51g7QnWC.png" alt=""></p>
<h3 id="反编译"><a href="#反编译" class="headerlink" title="反编译"></a>反编译</h3><p>使用反编译工具apktool，反编译后打开AndroidManifest.xml文件，查找方式同“有源码情况”<br><a href="http://dinson.win/2016/06/08/16-06-08/">反编译传送门</a></p>
<h2 id="没有apk，应用已经安装到手机或虚拟机中"><a href="#没有apk，应用已经安装到手机或虚拟机中" class="headerlink" title="没有apk，应用已经安装到手机或虚拟机中"></a>没有apk，应用已经安装到手机或虚拟机中</h2><h3 id="logcat"><a href="#logcat" class="headerlink" title="logcat"></a>logcat</h3><ul>
<li>清除logcat内容，使用命令adb logcat -c</li>
<li>启动logcat，使用命令adb logcat ActivityManager:I *:s</li>
<li>启动要查看的程序<br><img src="http://ondlsj2sn.bkt.clouddn.com/FhW1gQkpq9O0XkiP5VKdd8cnc5Aq.png" alt=""></li>
</ul>
<h3 id="dumpsys"><a href="#dumpsys" class="headerlink" title="dumpsys"></a>dumpsys</h3><ul>
<li>启动要查看的程序；</li>
<li>命令行输入：adb shell dumpsys window w |findstr \/ |findstr name=<br><img src="http://ondlsj2sn.bkt.clouddn.com/Fs2Zp6enCCqGJw84lkrcIQLcybIa.png" alt=""></li>
</ul>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=209326&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;使用自动化测试工具monkeyrunner启动应用时，需要填写被测程序的包名和启动的Activity，以下有两种查看应用包名package和入口activity名称的方法：&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android庶系" scheme="http://dinson.win/categories/Android%E5%BA%B6%E7%B3%BB/"/>
    
    
      <category term="应用包名" scheme="http://dinson.win/tags/%E5%BA%94%E7%94%A8%E5%8C%85%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>Android keycode</title>
    <link href="http://dinson.win/2016/07/21/16-07-21/"/>
    <id>http://dinson.win/2016/07/21/16-07-21/</id>
    <published>2016-07-21T10:44:33.000Z</published>
    <updated>2017-05-18T13:22:43.764Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Android 常用按键大全</p>
</blockquote>
<a id="more"></a>
<h2 id="电话键"><a href="#电话键" class="headerlink" title="电话键"></a>电话键</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
<th>键值</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_CALL</td>
<td>拨号键</td>
<td>5</td>
</tr>
<tr>
<td>KEYCODE_ENDCALL</td>
<td>挂机键</td>
<td>6</td>
</tr>
<tr>
<td>KEYCODE_HOME</td>
<td>按键Home</td>
<td>3</td>
</tr>
<tr>
<td>KEYCODE_MENU</td>
<td>菜单键</td>
<td>82</td>
</tr>
<tr>
<td>KEYCODE_BACK</td>
<td>返回键</td>
<td>4</td>
</tr>
<tr>
<td>KEYCODE_SEARCH</td>
<td>搜索键</td>
<td>84</td>
</tr>
<tr>
<td>KEYCODE_CAMERA</td>
<td>拍照键</td>
<td>27</td>
</tr>
<tr>
<td>KEYCODE_FOCUS</td>
<td>拍照对焦键</td>
<td>80</td>
</tr>
<tr>
<td>KEYCODE_POWER</td>
<td>电源键</td>
<td>26</td>
</tr>
<tr>
<td>KEYCODE_NOTIFICATION</td>
<td>通知键</td>
<td>83</td>
</tr>
<tr>
<td>KEYCODE_MUTE</td>
<td>话筒静音键</td>
<td>91</td>
</tr>
<tr>
<td>KEYCODE_VOLUME_MUTE</td>
<td>扬声器静音键</td>
<td>164</td>
</tr>
<tr>
<td>KEYCODE_VOLUME_UP</td>
<td>音量增加键</td>
<td>24</td>
</tr>
<tr>
<td>KEYCODE_VOLUME_DOWN</td>
<td>音量减小键</td>
<td>25</td>
</tr>
</tbody>
</table>
<p>##控制键</p>
<table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
<th>键值</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_ENTER</td>
<td>回车键</td>
<td>66</td>
</tr>
<tr>
<td>KEYCODE_ESCAPE</td>
<td>ESC键</td>
<td>111</td>
</tr>
<tr>
<td>KEYCODE_DPAD_CENTER</td>
<td>导航键 确定键</td>
<td>23</td>
</tr>
<tr>
<td>KEYCODE_DPAD_UP</td>
<td>导航键 向上</td>
<td>19</td>
</tr>
<tr>
<td>KEYCODE_DPAD_DOWN</td>
<td>导航键 向下</td>
<td>20</td>
</tr>
<tr>
<td>KEYCODE_DPAD_LEFT</td>
<td>导航键 向左</td>
<td>21</td>
</tr>
<tr>
<td>KEYCODE_DPAD_RIGHT</td>
<td>导航键 向右</td>
<td>22</td>
</tr>
<tr>
<td>KEYCODE_MOVE_HOME</td>
<td>光标移动到开始键</td>
<td>122</td>
</tr>
<tr>
<td>KEYCODE_MOVE_END</td>
<td>光标移动到末尾键</td>
<td>123</td>
</tr>
<tr>
<td>KEYCODE_PAGE_UP</td>
<td>向上翻页键</td>
<td>92</td>
</tr>
<tr>
<td>KEYCODE_PAGE_DOWN</td>
<td>向下翻页键</td>
<td>93</td>
</tr>
<tr>
<td>KEYCODE_DEL</td>
<td>退格键</td>
<td>67</td>
</tr>
<tr>
<td>KEYCODE_FORWARD_DEL</td>
<td>删除键</td>
<td>112</td>
</tr>
<tr>
<td>KEYCODE_INSERT</td>
<td>插入键</td>
<td>124</td>
</tr>
<tr>
<td>KEYCODE_TAB</td>
<td>Tab键</td>
<td>61</td>
</tr>
<tr>
<td>KEYCODE_NUM_LOCK</td>
<td>小键盘锁</td>
<td>143</td>
</tr>
<tr>
<td>KEYCODE_CAPS_LOCK</td>
<td>大写锁定键</td>
<td>115</td>
</tr>
<tr>
<td>KEYCODE_BREAK</td>
<td>Break/Pause键</td>
<td>121</td>
</tr>
<tr>
<td>KEYCODE_SCROLL_LOCK</td>
<td>滚动锁定键</td>
<td>116</td>
</tr>
<tr>
<td>KEYCODE_ZOOM_IN</td>
<td>放大键</td>
<td>168</td>
</tr>
<tr>
<td>KEYCODE_ZOOM_OUT</td>
<td>缩小键</td>
<td>169</td>
</tr>
</tbody>
</table>
<h2 id="组合键"><a href="#组合键" class="headerlink" title="组合键"></a>组合键</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_ALT_LEFT</td>
<td>Alt+Left</td>
</tr>
<tr>
<td>KEYCODE_ALT_RIGHT</td>
<td>Alt+Right</td>
</tr>
<tr>
<td>KEYCODE_CTRL_LEFT</td>
<td>Control+Left</td>
</tr>
<tr>
<td>KEYCODE_CTRL_RIGHT</td>
<td>Control+Right</td>
</tr>
<tr>
<td>KEYCODE_SHIFT_LEFT</td>
<td>Shift+Left</td>
</tr>
<tr>
<td>KEYCODE_SHIFT_RIGHT</td>
<td>Shift+Right</td>
</tr>
</tbody>
</table>
<h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
<th>键值</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_0</td>
<td>按键’0’</td>
<td>7</td>
</tr>
<tr>
<td>KEYCODE_1</td>
<td>按键’1’</td>
<td>8</td>
</tr>
<tr>
<td>KEYCODE_2</td>
<td>按键’2’</td>
<td>9</td>
</tr>
<tr>
<td>KEYCODE_3</td>
<td>按键’3’</td>
<td>10</td>
</tr>
<tr>
<td>KEYCODE_4</td>
<td>按键’4’</td>
<td>11</td>
</tr>
<tr>
<td>KEYCODE_5</td>
<td>按键’5’</td>
<td>12</td>
</tr>
<tr>
<td>KEYCODE_6</td>
<td>按键’6’</td>
<td>13</td>
</tr>
<tr>
<td>KEYCODE_7</td>
<td>按键’7’</td>
<td>14</td>
</tr>
<tr>
<td>KEYCODE_8</td>
<td>按键’8’</td>
<td>15</td>
</tr>
<tr>
<td>KEYCODE_9</td>
<td>按键’9’</td>
<td>16</td>
</tr>
<tr>
<td>KEYCODE_A</td>
<td>按键’A’</td>
<td>29</td>
</tr>
<tr>
<td>KEYCODE_B</td>
<td>按键’B’</td>
<td>30</td>
</tr>
<tr>
<td>KEYCODE_C</td>
<td>按键’C’</td>
<td>31</td>
</tr>
<tr>
<td>KEYCODE_D</td>
<td>按键’D’</td>
<td>32</td>
</tr>
<tr>
<td>KEYCODE_E</td>
<td>按键’E’</td>
<td>33</td>
</tr>
<tr>
<td>KEYCODE_F</td>
<td>按键’F’</td>
<td>34</td>
</tr>
<tr>
<td>KEYCODE_G</td>
<td>按键’G’</td>
<td>35</td>
</tr>
<tr>
<td>KEYCODE_H</td>
<td>按键’H’</td>
<td>36</td>
</tr>
<tr>
<td>KEYCODE_I</td>
<td>按键’I’</td>
<td>37</td>
</tr>
<tr>
<td>KEYCODE_J</td>
<td>按键’J’</td>
<td>38</td>
</tr>
<tr>
<td>KEYCODE_K</td>
<td>按键’K’</td>
<td>39</td>
</tr>
<tr>
<td>KEYCODE_L</td>
<td>按键’L’</td>
<td>40</td>
</tr>
<tr>
<td>KEYCODE_M</td>
<td>按键’M’</td>
<td>41</td>
</tr>
<tr>
<td>KEYCODE_N</td>
<td>按键’N’</td>
<td>42</td>
</tr>
<tr>
<td>KEYCODE_O</td>
<td>按键’O’</td>
<td>43</td>
</tr>
<tr>
<td>KEYCODE_P</td>
<td>按键’P’</td>
<td>44</td>
</tr>
<tr>
<td>KEYCODE_Q</td>
<td>按键’Q’</td>
<td>45</td>
</tr>
<tr>
<td>KEYCODE_R</td>
<td>按键’R’</td>
<td>46</td>
</tr>
<tr>
<td>KEYCODE_S</td>
<td>按键’S’</td>
<td>47</td>
</tr>
<tr>
<td>KEYCODE_T</td>
<td>按键’T’</td>
<td>48</td>
</tr>
<tr>
<td>KEYCODE_U</td>
<td>按键’U’</td>
<td>49</td>
</tr>
<tr>
<td>KEYCODE_V</td>
<td>按键’V’</td>
<td>50</td>
</tr>
<tr>
<td>KEYCODE_W</td>
<td>按键’W’</td>
<td>51</td>
</tr>
<tr>
<td>KEYCODE_X</td>
<td>按键’X’</td>
<td>52</td>
</tr>
<tr>
<td>KEYCODE_Y</td>
<td>按键’Y’</td>
<td>53</td>
</tr>
<tr>
<td>KEYCODE_Z</td>
<td>按键’Z’</td>
<td>54</td>
</tr>
</tbody>
</table>
<p>符号</p>
<table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_PLUS</td>
<td>按键’+’</td>
</tr>
<tr>
<td>KEYCODE_MINUS</td>
<td>按键’-‘</td>
</tr>
<tr>
<td>KEYCODE_STAR</td>
<td>按键’*’</td>
</tr>
<tr>
<td>KEYCODE_SLASH</td>
<td>按键’/‘</td>
</tr>
<tr>
<td>KEYCODE_EQUALS</td>
<td>按键’=’</td>
</tr>
<tr>
<td>KEYCODE_AT</td>
<td>按键’@’</td>
</tr>
<tr>
<td>KEYCODE_POUND</td>
<td>按键’#’</td>
</tr>
<tr>
<td>KEYCODE_APOSTROPHE</td>
<td>按键’’’ (单引号)</td>
</tr>
<tr>
<td>KEYCODE_BACKSLASH</td>
<td>按键’\’</td>
</tr>
<tr>
<td>KEYCODE_COMMA</td>
<td>按键’,’</td>
</tr>
<tr>
<td>KEYCODE_PERIOD</td>
<td>按键’.’</td>
</tr>
<tr>
<td>KEYCODE_LEFT_BRACKET</td>
<td>按键’[‘</td>
</tr>
<tr>
<td>KEYCODE_RIGHT_BRACKET</td>
<td>按键’]’</td>
</tr>
<tr>
<td>KEYCODE_SEMICOLON</td>
<td>按键’;’</td>
</tr>
<tr>
<td>KEYCODE_GRAVE</td>
<td>按键’`’</td>
</tr>
<tr>
<td>KEYCODE_SPACE</td>
<td>空格键</td>
</tr>
</tbody>
</table>
<h2 id="小键盘"><a href="#小键盘" class="headerlink" title="小键盘"></a>小键盘</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_NUMPAD_0</td>
<td>小键盘按键’0’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_1</td>
<td>小键盘按键’1’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_2</td>
<td>小键盘按键’2’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_3</td>
<td>小键盘按键’3’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_4</td>
<td>小键盘按键’4’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_5</td>
<td>小键盘按键’5’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_6</td>
<td>小键盘按键’6’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_7</td>
<td>小键盘按键’7’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_8</td>
<td>小键盘按键’8’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_9</td>
<td>小键盘按键’9’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_ADD</td>
<td>小键盘按键’+’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_SUBTRACT</td>
<td>小键盘按键’-‘</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_MULTIPLY</td>
<td>小键盘按键’*’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_DIVIDE</td>
<td>小键盘按键’/‘</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_EQUALS</td>
<td>小键盘按键’=’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_COMMA</td>
<td>小键盘按键’,’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_DOT</td>
<td>小键盘按键’.’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_LEFT_PAREN</td>
<td>小键盘按键’(‘</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_RIGHT_PAREN</td>
<td>小键盘按键’)’</td>
</tr>
<tr>
<td>KEYCODE_NUMPAD_ENTER</td>
<td>小键盘按键回车</td>
</tr>
</tbody>
</table>
<h2 id="功能键"><a href="#功能键" class="headerlink" title="功能键"></a>功能键</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_F1</td>
<td>按键F1</td>
</tr>
<tr>
<td>KEYCODE_F2</td>
<td>按键F2</td>
</tr>
<tr>
<td>KEYCODE_F3</td>
<td>按键F3</td>
</tr>
<tr>
<td>KEYCODE_F4</td>
<td>按键F4</td>
</tr>
<tr>
<td>KEYCODE_F5</td>
<td>按键F5</td>
</tr>
<tr>
<td>KEYCODE_F6</td>
<td>按键F6</td>
</tr>
<tr>
<td>KEYCODE_F7</td>
<td>按键F7</td>
</tr>
<tr>
<td>KEYCODE_F8</td>
<td>按键F8</td>
</tr>
<tr>
<td>KEYCODE_F9</td>
<td>按键F9</td>
</tr>
<tr>
<td>KEYCODE_F10</td>
<td>按键F10</td>
</tr>
<tr>
<td>KEYCODE_F11</td>
<td>按键F11</td>
</tr>
<tr>
<td>KEYCODE_F12</td>
<td>按键F12</td>
</tr>
</tbody>
</table>
<h2 id="多媒体键"><a href="#多媒体键" class="headerlink" title="多媒体键"></a>多媒体键</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_MEDIA_PLAY</td>
<td>多媒体键 播放</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_STOP</td>
<td>多媒体键 停止</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_PAUSE</td>
<td>多媒体键 暂停</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_PLAY_PAUSE</td>
<td>多媒体键 播放/暂停</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_FAST_FORWARD</td>
<td>多媒体键 快进</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_REWIND</td>
<td>多媒体键 快退</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_NEXT</td>
<td>多媒体键 下一首</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_PREVIOUS</td>
<td>多媒体键 上一首</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_CLOSE</td>
<td>多媒体键 关闭</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_EJECT</td>
<td>多媒体键 弹出</td>
</tr>
<tr>
<td>KEYCODE_MEDIA_RECORD</td>
<td>多媒体键 录音</td>
</tr>
</tbody>
</table>
<h2 id="手柄按键"><a href="#手柄按键" class="headerlink" title="手柄按键"></a>手柄按键</h2><table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_BUTTON_1</td>
<td>通用游戏手柄按钮 #1</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_2</td>
<td>通用游戏手柄按钮 #2</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_3</td>
<td>通用游戏手柄按钮 #3</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_4</td>
<td>通用游戏手柄按钮 #4</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_5</td>
<td>通用游戏手柄按钮 #5</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_6</td>
<td>通用游戏手柄按钮 #6</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_7</td>
<td>通用游戏手柄按钮 #7</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_8</td>
<td>通用游戏手柄按钮 #8</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_9</td>
<td>通用游戏手柄按钮 #9</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_10</td>
<td>通用游戏手柄按钮 #10</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_11</td>
<td>通用游戏手柄按钮 #11</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_12</td>
<td>通用游戏手柄按钮 #12</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_13</td>
<td>通用游戏手柄按钮 #13</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_14</td>
<td>通用游戏手柄按钮 #14</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_15</td>
<td>通用游戏手柄按钮 #15</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_16</td>
<td>通用游戏手柄按钮 #16</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_A</td>
<td>游戏手柄按钮 A</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_B</td>
<td>游戏手柄按钮 B</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_C</td>
<td>游戏手柄按钮 C</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_X</td>
<td>游戏手柄按钮 X</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_Y</td>
<td>游戏手柄按钮 Y</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_Z</td>
<td>游戏手柄按钮 Z</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_L1</td>
<td>游戏手柄按钮 L1</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_L2</td>
<td>游戏手柄按钮 L2</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_R1</td>
<td>游戏手柄按钮 R1</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_R2</td>
<td>游戏手柄按钮 R2</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_MODE</td>
<td>游戏手柄按钮 Mode</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_SELECT</td>
<td>游戏手柄按钮 Select</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_START</td>
<td>游戏手柄按钮 Start</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_THUMBL</td>
<td>Left Thumb Button</td>
</tr>
<tr>
<td>KEYCODE_BUTTON_THUMBR</td>
<td>Right Thumb Button</td>
</tr>
</tbody>
</table>
<p>待查</p>
<table>
<thead>
<tr>
<th>键名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_NUM</td>
<td>按键Number modifier</td>
</tr>
<tr>
<td>KEYCODE_INFO</td>
<td>按键Info</td>
</tr>
<tr>
<td>KEYCODE_APP_SWITCH</td>
<td>按键App switch</td>
</tr>
<tr>
<td>KEYCODE_BOOKMARK</td>
<td>按键Bookmark</td>
</tr>
<tr>
<td>KEYCODE_AVR_INPUT</td>
<td>按键A/V Receiver input</td>
</tr>
<tr>
<td>KEYCODE_AVR_POWER</td>
<td>按键A/V Receiver power</td>
</tr>
<tr>
<td>KEYCODE_CAPTIONS</td>
<td>按键Toggle captions</td>
</tr>
<tr>
<td>KEYCODE_CHANNEL_DOWN</td>
<td>按键Channel down</td>
</tr>
<tr>
<td>KEYCODE_CHANNEL_UP</td>
<td>按键Channel up</td>
</tr>
<tr>
<td>KEYCODE_CLEAR</td>
<td>按键Clear</td>
</tr>
<tr>
<td>KEYCODE_DVR</td>
<td>按键DVR</td>
</tr>
<tr>
<td>KEYCODE_ENVELOPE</td>
<td>按键Envelope special function</td>
</tr>
<tr>
<td>KEYCODE_EXPLORER</td>
<td>按键Explorer special function</td>
</tr>
<tr>
<td>KEYCODE_FORWARD</td>
<td>按键Forward</td>
</tr>
<tr>
<td>KEYCODE_FORWARD_DEL</td>
<td>按键Forward Delete</td>
</tr>
<tr>
<td>KEYCODE_FUNCTION</td>
<td>按键Function modifier</td>
</tr>
<tr>
<td>KEYCODE_GUIDE</td>
<td>按键Guide</td>
</tr>
<tr>
<td>KEYCODE_HEADSETHOOK</td>
<td>按键Headset Hook</td>
</tr>
<tr>
<td>KEYCODE_META_LEFT</td>
<td>按键Left Meta modifier</td>
</tr>
<tr>
<td>KEYCODE_META_RIGHT</td>
<td>按键Right Meta modifier</td>
</tr>
<tr>
<td>KEYCODE_PICTSYMBOLS</td>
<td>按键Picture Symbols modifier</td>
</tr>
<tr>
<td>KEYCODE_PROG_BLUE</td>
<td>按键Blue “programmable”</td>
</tr>
<tr>
<td>KEYCODE_PROG_GREEN</td>
<td>按键Green “programmable”</td>
</tr>
<tr>
<td>KEYCODE_PROG_RED</td>
<td>按键Red “programmable”</td>
</tr>
<tr>
<td>KEYCODE_PROG_YELLOW</td>
<td>按键Yellow “programmable”</td>
</tr>
<tr>
<td>KEYCODE_SETTINGS</td>
<td>按键Settings</td>
</tr>
<tr>
<td>KEYCODE_SOFT_LEFT</td>
<td>按键Soft Left</td>
</tr>
<tr>
<td>KEYCODE_SOFT_RIGHT</td>
<td>按键Soft Right</td>
</tr>
<tr>
<td>KEYCODE_STB_INPUT</td>
<td>按键Set-top-box input</td>
</tr>
<tr>
<td>KEYCODE_STB_POWER</td>
<td>按键Set-top-box power</td>
</tr>
<tr>
<td>KEYCODE_SWITCH_CHARSET</td>
<td>按键Switch Charset modifier</td>
</tr>
<tr>
<td>KEYCODE_SYM</td>
<td>按键Symbol modifier</td>
</tr>
<tr>
<td>KEYCODE_SYSRQ</td>
<td>按键System Request / Print Screen</td>
</tr>
<tr>
<td>KEYCODE_TV</td>
<td>按键TV</td>
</tr>
<tr>
<td>KEYCODE_TV_INPUT</td>
<td>按键TV input</td>
</tr>
<tr>
<td>KEYCODE_TV_POWER</td>
<td>按键TV power</td>
</tr>
<tr>
<td>KEYCODE_WINDOW</td>
<td>按键Window</td>
</tr>
<tr>
<td>KEYCODE_UNKNOWN</td>
<td>未知按键</td>
</tr>
</tbody>
</table>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=139551&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Android 常用按键大全&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android庶系" scheme="http://dinson.win/categories/Android%E5%BA%B6%E7%B3%BB/"/>
    
    
      <category term="安卓按键" scheme="http://dinson.win/tags/%E5%AE%89%E5%8D%93%E6%8C%89%E9%94%AE/"/>
    
  </entry>
  
</feed>
